let e,t;function n(e,t,n,l){Object.defineProperty(e,t,{get:n,set:l,enumerable:!0,configurable:!0})}var l,i,r,o,a,u=globalThis,s={},c={},p=u.parcelRequire79a2;null==p&&((p=function(e){if(e in s)return s[e].exports;if(e in c){var t=c[e];delete c[e];var n={id:e,exports:{}};return s[e]=n,t.call(n.exports,n,n.exports),n.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){c[e]=t},u.parcelRequire79a2=p);var d=p.register;d("bYoiY",function(e,t){n(e.exports,"Color",()=>i),n(e.exports,"darker",()=>r),n(e.exports,"brighter",()=>o),n(e.exports,"default",()=>E),n(e.exports,"hslConvert",()=>P),n(e.exports,"Rgb",()=>O),n(e.exports,"rgbConvert",()=>S),n(e.exports,"rgb",()=>b),n(e.exports,"hsl",()=>D);var l=p("bfWFq");function i(){}var r=.7,o=1.4285714285714286,a="\\s*([+-]?\\d+)\\s*",u="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",s="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3,8})$/,d=RegExp(`^rgb\\(${a},${a},${a}\\)$`),f=RegExp(`^rgb\\(${s},${s},${s}\\)$`),h=RegExp(`^rgba\\(${a},${a},${a},${u}\\)$`),m=RegExp(`^rgba\\(${s},${s},${s},${u}\\)$`),g=RegExp(`^hsl\\(${u},${s},${s}\\)$`),y=RegExp(`^hsla\\(${u},${s},${s},${u}\\)$`),v={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function _(){return this.rgb().formatHex()}function C(){return this.rgb().formatRgb()}function E(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=c.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?T(t):3===n?new O(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?A(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?A(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=d.exec(e))?new O(t[1],t[2],t[3],1):(t=f.exec(e))?new O(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=h.exec(e))?A(t[1],t[2],t[3],t[4]):(t=m.exec(e))?A(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=g.exec(e))?R(t[1],t[2]/100,t[3]/100,1):(t=y.exec(e))?R(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?T(v[e]):"transparent"===e?new O(NaN,NaN,NaN,0):null}function T(e){return new O(e>>16&255,e>>8&255,255&e,1)}function A(e,t,n,l){return l<=0&&(e=t=n=NaN),new O(e,t,n,l)}function S(e){return(e instanceof i||(e=E(e)),e)?new O((e=e.rgb()).r,e.g,e.b,e.opacity):new O}function b(e,t,n,l){return 1==arguments.length?S(e):new O(e,t,n,null==l?1:l)}function O(e,t,n,l){this.r=+e,this.g=+t,this.b=+n,this.opacity=+l}function I(){return`#${M(this.r)}${M(this.g)}${M(this.b)}`}function x(){let e=w(this.opacity);return`${1===e?"rgb(":"rgba("}${N(this.r)}, ${N(this.g)}, ${N(this.b)}${1===e?")":`, ${e})`}`}function w(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function N(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function M(e){return((e=N(e))<16?"0":"")+e.toString(16)}function R(e,t,n,l){return l<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new k(e,t,n,l)}function P(e){if(e instanceof k)return new k(e.h,e.s,e.l,e.opacity);if(e instanceof i||(e=E(e)),!e)return new k;if(e instanceof k)return e;var t=(e=e.rgb()).r/255,n=e.g/255,l=e.b/255,r=Math.min(t,n,l),o=Math.max(t,n,l),a=NaN,u=o-r,s=(o+r)/2;return u?(a=t===o?(n-l)/u+(n<l)*6:n===o?(l-t)/u+2:(t-n)/u+4,u/=s<.5?o+r:2-o-r,a*=60):u=s>0&&s<1?0:a,new k(a,u,s,e.opacity)}function D(e,t,n,l){return 1==arguments.length?P(e):new k(e,t,n,null==l?1:l)}function k(e,t,n,l){this.h=+e,this.s=+t,this.l=+n,this.opacity=+l}function U(e){return(e=(e||0)%360)<0?e+360:e}function q(e){return Math.max(0,Math.min(1,e||0))}function L(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}(0,l.default)(i,E,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_,formatHex:_,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return P(this).formatHsl()},formatRgb:C,toString:C}),(0,l.default)(O,b,(0,l.extend)(i,{brighter(e){return e=null==e?o:Math.pow(o,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?r:Math.pow(r,e),new O(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new O(N(this.r),N(this.g),N(this.b),w(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:I,formatHex:I,formatHex8:function(){return`#${M(this.r)}${M(this.g)}${M(this.b)}${M((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:x,toString:x})),(0,l.default)(k,D,(0,l.extend)(i,{brighter(e){return e=null==e?o:Math.pow(o,e),new k(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?r:Math.pow(r,e),new k(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,l=n+(n<.5?n:1-n)*t,i=2*n-l;return new O(L(e>=240?e-240:e+120,i,l),L(e,i,l),L(e<120?e+240:e-120,i,l),this.opacity)},clamp(){return new k(U(this.h),q(this.s),q(this.l),w(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=w(this.opacity);return`${1===e?"hsl(":"hsla("}${U(this.h)}, ${100*q(this.s)}%, ${100*q(this.l)}%${1===e?")":`, ${e})`}`}}))}),d("bfWFq",function(e,t){function l(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function i(e,t){var n=Object.create(e.prototype);for(var l in t)n[l]=t[l];return n}n(e.exports,"default",()=>l),n(e.exports,"extend",()=>i)});class f{}function h(e,t){return e.replace(/\{([^}]+)\}/g,(e,n)=>{if(Object.prototype.hasOwnProperty.call(t,n)){let e=t[n];return null!=e?String(e):""}throw Error(`Key '${n}' not found in valueMap.`)})}function m(e,t,n){for(let l=0;l<t.length-1;l++){let i=t[l];if(i.endsWith("[]")){let r=i.slice(0,-2);if(!(r in e))if(Array.isArray(n))e[r]=Array.from({length:n.length},()=>({}));else throw Error(`Value must be a list given an array path ${i}`);if(Array.isArray(e[r])){let i=e[r];if(Array.isArray(n))for(let e=0;e<i.length;e++)m(i[e],t.slice(l+1),n[e]);else for(let e of i)m(e,t.slice(l+1),n)}return}if(i.endsWith("[0]")){let r=i.slice(0,-3);r in e||(e[r]=[{}]),m(e[r][0],t.slice(l+1),n);return}e[i]&&"object"==typeof e[i]||(e[i]={}),e=e[i]}let l=t[t.length-1],i=e[l];if(void 0!==i){if(!n||"object"==typeof n&&0===Object.keys(n).length||n===i)return;if("object"==typeof i&&"object"==typeof n&&null!==i&&null!==n)Object.assign(i,n);else throw Error(`Cannot set value for an existing key. Key: ${l}`)}else e[l]=n}function g(e,t){try{if(1===t.length&&"_self"===t[0])return e;for(let n=0;n<t.length;n++){if("object"!=typeof e||null===e)return;let l=t[n];if(l.endsWith("[]")){let i=l.slice(0,-2);if(!(i in e))return;{let l=e[i];if(!Array.isArray(l))return;return l.map(e=>g(e,t.slice(n+1)))}}e=e[l]}return e}catch(e){if(e instanceof TypeError)return;throw e}}(n_=n9||(n9={})).OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n_.OUTCOME_OK="OUTCOME_OK",n_.OUTCOME_FAILED="OUTCOME_FAILED",n_.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED",(nC=n7||(n7={})).LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",nC.PYTHON="PYTHON",(nE=le||(le={})).TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",nE.STRING="STRING",nE.NUMBER="NUMBER",nE.INTEGER="INTEGER",nE.BOOLEAN="BOOLEAN",nE.ARRAY="ARRAY",nE.OBJECT="OBJECT",nE.NULL="NULL",(nT=lt||(lt={})).HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",nT.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",nT.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",nT.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",nT.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",nT.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",nT.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",nT.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",nT.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",nT.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",(nA=ln||(ln={})).HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",nA.SEVERITY="SEVERITY",nA.PROBABILITY="PROBABILITY",(nS=ll||(ll={})).HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",nS.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",nS.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",nS.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",nS.BLOCK_NONE="BLOCK_NONE",nS.OFF="OFF",(nb=li||(li={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",nb.MODE_DYNAMIC="MODE_DYNAMIC",(nO=lr||(lr={})).AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",nO.NO_AUTH="NO_AUTH",nO.API_KEY_AUTH="API_KEY_AUTH",nO.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",nO.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",nO.OAUTH="OAUTH",nO.OIDC_AUTH="OIDC_AUTH",(nI=lo||(lo={})).API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",nI.SIMPLE_SEARCH="SIMPLE_SEARCH",nI.ELASTIC_SEARCH="ELASTIC_SEARCH",(nx=la||(la={})).ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",nx.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER",(nw=lu||(lu={})).URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",nw.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",nw.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",(nN=ls||(ls={})).FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",nN.STOP="STOP",nN.MAX_TOKENS="MAX_TOKENS",nN.SAFETY="SAFETY",nN.RECITATION="RECITATION",nN.LANGUAGE="LANGUAGE",nN.OTHER="OTHER",nN.BLOCKLIST="BLOCKLIST",nN.PROHIBITED_CONTENT="PROHIBITED_CONTENT",nN.SPII="SPII",nN.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",nN.IMAGE_SAFETY="IMAGE_SAFETY",nN.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",(nM=lc||(lc={})).HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",nM.NEGLIGIBLE="NEGLIGIBLE",nM.LOW="LOW",nM.MEDIUM="MEDIUM",nM.HIGH="HIGH",(nR=lp||(lp={})).HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",nR.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",nR.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",nR.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",nR.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH",(nP=ld||(ld={})).BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",nP.SAFETY="SAFETY",nP.OTHER="OTHER",nP.BLOCKLIST="BLOCKLIST",nP.PROHIBITED_CONTENT="PROHIBITED_CONTENT",nP.IMAGE_SAFETY="IMAGE_SAFETY",(nD=lf||(lf={})).TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",nD.ON_DEMAND="ON_DEMAND",nD.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT",(nk=lh||(lh={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",nk.TEXT="TEXT",nk.IMAGE="IMAGE",nk.AUDIO="AUDIO",(nU=lm||(lm={})).MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",nU.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",nU.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",nU.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",(nq=lg||(lg={})).JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",nq.JOB_STATE_QUEUED="JOB_STATE_QUEUED",nq.JOB_STATE_PENDING="JOB_STATE_PENDING",nq.JOB_STATE_RUNNING="JOB_STATE_RUNNING",nq.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",nq.JOB_STATE_FAILED="JOB_STATE_FAILED",nq.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",nq.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",nq.JOB_STATE_PAUSED="JOB_STATE_PAUSED",nq.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",nq.JOB_STATE_UPDATING="JOB_STATE_UPDATING",nq.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",(nL=ly||(ly={})).ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",nL.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",nL.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",nL.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",nL.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",nL.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",nL.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO",(nG=lv||(lv={})).FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",nG.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",nG.BALANCED="BALANCED",nG.PRIORITIZE_COST="PRIORITIZE_COST",(nF=l_||(l_={})).UNSPECIFIED="UNSPECIFIED",nF.BLOCKING="BLOCKING",nF.NON_BLOCKING="NON_BLOCKING",(nj=lC||(lC={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",nj.MODE_DYNAMIC="MODE_DYNAMIC",(nB=lE||(lE={})).MODE_UNSPECIFIED="MODE_UNSPECIFIED",nB.AUTO="AUTO",nB.ANY="ANY",nB.NONE="NONE",(nV=lT||(lT={})).BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",nV.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",nV.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",nV.BLOCK_NONE="BLOCK_NONE",(nJ=lA||(lA={})).DONT_ALLOW="DONT_ALLOW",nJ.ALLOW_ADULT="ALLOW_ADULT",nJ.ALLOW_ALL="ALLOW_ALL",(nH=lS||(lS={})).auto="auto",nH.en="en",nH.ja="ja",nH.ko="ko",nH.hi="hi",nH.zh="zh",nH.pt="pt",nH.es="es",(nY=lb||(lb={})).MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",nY.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",nY.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",nY.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",nY.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC",(n$=lO||(lO={})).CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n$.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n$.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n$.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH",(nW=lI||(lI={})).SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",nW.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",nW.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",nW.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT",(nK=lx||(lx={})).EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",nK.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",nK.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",nK.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",nK.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",nK.EDIT_MODE_STYLE="EDIT_MODE_STYLE",nK.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",nK.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE",(nz=lw||(lw={})).OPTIMIZED="OPTIMIZED",nz.LOSSLESS="LOSSLESS",(nX=lN||(lN={})).STATE_UNSPECIFIED="STATE_UNSPECIFIED",nX.PROCESSING="PROCESSING",nX.ACTIVE="ACTIVE",nX.FAILED="FAILED",(nQ=lM||(lM={})).SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",nQ.UPLOADED="UPLOADED",nQ.GENERATED="GENERATED",(nZ=lR||(lR={})).MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",nZ.TEXT="TEXT",nZ.IMAGE="IMAGE",nZ.VIDEO="VIDEO",nZ.AUDIO="AUDIO",nZ.DOCUMENT="DOCUMENT",(n0=lP||(lP={})).START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n0.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n0.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW",(n1=lD||(lD={})).END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n1.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n1.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW",(n2=lk||(lk={})).ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n2.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n2.NO_INTERRUPTION="NO_INTERRUPTION",(n5=lU||(lU={})).TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n5.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n5.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT",(n3=lq||(lq={})).SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n3.SILENT="SILENT",n3.WHEN_IDLE="WHEN_IDLE",n3.INTERRUPT="INTERRUPT",(n8=lL||(lL={})).SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n8.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n8.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n8.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n8.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n8.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n8.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n8.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n8.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n8.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n8.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n8.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n8.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR",(n4=lG||(lG={})).PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n4.PLAY="PLAY",n4.PAUSE="PAUSE",n4.STOP="STOP",n4.RESET_CONTEXT="RESET_CONTEXT";class y{constructor(e){let t={};for(let n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class v{get text(){var e,t,n,l,i,r,o,a;if((null==(l=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",s=!1,c=[];for(let e of null!=(a=null==(o=null==(r=null==(i=this.candidates)?void 0:i[0])?void 0:r.content)?void 0:o.parts)?a:[]){for(let[t,n]of Object.entries(e))"text"!==t&&"thought"!==t&&(null!==n||void 0!==n)&&c.push(t);if("string"==typeof e.text){if("boolean"==typeof e.thought&&e.thought)continue;s=!0,u+=e.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?u:void 0}get data(){var e,t,n,l,i,r,o,a;if((null==(l=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="",s=[];for(let e of null!=(a=null==(o=null==(r=null==(i=this.candidates)?void 0:i[0])?void 0:r.content)?void 0:o.parts)?a:[]){for(let[t,n]of Object.entries(e))"inlineData"!==t&&(null!==n||void 0!==n)&&s.push(t);e.inlineData&&"string"==typeof e.inlineData.data&&(u+=atob(e.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,n,l,i,r,o,a;if((null==(l=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let u=null==(a=null==(o=null==(r=null==(i=this.candidates)?void 0:i[0])?void 0:r.content)?void 0:o.parts)?void 0:a.filter(e=>e.functionCall).map(e=>e.functionCall).filter(e=>void 0!==e);if((null==u?void 0:u.length)!==0)return u}get executableCode(){var e,t,n,l,i,r,o,a,u;if((null==(l=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let s=null==(a=null==(o=null==(r=null==(i=this.candidates)?void 0:i[0])?void 0:r.content)?void 0:o.parts)?void 0:a.filter(e=>e.executableCode).map(e=>e.executableCode).filter(e=>void 0!==e);if((null==s?void 0:s.length)!==0)return null==(u=null==s?void 0:s[0])?void 0:u.code}get codeExecutionResult(){var e,t,n,l,i,r,o,a,u;if((null==(l=null==(n=null==(t=null==(e=this.candidates)?void 0:e[0])?void 0:t.content)?void 0:n.parts)?void 0:l.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let s=null==(a=null==(o=null==(r=null==(i=this.candidates)?void 0:i[0])?void 0:r.content)?void 0:o.parts)?void 0:a.filter(e=>e.codeExecutionResult).map(e=>e.codeExecutionResult).filter(e=>void 0!==e);if((null==s?void 0:s.length)!==0)return null==(u=null==s?void 0:s[0])?void 0:u.output}}class _{}class C{}class E{}class T{}class A{}class S{}class b{}class O{}class I{}class x{}class w{}class N{}class M{}class R{}class P{}class D{get text(){var e,t,n;let l="",i=!1,r=[];for(let o of null!=(n=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?n:[]){for(let[e,t]of Object.entries(o))"text"!==e&&"thought"!==e&&null!==t&&r.push(e);if("string"==typeof o.text){if("boolean"==typeof o.thought&&o.thought)continue;i=!0,l+=o.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?l:void 0}get data(){var e,t,n;let l="",i=[];for(let r of null!=(n=null==(t=null==(e=this.serverContent)?void 0:e.modelTurn)?void 0:t.parts)?n:[]){for(let[e,t]of Object.entries(r))"inlineData"!==e&&null!==t&&i.push(e);r.inlineData&&"string"==typeof r.inlineData.data&&(l+=atob(r.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),l.length>0?btoa(l):void 0}}class k{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}function U(e,t){if(!t||"string"!=typeof t)throw Error("model is required and must be a string");if(e.isVertexAI())if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;else{if(!(t.indexOf("/")>=0))return`publishers/google/models/${t}`;let e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function q(e,t){let n=U(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function L(e){return Array.isArray(e)?e.map(e=>G(e)):[G(e)]}function G(e){if("object"==typeof e&&null!==e)return e;throw Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function F(e){let t=G(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function j(e){let t=G(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw Error(`Unsupported mime type: ${t.mimeType}`)}function B(e){if(null==e)throw Error("PartUnion is required");if("object"==typeof e)return e;if("string"==typeof e)return{text:e};throw Error(`Unsupported part type: ${typeof e}`)}function V(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("PartListUnion is required");return Array.isArray(e)?e.map(e=>B(e)):[B(e)]}function J(e){return null!=e&&"object"==typeof e&&"parts"in e&&Array.isArray(e.parts)}function H(e){return null!=e&&"object"==typeof e&&"functionCall"in e}function Y(e){return null!=e&&"object"==typeof e&&"functionResponse"in e}function $(e){if(null==e)throw Error("ContentUnion is required");return J(e)?e:{role:"user",parts:V(e)}}function W(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{let t=$(e);return t.parts&&t.parts.length>0&&void 0!==t.parts[0].text?[t.parts[0].text]:[]});if(e.isVertexAI()){let e=$(t);return e.parts&&e.parts.length>0&&void 0!==e.parts[0].text?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>$(e)):[$(t)]}function K(e){if(null==e||Array.isArray(e)&&0===e.length)throw Error("contents are required");if(!Array.isArray(e)){if(H(e)||Y(e))throw Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$(e)]}let t=[],n=[],l=J(e[0]);for(let i of e){let e=J(i);if(e!=l)throw Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(e)t.push(i);else if(H(i)||Y(i))throw Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");else n.push(i)}return l||t.push({role:"user",parts:V(n)}),t}function z(e){let t={},n=["items"],l=["anyOf"],i=["properties"];if(e.type&&e.anyOf)throw Error("type and anyOf cannot be both populated.");let r=e.anyOf;for(let[o,a]of(null!=r&&2==r.length&&("null"===r[0].type?(t.nullable=!0,e=r[1]):"null"===r[1].type&&(t.nullable=!0,e=r[0])),e.type instanceof Array&&function(e,t){e.includes("null")&&(t.nullable=!0);let n=e.filter(e=>"null"!==e);if(1===n.length)t.type=Object.values(le).includes(n[0].toUpperCase())?n[0].toUpperCase():le.TYPE_UNSPECIFIED;else for(let e of(t.anyOf=[],n))t.anyOf.push({type:Object.values(le).includes(e.toUpperCase())?e.toUpperCase():le.TYPE_UNSPECIFIED})}(e.type,t),Object.entries(e)))if(null!=a)if("type"==o){if("null"===a)throw Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(le).includes(a.toUpperCase())?a.toUpperCase():le.TYPE_UNSPECIFIED}else if(n.includes(o))t[o]=z(a);else if(l.includes(o)){let e=[];for(let n of a){if("null"==n.type){t.nullable=!0;continue}e.push(z(n))}t[o]=e}else if(i.includes(o)){let e={};for(let[t,n]of Object.entries(a))e[t]=z(n);t[o]=e}else{if("additionalProperties"===o)continue;t[o]=a}return t}function X(e){if("object"==typeof e)return e;if("string"==typeof e)return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw Error(`Unsupported speechConfig type: ${typeof e}`)}function Q(e){if("multiSpeakerVoiceConfig"in e)throw Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function Z(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=z(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=z(t.response));return e}function ee(e){if(null==e)throw Error("tools is required");if(!Array.isArray(e))throw Error("tools is required and must be an array of Tools");let t=[];for(let n of e)t.push(n);return t}function et(e,t){if("string"!=typeof t)throw Error("name must be a string");return function(e,t,n,l=1){let i=!t.startsWith(`${n}/`)&&t.split("/").length===l;if(e.isVertexAI())if(t.startsWith("projects/"))return t;else if(t.startsWith("locations/"))return`projects/${e.getProject()}/${t}`;else if(t.startsWith(`${n}/`))return`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`;else if(i)return`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`;else return t;return i?`${n}/${t}`:t}(e,t,"cachedContents")}function en(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function el(e){if("string"!=typeof e)throw Error("fromImageBytes must be a string");return e}function ei(e){var t;let n;if(null!=e&&"object"==typeof e&&"name"in e&&(n=e.name),null==e||"object"!=typeof e||!("uri"in e)||void 0!==(n=e.uri)){if(null==e||"object"!=typeof e||!("video"in e)||void 0!==(n=null==(t=e.video)?void 0:t.uri)){if("string"==typeof e&&(n=e),void 0===n)throw Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let e=n.split("files/")[1].match(/[a-z0-9]+/);if(null===e)throw Error(`Could not extract file name from URI ${n}`);n=e[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}}function er(e,t){return e.isVertexAI()?t?"publishers/google/models":"models":t?"models":"tunedModels"}function eo(e){for(let l of["models","tunedModels","publisherModels"]){var t,n;if(t=e,n=l,null!==t&&"object"==typeof t&&n in t)return e[l]}return[]}function ea(e,t){if("string"==typeof t||Array.isArray(t)){if(Array.isArray(t))return{inlinedRequests:t};else if("string"==typeof t){if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};else if(t.startsWith("files/"))return{fileName:t}}}else{if(e&&e.isVertexAI()){if(t.gcsUri&&t.bigqueryUri)throw Error("Only one of `gcsUri` or `bigqueryUri` can be set.");else if(!t.gcsUri&&!t.bigqueryUri)throw Error("One of `gcsUri` or `bigqueryUri` must be set.")}else if(t.inlinedRequests&&t.fileName)throw Error("Only one of `inlinedRequests` or `fileName` can be set.");else if(!t.inlinedRequests&&!t.fileName)throw Error("One of `inlinedRequests` or `fileName` must be set.");return t}throw Error(`Unsupported source: ${t}`)}function eu(e,t){if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw Error(`Invalid batch job name: ${t}.`)}function es(e){if("BATCH_STATE_UNSPECIFIED"===e)return"JOB_STATE_UNSPECIFIED";if("BATCH_STATE_PENDING"===e)return"JOB_STATE_PENDING";if("BATCH_STATE_SUCCEEDED"===e)return"JOB_STATE_SUCCEEDED";if("BATCH_STATE_FAILED"===e)return"JOB_STATE_FAILED";if("BATCH_STATE_CANCELLED"===e)return"JOB_STATE_CANCELLED";else return e}function ec(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}function ep(e){let t={},n=g(e,["prebuiltVoiceConfig"]);return null!=n&&m(t,["prebuiltVoiceConfig"],function(e){let t={},n=g(e,["voiceName"]);return null!=n&&m(t,["voiceName"],n),t}(n)),t}function ed(e){let t={},n=g(e,["details"]);null!=n&&m(t,["details"],n);let l=g(e,["code"]);null!=l&&m(t,["code"],l);let i=g(e,["message"]);return null!=i&&m(t,["message"],i),t}function ef(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["metadata","displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["metadata","state"]);null!=i&&m(t,["state"],es(i));let r=g(e,["metadata","createTime"]);null!=r&&m(t,["createTime"],r);let o=g(e,["metadata","endTime"]);null!=o&&m(t,["endTime"],o);let a=g(e,["metadata","updateTime"]);null!=a&&m(t,["updateTime"],a);let u=g(e,["metadata","model"]);null!=u&&m(t,["model"],u);let s=g(e,["metadata","output"]);return null!=s&&m(t,["dest"],function(e){let t={},n=g(e,["responsesFile"]);null!=n&&m(t,["fileName"],n);let l=g(e,["inlinedResponses","inlinedResponses"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["response"]);null!=n&&m(t,["response"],function(e){let t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);let l=g(e,["candidates"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["content"]);null!=n&&m(t,["content"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}(n));let l=g(e,["citationMetadata"]);null!=l&&m(t,["citationMetadata"],function(e){let t={},n=g(e,["citationSources"]);return null!=n&&m(t,["citations"],n),t}(l));let i=g(e,["tokenCount"]);null!=i&&m(t,["tokenCount"],i);let r=g(e,["finishReason"]);null!=r&&m(t,["finishReason"],r);let o=g(e,["urlContextMetadata"]);null!=o&&m(t,["urlContextMetadata"],function(e){let t={},n=g(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["retrievedUrl"]);null!=n&&m(t,["retrievedUrl"],n);let l=g(e,["urlRetrievalStatus"]);return null!=l&&m(t,["urlRetrievalStatus"],l),t})(e))),m(t,["urlMetadata"],e)}return t}(o));let a=g(e,["avgLogprobs"]);null!=a&&m(t,["avgLogprobs"],a);let u=g(e,["groundingMetadata"]);null!=u&&m(t,["groundingMetadata"],u);let s=g(e,["index"]);null!=s&&m(t,["index"],s);let c=g(e,["logprobsResult"]);null!=c&&m(t,["logprobsResult"],c);let p=g(e,["safetyRatings"]);return null!=p&&m(t,["safetyRatings"],p),t})(e))),m(t,["candidates"],e)}let i=g(e,["modelVersion"]);null!=i&&m(t,["modelVersion"],i);let r=g(e,["promptFeedback"]);null!=r&&m(t,["promptFeedback"],r);let o=g(e,["usageMetadata"]);return null!=o&&m(t,["usageMetadata"],o),t}(n));let l=g(e,["error"]);return null!=l&&m(t,["error"],ed(l)),t})(e))),m(t,["inlinedResponses"],e)}return t}(s)),t}function eh(e){let t={},n=g(e,["details"]);null!=n&&m(t,["details"],n);let l=g(e,["code"]);null!=l&&m(t,["code"],l);let i=g(e,["message"]);return null!=i&&m(t,["message"],i),t}function em(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["state"]);null!=i&&m(t,["state"],es(i));let r=g(e,["error"]);null!=r&&m(t,["error"],eh(r));let o=g(e,["createTime"]);null!=o&&m(t,["createTime"],o);let a=g(e,["startTime"]);null!=a&&m(t,["startTime"],a);let u=g(e,["endTime"]);null!=u&&m(t,["endTime"],u);let s=g(e,["updateTime"]);null!=s&&m(t,["updateTime"],s);let c=g(e,["model"]);null!=c&&m(t,["model"],c);let p=g(e,["inputConfig"]);null!=p&&m(t,["src"],function(e){let t={},n=g(e,["instancesFormat"]);null!=n&&m(t,["format"],n);let l=g(e,["gcsSource","uris"]);null!=l&&m(t,["gcsUri"],l);let i=g(e,["bigquerySource","inputUri"]);return null!=i&&m(t,["bigqueryUri"],i),t}(p));let d=g(e,["outputConfig"]);return null!=d&&m(t,["dest"],function(e){let t={},n=g(e,["predictionsFormat"]);null!=n&&m(t,["format"],n);let l=g(e,["gcsDestination","outputUriPrefix"]);null!=l&&m(t,["gcsUri"],l);let i=g(e,["bigqueryDestination","outputUri"]);return null!=i&&m(t,["bigqueryUri"],i),t}(d)),t}(n6=lF||(lF={})).PAGED_ITEM_BATCH_JOBS="batchJobs",n6.PAGED_ITEM_MODELS="models",n6.PAGED_ITEM_TUNING_JOBS="tuningJobs",n6.PAGED_ITEM_FILES="files",n6.PAGED_ITEM_CACHED_CONTENTS="cachedContents";class eg{constructor(e,t,n,l){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,l)}init(e,t,n){var l,i;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let r={config:{}};(r=n?"object"==typeof n?Object.assign({},n):n:{config:{}}).config&&(r.config.pageToken=t.nextPageToken),this.paramsInternal=r,this.pageInternalSize=null!=(i=null==(l=r.config)?void 0:l.pageSize)?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(!this.hasNextPage())return{value:void 0,done:!0};else await this.nextPage();let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return(null==(e=this.params.config)?void 0:e.pageToken)!==void 0}}class ey extends f{constructor(e){super(),this.apiClient=e,this.create=async e=>{if(this.apiClient.isVertexAI()){let t=Date.now().toString();if(Array.isArray(e.src))throw Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(e.config=e.config||{},void 0===e.config.displayName&&(e.config.displayName="genaiBatchJob_${timestampStr}"),void 0===e.config.dest&&"string"==typeof e.src)if(e.src.startsWith("gs://")&&e.src.endsWith(".jsonl"))e.config.dest=`${e.src.slice(0,-6)}/dest`;else if(e.src.startsWith("bq://"))e.config.dest=`${e.src}_dest_${t}`;else throw Error("Unsupported source:"+e.src)}return await this.createInternal(e)},this.list=async(e={})=>new eg(lF.PAGED_ITEM_BATCH_JOBS,e=>this.listInternal(e),await this.listInternal(e),e)}async createInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["model"],U(e,l));let i=g(t,["src"]);null!=i&&m(n,["inputConfig"],function(e){let t={},n=g(e,["format"]);null!=n&&m(t,["instancesFormat"],n);let l=g(e,["gcsUri"]);null!=l&&m(t,["gcsSource","uris"],l);let i=g(e,["bigqueryUri"]);if(null!=i&&m(t,["bigquerySource","inputUri"],i),void 0!==g(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedRequests"]))throw Error("inlinedRequests parameter is not supported in Vertex AI.");return t}(ea(e,i)));let r=g(t,["config"]);return null!=r&&m(n,["config"],function(e,t){let n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);let l=g(e,["dest"]);return void 0!==t&&null!=l&&m(t,["outputConfig"],function(e){let t={},n=g(e,["format"]);null!=n&&m(t,["predictionsFormat"],n);let l=g(e,["gcsUri"]);null!=l&&m(t,["gcsDestination","outputUriPrefix"],l);let i=g(e,["bigqueryUri"]);if(null!=i&&m(t,["bigqueryDestination","outputUri"],i),void 0!==g(e,["fileName"]))throw Error("fileName parameter is not supported in Vertex AI.");if(void 0!==g(e,["inlinedResponses"]))throw Error("inlinedResponses parameter is not supported in Vertex AI.");return t}(function(e){if("string"!=typeof e)return e;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw Error(`Unsupported destination: ${e}`)}(l))),{}}(r,n)),n}(this.apiClient,e);return r=h("batchPredictionJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>em(e))}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["src"]);null!=i&&m(n,["batch","inputConfig"],function(e,t){let n={};if(void 0!==g(t,["format"]))throw Error("format parameter is not supported in Gemini API.");if(void 0!==g(t,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==g(t,["bigqueryUri"]))throw Error("bigqueryUri parameter is not supported in Gemini API.");let l=g(t,["fileName"]);null!=l&&m(n,["fileName"],l);let i=g(t,["inlinedRequests"]);if(null!=i){let t=i;Array.isArray(t)&&(t=t.map(t=>(function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["request","model"],U(e,l));let i=g(t,["contents"]);if(null!=i){let e=K(i);Array.isArray(e)&&(e=e.map(e=>ec(e))),m(n,["request","contents"],e)}let r=g(t,["config"]);return null!=r&&m(n,["request","generationConfig"],function(e,t,n){let l={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],ec($(i)));let r=g(t,["temperature"]);null!=r&&m(l,["temperature"],r);let o=g(t,["topP"]);null!=o&&m(l,["topP"],o);let a=g(t,["topK"]);null!=a&&m(l,["topK"],a);let u=g(t,["candidateCount"]);null!=u&&m(l,["candidateCount"],u);let s=g(t,["maxOutputTokens"]);null!=s&&m(l,["maxOutputTokens"],s);let c=g(t,["stopSequences"]);null!=c&&m(l,["stopSequences"],c);let p=g(t,["responseLogprobs"]);null!=p&&m(l,["responseLogprobs"],p);let d=g(t,["logprobs"]);null!=d&&m(l,["logprobs"],d);let f=g(t,["presencePenalty"]);null!=f&&m(l,["presencePenalty"],f);let h=g(t,["frequencyPenalty"]);null!=h&&m(l,["frequencyPenalty"],h);let y=g(t,["seed"]);null!=y&&m(l,["seed"],y);let v=g(t,["responseMimeType"]);null!=v&&m(l,["responseMimeType"],v);let _=g(t,["responseSchema"]);null!=_&&m(l,["responseSchema"],function(e){let t={},n=g(e,["anyOf"]);null!=n&&m(t,["anyOf"],n);let l=g(e,["default"]);null!=l&&m(t,["default"],l);let i=g(e,["description"]);null!=i&&m(t,["description"],i);let r=g(e,["enum"]);null!=r&&m(t,["enum"],r);let o=g(e,["example"]);null!=o&&m(t,["example"],o);let a=g(e,["format"]);null!=a&&m(t,["format"],a);let u=g(e,["items"]);null!=u&&m(t,["items"],u);let s=g(e,["maxItems"]);null!=s&&m(t,["maxItems"],s);let c=g(e,["maxLength"]);null!=c&&m(t,["maxLength"],c);let p=g(e,["maxProperties"]);null!=p&&m(t,["maxProperties"],p);let d=g(e,["maximum"]);null!=d&&m(t,["maximum"],d);let f=g(e,["minItems"]);null!=f&&m(t,["minItems"],f);let h=g(e,["minLength"]);null!=h&&m(t,["minLength"],h);let y=g(e,["minProperties"]);null!=y&&m(t,["minProperties"],y);let v=g(e,["minimum"]);null!=v&&m(t,["minimum"],v);let _=g(e,["nullable"]);null!=_&&m(t,["nullable"],_);let C=g(e,["pattern"]);null!=C&&m(t,["pattern"],C);let E=g(e,["properties"]);null!=E&&m(t,["properties"],E);let T=g(e,["propertyOrdering"]);null!=T&&m(t,["propertyOrdering"],T);let A=g(e,["required"]);null!=A&&m(t,["required"],A);let S=g(e,["title"]);null!=S&&m(t,["title"],S);let b=g(e,["type"]);return null!=b&&m(t,["type"],b),t}(z(_)));let C=g(t,["responseJsonSchema"]);if(null!=C&&m(l,["responseJsonSchema"],C),void 0!==g(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==g(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let E=g(t,["safetySettings"]);if(void 0!==n&&null!=E){let e=E;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==g(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let n=g(e,["category"]);null!=n&&m(t,["category"],n);let l=g(e,["threshold"]);return null!=l&&m(t,["threshold"],l),t})(e))),m(n,["safetySettings"],e)}let T=g(t,["tools"]);if(void 0!==n&&null!=T){let e=ee(T);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["behavior"]);null!=n&&m(t,["behavior"],n);let l=g(e,["description"]);null!=l&&m(t,["description"],l);let i=g(e,["name"]);null!=i&&m(t,["name"],i);let r=g(e,["parameters"]);null!=r&&m(t,["parameters"],r);let o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);let a=g(e,["response"]);null!=a&&m(t,["response"],a);let u=g(e,["responseJsonSchema"]);return null!=u&&m(t,["responseJsonSchema"],u),t})(e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(l));let i=g(e,["googleSearchRetrieval"]);if(null!=i&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(i)),void 0!==g(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==g(e,["googleMaps"]))throw Error("googleMaps parameter is not supported in Gemini API.");null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let r=g(e,["codeExecution"]);null!=r&&m(t,["codeExecution"],r);let o=g(e,["computerUse"]);return null!=o&&m(t,["computerUse"],o),t})(Z(e)))),m(n,["tools"],e)}let A=g(t,["toolConfig"]);if(void 0!==n&&null!=A&&m(n,["toolConfig"],function(e){let t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["allowedFunctionNames"]);return null!=l&&m(t,["allowedFunctionNames"],l),t}(n));let l=g(e,["retrievalConfig"]);return null!=l&&m(t,["retrievalConfig"],function(e){let t={},n=g(e,["latLng"]);null!=n&&m(t,["latLng"],function(e){let t={},n=g(e,["latitude"]);null!=n&&m(t,["latitude"],n);let l=g(e,["longitude"]);return null!=l&&m(t,["longitude"],l),t}(n));let l=g(e,["languageCode"]);return null!=l&&m(t,["languageCode"],l),t}(l)),t}(A)),void 0!==g(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let S=g(t,["cachedContent"]);void 0!==n&&null!=S&&m(n,["cachedContent"],et(e,S));let b=g(t,["responseModalities"]);null!=b&&m(l,["responseModalities"],b);let O=g(t,["mediaResolution"]);null!=O&&m(l,["mediaResolution"],O);let I=g(t,["speechConfig"]);if(null!=I&&m(l,["speechConfig"],function(e){let t={},n=g(e,["voiceConfig"]);null!=n&&m(t,["voiceConfig"],ep(n));let l=g(e,["multiSpeakerVoiceConfig"]);null!=l&&m(t,["multiSpeakerVoiceConfig"],function(e){let t={},n=g(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["speaker"]);null!=n&&m(t,["speaker"],n);let l=g(e,["voiceConfig"]);return null!=l&&m(t,["voiceConfig"],ep(l)),t})(e))),m(t,["speakerVoiceConfigs"],e)}return t}(l));let i=g(e,["languageCode"]);return null!=i&&m(t,["languageCode"],i),t}(X(I))),void 0!==g(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let x=g(t,["thinkingConfig"]);return null!=x&&m(l,["thinkingConfig"],function(e){let t={},n=g(e,["includeThoughts"]);null!=n&&m(t,["includeThoughts"],n);let l=g(e,["thinkingBudget"]);return null!=l&&m(t,["thinkingBudget"],l),t}(x)),l}(e,r,n)),n})(e,t))),m(n,["requests","requests"],t)}return n}(e,ea(e,i)));let r=g(t,["config"]);return null!=r&&m(n,["config"],function(e,t){let n=g(e,["displayName"]);if(void 0!==t&&null!=n&&m(t,["batch","displayName"],n),void 0!==g(e,["dest"]))throw Error("dest parameter is not supported in Gemini API.");return{}}(r,n)),n}(this.apiClient,e);return r=h("{model}:batchGenerateContent",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>ef(e))}}async get(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],eu(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("batchPredictionJobs/{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>em(e))}{let t=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],eu(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("batches/{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>ef(e))}}async cancel(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],eu(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);r=h("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal})}else{let t=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],eu(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);r=h("batches/{name}:cancel",t._url),o=t._query,delete t.config,delete t._url,delete t._query,await this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal})}}async listInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e){let t={},n=g(e,["config"]);return null!=n&&m(t,["config"],function(e,t){let n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);let l=g(e,["pageToken"]);void 0!==t&&null!=l&&m(t,["_query","pageToken"],l);let i=g(e,["filter"]);return void 0!==t&&null!=i&&m(t,["_query","filter"],i),{}}(n,t)),t}(e);return r=h("batchPredictionJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["batchPredictionJobs"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>em(e))),m(t,["batchJobs"],e)}return t}(e),n=new P;return Object.assign(n,t),n})}{let t=function(e){let t={},n=g(e,["config"]);return null!=n&&m(t,["config"],function(e,t){let n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);let l=g(e,["pageToken"]);if(void 0!==t&&null!=l&&m(t,["_query","pageToken"],l),void 0!==g(e,["filter"]))throw Error("filter parameter is not supported in Gemini API.");return{}}(n,t)),t}(e);return r=h("batches",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["operations"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>ef(e))),m(t,["batchJobs"],e)}return t}(e),n=new P;return Object.assign(n,t),n})}}async delete(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],eu(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("batchPredictionJobs/{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>(function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["done"]);null!=l&&m(t,["done"],l);let i=g(e,["error"]);return null!=i&&m(t,["error"],eh(i)),t})(e))}{let t=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],eu(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("batches/{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>(function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["done"]);null!=l&&m(t,["done"],l);let i=g(e,["error"]);return null!=i&&m(t,["error"],ed(i)),t})(e))}}}function ev(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}function e_(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["data"]);null!=l&&m(t,["data"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["fileUri"]);null!=l&&m(t,["fileUri"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}function eC(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["model"]);null!=i&&m(t,["model"],i);let r=g(e,["createTime"]);null!=r&&m(t,["createTime"],r);let o=g(e,["updateTime"]);null!=o&&m(t,["updateTime"],o);let a=g(e,["expireTime"]);null!=a&&m(t,["expireTime"],a);let u=g(e,["usageMetadata"]);return null!=u&&m(t,["usageMetadata"],u),t}function eE(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["model"]);null!=i&&m(t,["model"],i);let r=g(e,["createTime"]);null!=r&&m(t,["createTime"],r);let o=g(e,["updateTime"]);null!=o&&m(t,["updateTime"],o);let a=g(e,["expireTime"]);null!=a&&m(t,["expireTime"],a);let u=g(e,["usageMetadata"]);return null!=u&&m(t,["usageMetadata"],u),t}class eT extends f{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new eg(lF.PAGED_ITEM_CACHED_CONTENTS,e=>this.listInternal(e),await this.listInternal(e),e)}async create(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["model"],q(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);let l=g(e,["expireTime"]);void 0!==t&&null!=l&&m(t,["expireTime"],l);let i=g(e,["displayName"]);void 0!==t&&null!=i&&m(t,["displayName"],i);let r=g(e,["contents"]);if(void 0!==t&&null!=r){let e=K(r);Array.isArray(e)&&(e=e.map(e=>e_(e))),m(t,["contents"],e)}let o=g(e,["systemInstruction"]);void 0!==t&&null!=o&&m(t,["systemInstruction"],e_($(o)));let a=g(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==g(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=g(e,["description"]);null!=n&&m(t,["description"],n);let l=g(e,["name"]);null!=l&&m(t,["name"],l);let i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);let r=g(e,["parametersJsonSchema"]);null!=r&&m(t,["parametersJsonSchema"],r);let o=g(e,["response"]);null!=o&&m(t,["response"],o);let a=g(e,["responseJsonSchema"]);return null!=a&&m(t,["responseJsonSchema"],a),t})(e))),m(t,["functionDeclarations"],e)}let l=g(e,["retrieval"]);null!=l&&m(t,["retrieval"],l);let i=g(e,["googleSearch"]);null!=i&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(i));let r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(r)),null!=g(e,["enterpriseWebSearch"])&&m(t,["enterpriseWebSearch"],{});let o=g(e,["googleMaps"]);null!=o&&m(t,["googleMaps"],function(e){let t={},n=g(e,["authConfig"]);return null!=n&&m(t,["authConfig"],function(e){let t={},n=g(e,["apiKeyConfig"]);null!=n&&m(t,["apiKeyConfig"],function(e){let t={},n=g(e,["apiKeyString"]);return null!=n&&m(t,["apiKeyString"],n),t}(n));let l=g(e,["authType"]);null!=l&&m(t,["authType"],l);let i=g(e,["googleServiceAccountConfig"]);null!=i&&m(t,["googleServiceAccountConfig"],i);let r=g(e,["httpBasicAuthConfig"]);null!=r&&m(t,["httpBasicAuthConfig"],r);let o=g(e,["oauthConfig"]);null!=o&&m(t,["oauthConfig"],o);let a=g(e,["oidcConfig"]);return null!=a&&m(t,["oidcConfig"],a),t}(n)),t}(o)),null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let a=g(e,["codeExecution"]);null!=a&&m(t,["codeExecution"],a);let u=g(e,["computerUse"]);return null!=u&&m(t,["computerUse"],u),t})(e))),m(t,["tools"],e)}let u=g(e,["toolConfig"]);void 0!==t&&null!=u&&m(t,["toolConfig"],function(e){let t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["allowedFunctionNames"]);return null!=l&&m(t,["allowedFunctionNames"],l),t}(n));let l=g(e,["retrievalConfig"]);return null!=l&&m(t,["retrievalConfig"],function(e){let t={},n=g(e,["latLng"]);null!=n&&m(t,["latLng"],function(e){let t={},n=g(e,["latitude"]);null!=n&&m(t,["latitude"],n);let l=g(e,["longitude"]);return null!=l&&m(t,["longitude"],l),t}(n));let l=g(e,["languageCode"]);return null!=l&&m(t,["languageCode"],l),t}(l)),t}(u));let s=g(e,["kmsKeyName"]);return void 0!==t&&null!=s&&m(t,["encryption_spec","kmsKeyName"],s),{}}(i,n)),n}(this.apiClient,e);return r=h("cachedContents",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>eE(e))}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["model"],q(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);let l=g(e,["expireTime"]);void 0!==t&&null!=l&&m(t,["expireTime"],l);let i=g(e,["displayName"]);void 0!==t&&null!=i&&m(t,["displayName"],i);let r=g(e,["contents"]);if(void 0!==t&&null!=r){let e=K(r);Array.isArray(e)&&(e=e.map(e=>ev(e))),m(t,["contents"],e)}let o=g(e,["systemInstruction"]);void 0!==t&&null!=o&&m(t,["systemInstruction"],ev($(o)));let a=g(e,["tools"]);if(void 0!==t&&null!=a){let e=a;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["behavior"]);null!=n&&m(t,["behavior"],n);let l=g(e,["description"]);null!=l&&m(t,["description"],l);let i=g(e,["name"]);null!=i&&m(t,["name"],i);let r=g(e,["parameters"]);null!=r&&m(t,["parameters"],r);let o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);let a=g(e,["response"]);null!=a&&m(t,["response"],a);let u=g(e,["responseJsonSchema"]);return null!=u&&m(t,["responseJsonSchema"],u),t})(e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(l));let i=g(e,["googleSearchRetrieval"]);if(null!=i&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(i)),void 0!==g(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==g(e,["googleMaps"]))throw Error("googleMaps parameter is not supported in Gemini API.");null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let r=g(e,["codeExecution"]);null!=r&&m(t,["codeExecution"],r);let o=g(e,["computerUse"]);return null!=o&&m(t,["computerUse"],o),t})(e))),m(t,["tools"],e)}let u=g(e,["toolConfig"]);if(void 0!==t&&null!=u&&m(t,["toolConfig"],function(e){let t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["allowedFunctionNames"]);return null!=l&&m(t,["allowedFunctionNames"],l),t}(n));let l=g(e,["retrievalConfig"]);return null!=l&&m(t,["retrievalConfig"],function(e){let t={},n=g(e,["latLng"]);null!=n&&m(t,["latLng"],function(e){let t={},n=g(e,["latitude"]);null!=n&&m(t,["latitude"],n);let l=g(e,["longitude"]);return null!=l&&m(t,["longitude"],l),t}(n));let l=g(e,["languageCode"]);return null!=l&&m(t,["languageCode"],l),t}(l)),t}(u)),void 0!==g(e,["kmsKeyName"]))throw Error("kmsKeyName parameter is not supported in Gemini API.");return{}}(i,n)),n}(this.apiClient,e);return r=h("cachedContents",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>eC(e))}}async get(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],et(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>eE(e))}{let t=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],et(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>eC(e))}}async delete(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],et(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(()=>{let e=new x;return Object.assign(e,{}),e})}{let t=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],et(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(()=>{let e=new x;return Object.assign(e,{}),e})}}async update(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],et(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);let l=g(e,["expireTime"]);return void 0!==t&&null!=l&&m(t,["expireTime"],l),{}}(i,n)),n}(this.apiClient,e);return r=h("{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>eE(e))}{let t=function(e,t){let n={},l=g(t,["name"]);null!=l&&m(n,["_url","name"],et(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["ttl"]);void 0!==t&&null!=n&&m(t,["ttl"],n);let l=g(e,["expireTime"]);return void 0!==t&&null!=l&&m(t,["expireTime"],l),{}}(i,n)),n}(this.apiClient,e);return r=h("{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>eC(e))}}async listInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e){let t={},n=g(e,["config"]);return null!=n&&m(t,["config"],function(e,t){let n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);let l=g(e,["pageToken"]);return void 0!==t&&null!=l&&m(t,["_query","pageToken"],l),{}}(n,t)),t}(e);return r=h("cachedContents",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["cachedContents"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>eE(e))),m(t,["cachedContents"],e)}return t}(e),n=new w;return Object.assign(n,t),n})}{let t=function(e){let t={},n=g(e,["config"]);return null!=n&&m(t,["config"],function(e,t){let n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);let l=g(e,["pageToken"]);return void 0!==t&&null!=l&&m(t,["_query","pageToken"],l),{}}(n,t)),t}(e);return r=h("cachedContents",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["cachedContents"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>eC(e))),m(t,["cachedContents"],e)}return t}(e),n=new w;return Object.assign(n,t),n})}}}function eA(e){return this instanceof eA?(this.v=e,this):new eA(e)}function eS(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var l,i=n.apply(e,t||[]),r=[];return l=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",function(e){return function(t){return Promise.resolve(t).then(e,s)}}),l[Symbol.asyncIterator]=function(){return this},l;function o(e,t){i[e]&&(l[e]=function(t){return new Promise(function(n,l){r.push([e,t,n,l])>1||a(e,t)})},t&&(l[e]=t(l[e])))}function a(e,t){try{var n;(n=i[e](t)).value instanceof eA?Promise.resolve(n.value.v).then(u,s):c(r[0][2],n)}catch(e){c(r[0][3],e)}}function u(e){a("next",e)}function s(e){a("throw",e)}function c(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}}function eb(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],l=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&l>=e.length&&(e=void 0),{value:e&&e[l++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},l("next"),l("throw"),l("return"),t[Symbol.asyncIterator]=function(){return this},t);function l(n){t[n]=e[n]&&function(t){return new Promise(function(l,i){var r,o,a;r=l,o=i,a=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){r({value:e,done:a})},o)})}}}function eO(e){if(void 0===e.parts||0===e.parts.length)return!1;for(let t of e.parts)if(void 0===t||0===Object.keys(t).length||!t.thought&&void 0!==t.text&&""===t.text)return!1;return!0}function eI(e){if(void 0===e||0===e.length)return[];let t=[],n=e.length,l=0;for(;l<n;)if("user"===e[l].role)t.push(e[l]),l++;else{let i=[],r=!0;for(;l<n&&"model"===e[l].role;)i.push(e[l]),r&&!eO(e[l])&&(r=!1),l++;r?t.push(...i):t.pop()}return t}"function"==typeof SuppressedError&&SuppressedError;class ex{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ew(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ew{constructor(e,t,n,l={},i=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=l,this.history=i,this.sendPromise=Promise.resolve();if(0!==i.length){for(let e of i)if("user"!==e.role&&"model"!==e.role)throw Error(`Role must be user or model, but got ${e.role}.`)}}async sendMessage(e){var t;await this.sendPromise;let n=$(e.message),l=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:null!=(t=e.config)?t:this.config});return this.sendPromise=(async()=>{var e,t,i;let r=await l,o=null==(t=null==(e=r.candidates)?void 0:e[0])?void 0:t.content,a=r.automaticFunctionCallingHistory,u=this.getHistory(!0).length,s=[];null!=a&&(s=null!=(i=a.slice(u))?i:[]),this.recordHistory(n,o?[o]:[],s)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),l}async sendMessageStream(e){var t;await this.sendPromise;let n=$(e.message),l=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:null!=(t=e.config)?t:this.config});this.sendPromise=l.then(()=>void 0).catch(()=>void 0);let i=await l;return this.processStreamResponse(i,n)}getHistory(e=!1){return structuredClone(e?eI(this.history):this.history)}processStreamResponse(e,t){var n,l;return eS(this,arguments,function*(){var i,r,o,a;let u=[];try{for(var s,c=!0,p=eb(e);!(i=(s=yield eA(p.next())).done);c=!0){if(a=s.value,c=!1,function(e){var t;if(void 0==e.candidates||0===e.candidates.length)return!1;let n=null==(t=e.candidates[0])?void 0:t.content;return void 0!==n&&eO(n)}(a)){let e=null==(l=null==(n=a.candidates)?void 0:n[0])?void 0:l.content;void 0!==e&&u.push(e)}yield yield eA(a)}}catch(e){r={error:e}}finally{try{!c&&!i&&(o=p.return)&&(yield eA(o.call(p)))}finally{if(r)throw r.error}}this.recordHistory(t,u)})}recordHistory(e,t,n){let l=[];t.length>0&&t.every(e=>void 0!==e.role)?l=t:l.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...eI(n)):this.history.push(e),this.history.push(...l)}}class eN extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,eN.prototype)}}function eM(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["mimeType"]);null!=i&&m(t,["mimeType"],i);let r=g(e,["sizeBytes"]);null!=r&&m(t,["sizeBytes"],r);let o=g(e,["createTime"]);null!=o&&m(t,["createTime"],o);let a=g(e,["expirationTime"]);null!=a&&m(t,["expirationTime"],a);let u=g(e,["updateTime"]);null!=u&&m(t,["updateTime"],u);let s=g(e,["sha256Hash"]);null!=s&&m(t,["sha256Hash"],s);let c=g(e,["uri"]);null!=c&&m(t,["uri"],c);let p=g(e,["downloadUri"]);null!=p&&m(t,["downloadUri"],p);let d=g(e,["state"]);null!=d&&m(t,["state"],d);let f=g(e,["source"]);null!=f&&m(t,["source"],f);let h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);let y=g(e,["error"]);return null!=y&&m(t,["error"],function(e){let t={},n=g(e,["details"]);null!=n&&m(t,["details"],n);let l=g(e,["message"]);null!=l&&m(t,["message"],l);let i=g(e,["code"]);return null!=i&&m(t,["code"],i),t}(y)),t}class eR extends f{constructor(e){super(),this.apiClient=e,this.list=async(e={})=>new eg(lF.PAGED_ITEM_FILES,e=>this.listInternal(e),await this.listInternal(e),e)}async upload(e){if(this.apiClient.isVertexAI())throw Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(e=>eM(e))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let r=function(e){let t={},n=g(e,["config"]);return null!=n&&m(t,["config"],function(e,t){let n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);let l=g(e,["pageToken"]);return void 0!==t&&null!=l&&m(t,["_query","pageToken"],l),{}}(n,t)),t}(e);return l=h("files",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["files"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>eM(e))),m(t,["files"],e)}return t}(e),n=new N;return Object.assign(n,t),n})}}async createInternal(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let r=function(e){let t={},n=g(e,["file"]);null!=n&&m(t,["file"],function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["mimeType"]);null!=i&&m(t,["mimeType"],i);let r=g(e,["sizeBytes"]);null!=r&&m(t,["sizeBytes"],r);let o=g(e,["createTime"]);null!=o&&m(t,["createTime"],o);let a=g(e,["expirationTime"]);null!=a&&m(t,["expirationTime"],a);let u=g(e,["updateTime"]);null!=u&&m(t,["updateTime"],u);let s=g(e,["sha256Hash"]);null!=s&&m(t,["sha256Hash"],s);let c=g(e,["uri"]);null!=c&&m(t,["uri"],c);let p=g(e,["downloadUri"]);null!=p&&m(t,["downloadUri"],p);let d=g(e,["state"]);null!=d&&m(t,["state"],d);let f=g(e,["source"]);null!=f&&m(t,["source"],f);let h=g(e,["videoMetadata"]);null!=h&&m(t,["videoMetadata"],h);let y=g(e,["error"]);return null!=y&&m(t,["error"],function(e){let t={},n=g(e,["details"]);null!=n&&m(t,["details"],n);let l=g(e,["message"]);null!=l&&m(t,["message"],l);let i=g(e,["code"]);return null!=i&&m(t,["code"],i),t}(y)),t}(n));let l=g(e,["config"]);return null!=l&&m(t,["config"],l),t}(e);return l=h("upload/v1beta/files",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["sdkHttpResponse"]);return null!=n&&m(t,["sdkHttpResponse"],n),t}(e),n=new M;return Object.assign(n,t),n})}}async get(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let r=function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["_url","file"],ei(n));let l=g(e,["config"]);return null!=l&&m(t,["config"],l),t}(e);return l=h("files/{file}",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>eM(e))}}async delete(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let r=function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["_url","file"],ei(n));let l=g(e,["config"]);return null!=l&&m(t,["config"],l),t}(e);return l=h("files/{file}",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(()=>{let e=new R;return Object.assign(e,{}),e})}}}function eP(e){let t={},n=g(e,["prebuiltVoiceConfig"]);return null!=n&&m(t,["prebuiltVoiceConfig"],function(e){let t={},n=g(e,["voiceName"]);return null!=n&&m(t,["voiceName"],n),t}(n)),t}function eD(e){let t={},n=g(e,["text"]);null!=n&&m(t,["text"],n);let l=g(e,["weight"]);return null!=l&&m(t,["weight"],l),t}function ek(e){let t={},n=g(e,["temperature"]);null!=n&&m(t,["temperature"],n);let l=g(e,["topK"]);null!=l&&m(t,["topK"],l);let i=g(e,["seed"]);null!=i&&m(t,["seed"],i);let r=g(e,["guidance"]);null!=r&&m(t,["guidance"],r);let o=g(e,["bpm"]);null!=o&&m(t,["bpm"],o);let a=g(e,["density"]);null!=a&&m(t,["density"],a);let u=g(e,["brightness"]);null!=u&&m(t,["brightness"],u);let s=g(e,["scale"]);null!=s&&m(t,["scale"],s);let c=g(e,["muteBass"]);null!=c&&m(t,["muteBass"],c);let p=g(e,["muteDrums"]);null!=p&&m(t,["muteDrums"],p);let d=g(e,["onlyBassAndDrums"]);return null!=d&&m(t,["onlyBassAndDrums"],d),t}function eU(e){let t={},n=g(e,["model"]);return null!=n&&m(t,["model"],n),t}function eq(e){let t={},n=g(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>eD(e))),m(t,["weightedPrompts"],e)}return t}function eL(e){let t={},n=g(e,["setup"]);null!=n&&m(t,["setup"],eU(n));let l=g(e,["clientContent"]);null!=l&&m(t,["clientContent"],eq(l));let i=g(e,["musicGenerationConfig"]);null!=i&&m(t,["musicGenerationConfig"],ek(i));let r=g(e,["playbackControl"]);return null!=r&&m(t,["playbackControl"],r),t}function eG(e){let t={},n=g(e,["text"]);null!=n&&m(t,["text"],n);let l=g(e,["finished"]);return null!=l&&m(t,["finished"],l),t}function eF(e){let t={},n=g(e,["modality"]);null!=n&&m(t,["modality"],n);let l=g(e,["tokenCount"]);return null!=l&&m(t,["tokenCount"],l),t}function ej(e){let t={},n=g(e,["text"]);null!=n&&m(t,["text"],n);let l=g(e,["finished"]);return null!=l&&m(t,["finished"],l),t}function eB(e){let t={},n=g(e,["modality"]);null!=n&&m(t,["modality"],n);let l=g(e,["tokenCount"]);return null!=l&&m(t,["tokenCount"],l),t}function eV(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}function eJ(e){let t={},n=g(e,["prebuiltVoiceConfig"]);return null!=n&&m(t,["prebuiltVoiceConfig"],function(e){let t={},n=g(e,["voiceName"]);return null!=n&&m(t,["voiceName"],n),t}(n)),t}function eH(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["contents"]);if(null!=i){let e=K(i);Array.isArray(e)&&(e=e.map(e=>eV(e))),m(n,["contents"],e)}let r=g(t,["config"]);return null!=r&&m(n,["generationConfig"],function(e,t,n){let l={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],eV($(i)));let r=g(t,["temperature"]);null!=r&&m(l,["temperature"],r);let o=g(t,["topP"]);null!=o&&m(l,["topP"],o);let a=g(t,["topK"]);null!=a&&m(l,["topK"],a);let u=g(t,["candidateCount"]);null!=u&&m(l,["candidateCount"],u);let s=g(t,["maxOutputTokens"]);null!=s&&m(l,["maxOutputTokens"],s);let c=g(t,["stopSequences"]);null!=c&&m(l,["stopSequences"],c);let p=g(t,["responseLogprobs"]);null!=p&&m(l,["responseLogprobs"],p);let d=g(t,["logprobs"]);null!=d&&m(l,["logprobs"],d);let f=g(t,["presencePenalty"]);null!=f&&m(l,["presencePenalty"],f);let h=g(t,["frequencyPenalty"]);null!=h&&m(l,["frequencyPenalty"],h);let y=g(t,["seed"]);null!=y&&m(l,["seed"],y);let v=g(t,["responseMimeType"]);null!=v&&m(l,["responseMimeType"],v);let _=g(t,["responseSchema"]);null!=_&&m(l,["responseSchema"],function(e){let t={},n=g(e,["anyOf"]);null!=n&&m(t,["anyOf"],n);let l=g(e,["default"]);null!=l&&m(t,["default"],l);let i=g(e,["description"]);null!=i&&m(t,["description"],i);let r=g(e,["enum"]);null!=r&&m(t,["enum"],r);let o=g(e,["example"]);null!=o&&m(t,["example"],o);let a=g(e,["format"]);null!=a&&m(t,["format"],a);let u=g(e,["items"]);null!=u&&m(t,["items"],u);let s=g(e,["maxItems"]);null!=s&&m(t,["maxItems"],s);let c=g(e,["maxLength"]);null!=c&&m(t,["maxLength"],c);let p=g(e,["maxProperties"]);null!=p&&m(t,["maxProperties"],p);let d=g(e,["maximum"]);null!=d&&m(t,["maximum"],d);let f=g(e,["minItems"]);null!=f&&m(t,["minItems"],f);let h=g(e,["minLength"]);null!=h&&m(t,["minLength"],h);let y=g(e,["minProperties"]);null!=y&&m(t,["minProperties"],y);let v=g(e,["minimum"]);null!=v&&m(t,["minimum"],v);let _=g(e,["nullable"]);null!=_&&m(t,["nullable"],_);let C=g(e,["pattern"]);null!=C&&m(t,["pattern"],C);let E=g(e,["properties"]);null!=E&&m(t,["properties"],E);let T=g(e,["propertyOrdering"]);null!=T&&m(t,["propertyOrdering"],T);let A=g(e,["required"]);null!=A&&m(t,["required"],A);let S=g(e,["title"]);null!=S&&m(t,["title"],S);let b=g(e,["type"]);return null!=b&&m(t,["type"],b),t}(z(_)));let C=g(t,["responseJsonSchema"]);if(null!=C&&m(l,["responseJsonSchema"],C),void 0!==g(t,["routingConfig"]))throw Error("routingConfig parameter is not supported in Gemini API.");if(void 0!==g(t,["modelSelectionConfig"]))throw Error("modelSelectionConfig parameter is not supported in Gemini API.");let E=g(t,["safetySettings"]);if(void 0!==n&&null!=E){let e=E;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==g(e,["method"]))throw Error("method parameter is not supported in Gemini API.");let n=g(e,["category"]);null!=n&&m(t,["category"],n);let l=g(e,["threshold"]);return null!=l&&m(t,["threshold"],l),t})(e))),m(n,["safetySettings"],e)}let T=g(t,["tools"]);if(void 0!==n&&null!=T){let e=ee(T);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["behavior"]);null!=n&&m(t,["behavior"],n);let l=g(e,["description"]);null!=l&&m(t,["description"],l);let i=g(e,["name"]);null!=i&&m(t,["name"],i);let r=g(e,["parameters"]);null!=r&&m(t,["parameters"],r);let o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);let a=g(e,["response"]);null!=a&&m(t,["response"],a);let u=g(e,["responseJsonSchema"]);return null!=u&&m(t,["responseJsonSchema"],u),t})(e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(l));let i=g(e,["googleSearchRetrieval"]);if(null!=i&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(i)),void 0!==g(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==g(e,["googleMaps"]))throw Error("googleMaps parameter is not supported in Gemini API.");null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let r=g(e,["codeExecution"]);null!=r&&m(t,["codeExecution"],r);let o=g(e,["computerUse"]);return null!=o&&m(t,["computerUse"],o),t})(Z(e)))),m(n,["tools"],e)}let A=g(t,["toolConfig"]);if(void 0!==n&&null!=A&&m(n,["toolConfig"],function(e){let t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["allowedFunctionNames"]);return null!=l&&m(t,["allowedFunctionNames"],l),t}(n));let l=g(e,["retrievalConfig"]);return null!=l&&m(t,["retrievalConfig"],function(e){let t={},n=g(e,["latLng"]);null!=n&&m(t,["latLng"],function(e){let t={},n=g(e,["latitude"]);null!=n&&m(t,["latitude"],n);let l=g(e,["longitude"]);return null!=l&&m(t,["longitude"],l),t}(n));let l=g(e,["languageCode"]);return null!=l&&m(t,["languageCode"],l),t}(l)),t}(A)),void 0!==g(t,["labels"]))throw Error("labels parameter is not supported in Gemini API.");let S=g(t,["cachedContent"]);void 0!==n&&null!=S&&m(n,["cachedContent"],et(e,S));let b=g(t,["responseModalities"]);null!=b&&m(l,["responseModalities"],b);let O=g(t,["mediaResolution"]);null!=O&&m(l,["mediaResolution"],O);let I=g(t,["speechConfig"]);if(null!=I&&m(l,["speechConfig"],function(e){let t={},n=g(e,["voiceConfig"]);null!=n&&m(t,["voiceConfig"],eJ(n));let l=g(e,["multiSpeakerVoiceConfig"]);null!=l&&m(t,["multiSpeakerVoiceConfig"],function(e){let t={},n=g(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["speaker"]);null!=n&&m(t,["speaker"],n);let l=g(e,["voiceConfig"]);return null!=l&&m(t,["voiceConfig"],eJ(l)),t})(e))),m(t,["speakerVoiceConfigs"],e)}return t}(l));let i=g(e,["languageCode"]);return null!=i&&m(t,["languageCode"],i),t}(X(I))),void 0!==g(t,["audioTimestamp"]))throw Error("audioTimestamp parameter is not supported in Gemini API.");let x=g(t,["thinkingConfig"]);return null!=x&&m(l,["thinkingConfig"],function(e){let t={},n=g(e,["includeThoughts"]);null!=n&&m(t,["includeThoughts"],n);let l=g(e,["thinkingBudget"]);return null!=l&&m(t,["thinkingBudget"],l),t}(x)),l}(e,r,n)),n}function eY(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["data"]);null!=l&&m(t,["data"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["fileUri"]);null!=l&&m(t,["fileUri"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}function e$(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==g(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=g(e,["description"]);null!=n&&m(t,["description"],n);let l=g(e,["name"]);null!=l&&m(t,["name"],l);let i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);let r=g(e,["parametersJsonSchema"]);null!=r&&m(t,["parametersJsonSchema"],r);let o=g(e,["response"]);null!=o&&m(t,["response"],o);let a=g(e,["responseJsonSchema"]);return null!=a&&m(t,["responseJsonSchema"],a),t})(e))),m(t,["functionDeclarations"],e)}let l=g(e,["retrieval"]);null!=l&&m(t,["retrieval"],l);let i=g(e,["googleSearch"]);null!=i&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(i));let r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(r)),null!=g(e,["enterpriseWebSearch"])&&m(t,["enterpriseWebSearch"],{});let o=g(e,["googleMaps"]);null!=o&&m(t,["googleMaps"],function(e){let t={},n=g(e,["authConfig"]);return null!=n&&m(t,["authConfig"],function(e){let t={},n=g(e,["apiKeyConfig"]);null!=n&&m(t,["apiKeyConfig"],function(e){let t={},n=g(e,["apiKeyString"]);return null!=n&&m(t,["apiKeyString"],n),t}(n));let l=g(e,["authType"]);null!=l&&m(t,["authType"],l);let i=g(e,["googleServiceAccountConfig"]);null!=i&&m(t,["googleServiceAccountConfig"],i);let r=g(e,["httpBasicAuthConfig"]);null!=r&&m(t,["httpBasicAuthConfig"],r);let o=g(e,["oauthConfig"]);null!=o&&m(t,["oauthConfig"],o);let a=g(e,["oidcConfig"]);return null!=a&&m(t,["oidcConfig"],a),t}(n)),t}(o)),null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let a=g(e,["codeExecution"]);null!=a&&m(t,["codeExecution"],a);let u=g(e,["computerUse"]);return null!=u&&m(t,["computerUse"],u),t}function eW(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["contents"]);if(null!=i){let e=K(i);Array.isArray(e)&&(e=e.map(e=>eY(e))),m(n,["contents"],e)}let r=g(t,["config"]);return null!=r&&m(n,["generationConfig"],function(e,t,n){let l={},i=g(t,["systemInstruction"]);void 0!==n&&null!=i&&m(n,["systemInstruction"],eY($(i)));let r=g(t,["temperature"]);null!=r&&m(l,["temperature"],r);let o=g(t,["topP"]);null!=o&&m(l,["topP"],o);let a=g(t,["topK"]);null!=a&&m(l,["topK"],a);let u=g(t,["candidateCount"]);null!=u&&m(l,["candidateCount"],u);let s=g(t,["maxOutputTokens"]);null!=s&&m(l,["maxOutputTokens"],s);let c=g(t,["stopSequences"]);null!=c&&m(l,["stopSequences"],c);let p=g(t,["responseLogprobs"]);null!=p&&m(l,["responseLogprobs"],p);let d=g(t,["logprobs"]);null!=d&&m(l,["logprobs"],d);let f=g(t,["presencePenalty"]);null!=f&&m(l,["presencePenalty"],f);let h=g(t,["frequencyPenalty"]);null!=h&&m(l,["frequencyPenalty"],h);let y=g(t,["seed"]);null!=y&&m(l,["seed"],y);let v=g(t,["responseMimeType"]);null!=v&&m(l,["responseMimeType"],v);let _=g(t,["responseSchema"]);null!=_&&m(l,["responseSchema"],function(e){let t={},n=g(e,["anyOf"]);null!=n&&m(t,["anyOf"],n);let l=g(e,["default"]);null!=l&&m(t,["default"],l);let i=g(e,["description"]);null!=i&&m(t,["description"],i);let r=g(e,["enum"]);null!=r&&m(t,["enum"],r);let o=g(e,["example"]);null!=o&&m(t,["example"],o);let a=g(e,["format"]);null!=a&&m(t,["format"],a);let u=g(e,["items"]);null!=u&&m(t,["items"],u);let s=g(e,["maxItems"]);null!=s&&m(t,["maxItems"],s);let c=g(e,["maxLength"]);null!=c&&m(t,["maxLength"],c);let p=g(e,["maxProperties"]);null!=p&&m(t,["maxProperties"],p);let d=g(e,["maximum"]);null!=d&&m(t,["maximum"],d);let f=g(e,["minItems"]);null!=f&&m(t,["minItems"],f);let h=g(e,["minLength"]);null!=h&&m(t,["minLength"],h);let y=g(e,["minProperties"]);null!=y&&m(t,["minProperties"],y);let v=g(e,["minimum"]);null!=v&&m(t,["minimum"],v);let _=g(e,["nullable"]);null!=_&&m(t,["nullable"],_);let C=g(e,["pattern"]);null!=C&&m(t,["pattern"],C);let E=g(e,["properties"]);null!=E&&m(t,["properties"],E);let T=g(e,["propertyOrdering"]);null!=T&&m(t,["propertyOrdering"],T);let A=g(e,["required"]);null!=A&&m(t,["required"],A);let S=g(e,["title"]);null!=S&&m(t,["title"],S);let b=g(e,["type"]);return null!=b&&m(t,["type"],b),t}(z(_)));let C=g(t,["responseJsonSchema"]);null!=C&&m(l,["responseJsonSchema"],C);let E=g(t,["routingConfig"]);null!=E&&m(l,["routingConfig"],E);let T=g(t,["modelSelectionConfig"]);null!=T&&m(l,["modelConfig"],function(e){let t={},n=g(e,["featureSelectionPreference"]);return null!=n&&m(t,["featureSelectionPreference"],n),t}(T));let A=g(t,["safetySettings"]);if(void 0!==n&&null!=A){let e=A;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["method"]);null!=n&&m(t,["method"],n);let l=g(e,["category"]);null!=l&&m(t,["category"],l);let i=g(e,["threshold"]);return null!=i&&m(t,["threshold"],i),t})(e))),m(n,["safetySettings"],e)}let S=g(t,["tools"]);if(void 0!==n&&null!=S){let e=ee(S);Array.isArray(e)&&(e=e.map(e=>e$(Z(e)))),m(n,["tools"],e)}let b=g(t,["toolConfig"]);void 0!==n&&null!=b&&m(n,["toolConfig"],function(e){let t={},n=g(e,["functionCallingConfig"]);null!=n&&m(t,["functionCallingConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["allowedFunctionNames"]);return null!=l&&m(t,["allowedFunctionNames"],l),t}(n));let l=g(e,["retrievalConfig"]);return null!=l&&m(t,["retrievalConfig"],function(e){let t={},n=g(e,["latLng"]);null!=n&&m(t,["latLng"],function(e){let t={},n=g(e,["latitude"]);null!=n&&m(t,["latitude"],n);let l=g(e,["longitude"]);return null!=l&&m(t,["longitude"],l),t}(n));let l=g(e,["languageCode"]);return null!=l&&m(t,["languageCode"],l),t}(l)),t}(b));let O=g(t,["labels"]);void 0!==n&&null!=O&&m(n,["labels"],O);let I=g(t,["cachedContent"]);void 0!==n&&null!=I&&m(n,["cachedContent"],et(e,I));let x=g(t,["responseModalities"]);null!=x&&m(l,["responseModalities"],x);let w=g(t,["mediaResolution"]);null!=w&&m(l,["mediaResolution"],w);let N=g(t,["speechConfig"]);null!=N&&m(l,["speechConfig"],function(e){let t={},n=g(e,["voiceConfig"]);if(null!=n&&m(t,["voiceConfig"],function(e){let t={},n=g(e,["prebuiltVoiceConfig"]);return null!=n&&m(t,["prebuiltVoiceConfig"],function(e){let t={},n=g(e,["voiceName"]);return null!=n&&m(t,["voiceName"],n),t}(n)),t}(n)),void 0!==g(e,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let l=g(e,["languageCode"]);return null!=l&&m(t,["languageCode"],l),t}(X(N)));let M=g(t,["audioTimestamp"]);null!=M&&m(l,["audioTimestamp"],M);let R=g(t,["thinkingConfig"]);return null!=R&&m(l,["thinkingConfig"],function(e){let t={},n=g(e,["includeThoughts"]);null!=n&&m(t,["includeThoughts"],n);let l=g(e,["thinkingBudget"]);return null!=l&&m(t,["thinkingBudget"],l),t}(R)),l}(e,r,n)),n}function eK(e){let t={},n=g(e,["gcsUri"]);null!=n&&m(t,["gcsUri"],n);let l=g(e,["imageBytes"]);null!=l&&m(t,["bytesBase64Encoded"],el(l));let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}function ez(e){let t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);let l=g(e,["candidates"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["content"]);null!=n&&m(t,["content"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}(n));let l=g(e,["citationMetadata"]);null!=l&&m(t,["citationMetadata"],function(e){let t={},n=g(e,["citationSources"]);return null!=n&&m(t,["citations"],n),t}(l));let i=g(e,["tokenCount"]);null!=i&&m(t,["tokenCount"],i);let r=g(e,["finishReason"]);null!=r&&m(t,["finishReason"],r);let o=g(e,["urlContextMetadata"]);null!=o&&m(t,["urlContextMetadata"],function(e){let t={},n=g(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["retrievedUrl"]);null!=n&&m(t,["retrievedUrl"],n);let l=g(e,["urlRetrievalStatus"]);return null!=l&&m(t,["urlRetrievalStatus"],l),t})(e))),m(t,["urlMetadata"],e)}return t}(o));let a=g(e,["avgLogprobs"]);null!=a&&m(t,["avgLogprobs"],a);let u=g(e,["groundingMetadata"]);null!=u&&m(t,["groundingMetadata"],u);let s=g(e,["index"]);null!=s&&m(t,["index"],s);let c=g(e,["logprobsResult"]);null!=c&&m(t,["logprobsResult"],c);let p=g(e,["safetyRatings"]);return null!=p&&m(t,["safetyRatings"],p),t})(e))),m(t,["candidates"],e)}let i=g(e,["modelVersion"]);null!=i&&m(t,["modelVersion"],i);let r=g(e,["promptFeedback"]);null!=r&&m(t,["promptFeedback"],r);let o=g(e,["usageMetadata"]);return null!=o&&m(t,["usageMetadata"],o),t}function eX(e){let t={},n=g(e,["safetyAttributes","categories"]);null!=n&&m(t,["categories"],n);let l=g(e,["safetyAttributes","scores"]);null!=l&&m(t,["scores"],l);let i=g(e,["contentType"]);return null!=i&&m(t,["contentType"],i),t}function eQ(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["description"]);null!=i&&m(t,["description"],i);let r=g(e,["version"]);null!=r&&m(t,["version"],r);let o=g(e,["_self"]);null!=o&&m(t,["tunedModelInfo"],function(e){let t={},n=g(e,["baseModel"]);null!=n&&m(t,["baseModel"],n);let l=g(e,["createTime"]);null!=l&&m(t,["createTime"],l);let i=g(e,["updateTime"]);return null!=i&&m(t,["updateTime"],i),t}(o));let a=g(e,["inputTokenLimit"]);null!=a&&m(t,["inputTokenLimit"],a);let u=g(e,["outputTokenLimit"]);null!=u&&m(t,["outputTokenLimit"],u);let s=g(e,["supportedGenerationMethods"]);return null!=s&&m(t,["supportedActions"],s),t}function eZ(e){let t={},n=g(e,["sdkHttpResponse"]);null!=n&&m(t,["sdkHttpResponse"],n);let l=g(e,["candidates"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["content"]);null!=n&&m(t,["content"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["data"]);null!=l&&m(t,["data"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["fileUri"]);null!=l&&m(t,["fileUri"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}(n));let l=g(e,["citationMetadata"]);null!=l&&m(t,["citationMetadata"],function(e){let t={},n=g(e,["citations"]);return null!=n&&m(t,["citations"],n),t}(l));let i=g(e,["finishMessage"]);null!=i&&m(t,["finishMessage"],i);let r=g(e,["finishReason"]);null!=r&&m(t,["finishReason"],r);let o=g(e,["urlContextMetadata"]);null!=o&&m(t,["urlContextMetadata"],function(e){let t={},n=g(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["retrievedUrl"]);null!=n&&m(t,["retrievedUrl"],n);let l=g(e,["urlRetrievalStatus"]);return null!=l&&m(t,["urlRetrievalStatus"],l),t})(e))),m(t,["urlMetadata"],e)}return t}(o));let a=g(e,["avgLogprobs"]);null!=a&&m(t,["avgLogprobs"],a);let u=g(e,["groundingMetadata"]);null!=u&&m(t,["groundingMetadata"],u);let s=g(e,["index"]);null!=s&&m(t,["index"],s);let c=g(e,["logprobsResult"]);null!=c&&m(t,["logprobsResult"],c);let p=g(e,["safetyRatings"]);return null!=p&&m(t,["safetyRatings"],p),t})(e))),m(t,["candidates"],e)}let i=g(e,["createTime"]);null!=i&&m(t,["createTime"],i);let r=g(e,["responseId"]);null!=r&&m(t,["responseId"],r);let o=g(e,["modelVersion"]);null!=o&&m(t,["modelVersion"],o);let a=g(e,["promptFeedback"]);null!=a&&m(t,["promptFeedback"],a);let u=g(e,["usageMetadata"]);return null!=u&&m(t,["usageMetadata"],u),t}function e0(e){let t={},n=g(e,["safetyAttributes","categories"]);null!=n&&m(t,["categories"],n);let l=g(e,["safetyAttributes","scores"]);null!=l&&m(t,["scores"],l);let i=g(e,["contentType"]);return null!=i&&m(t,["contentType"],i),t}function e1(e){let t={},n=g(e,["_self"]);null!=n&&m(t,["image"],function(e){let t={},n=g(e,["gcsUri"]);null!=n&&m(t,["gcsUri"],n);let l=g(e,["bytesBase64Encoded"]);null!=l&&m(t,["imageBytes"],el(l));let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(n));let l=g(e,["raiFilteredReason"]);null!=l&&m(t,["raiFilteredReason"],l);let i=g(e,["_self"]);null!=i&&m(t,["safetyAttributes"],e0(i));let r=g(e,["prompt"]);return null!=r&&m(t,["enhancedPrompt"],r),t}function e2(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["displayName"]);null!=l&&m(t,["displayName"],l);let i=g(e,["description"]);null!=i&&m(t,["description"],i);let r=g(e,["versionId"]);null!=r&&m(t,["version"],r);let o=g(e,["deployedModels"]);if(null!=o){let e=o;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["endpoint"]);null!=n&&m(t,["name"],n);let l=g(e,["deployedModelId"]);return null!=l&&m(t,["deployedModelId"],l),t})(e))),m(t,["endpoints"],e)}let a=g(e,["labels"]);null!=a&&m(t,["labels"],a);let u=g(e,["_self"]);null!=u&&m(t,["tunedModelInfo"],function(e){let t={},n=g(e,["labels","google-vertex-llm-tuning-base-model-id"]);null!=n&&m(t,["baseModel"],n);let l=g(e,["createTime"]);null!=l&&m(t,["createTime"],l);let i=g(e,["updateTime"]);return null!=i&&m(t,["updateTime"],i),t}(u));let s=g(e,["defaultCheckpointId"]);null!=s&&m(t,["defaultCheckpointId"],s);let c=g(e,["checkpoints"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["checkpointId"]);null!=n&&m(t,["checkpointId"],n);let l=g(e,["epoch"]);null!=l&&m(t,["epoch"],l);let i=g(e,["step"]);return null!=i&&m(t,["step"],i),t})(e))),m(t,["checkpoints"],e)}return t}const e5="x-goog-api-client",e3=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class e8{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let l={};this.clientOptions.vertexai?(l.apiVersion=null!=(t=this.clientOptions.apiVersion)?t:"v1beta1",l.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(l.apiVersion=null!=(n=this.clientOptions.apiVersion)?n:"v1beta",l.baseUrl="https://generativelanguage.googleapis.com/"),l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&"global"!==this.clientOptions.location?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return null!=(e=this.clientOptions.vertexai)&&e}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.apiVersion)return this.clientOptions.httpOptions.apiVersion;throw Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.baseUrl)return this.clientOptions.httpOptions.baseUrl;throw Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&void 0!==this.clientOptions.httpOptions.headers)return this.clientOptions.httpOptions.headers;throw Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||void 0===e.baseUrl||void 0===e.apiVersion)throw Error("HTTP options are not correctly set.");let t=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&""!==e.apiVersion&&t.push(e.apiVersion),t.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=new URL(this.getBaseUrl());return e.protocol="http:"==e.protocol?"ws":"wss",e.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw Error("HTTP options are not correctly set.")}constructUrl(e,t,n){let l=[this.getRequestUrlInternal(t)];return n&&l.push(this.getBaseResourcePath()),""!==e&&l.push(e),new URL(`${l.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||"GET"===e.httpMethod&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,t,n);if(e.queryParams)for(let[t,n]of Object.entries(e.queryParams))l.searchParams.append(t,String(n));let i={};if("GET"===e.httpMethod){if(e.body&&"{}"!==e.body)throw Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.unaryApiCall(l,i,e.httpMethod)}patchHttpOptions(e,t){let n=JSON.parse(JSON.stringify(e));for(let[e,l]of Object.entries(t))"object"==typeof l?n[e]=Object.assign(Object.assign({},n[e]),l):void 0!==l&&(n[e]=l);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let n=this.shouldPrependVertexProjectPath(e),l=this.constructUrl(e.path,t,n);l.searchParams.has("alt")&&"sse"===l.searchParams.get("alt")||l.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,t,e.abortSignal),this.streamApiCall(l,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n){if(t&&t.timeout||n){let l=new AbortController,i=l.signal;if(t.timeout&&(null==t?void 0:t.timeout)>0){let e=setTimeout(()=>l.abort(),t.timeout);e&&"function"==typeof e.unref&&e.unref()}n&&n.addEventListener("abort",()=>{l.abort()}),e.signal=i}return t&&null!==t.extraBody&&function(e,t){if(!t||0===Object.keys(t).length)return;if(e.body instanceof Blob)return console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");let n={};if("string"==typeof e.body&&e.body.length>0)try{let t=JSON.parse(e.body);if("object"!=typeof t||null===t||Array.isArray(t))return void console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");n=t}catch(e){console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}e.body=JSON.stringify(function e(t,n){let l=Object.assign({},t);for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)){let i=n[t],r=l[t];i&&"object"==typeof i&&!Array.isArray(i)&&r&&"object"==typeof r&&!Array.isArray(r)?l[t]=e(r,i):(r&&i&&typeof r!=typeof i&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${t}". Original type: ${typeof r}, New type: ${typeof i}. Overwriting.`),l[t]=i)}return l}(n,t))}(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await e4(e),new y(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async e=>(await e4(e),this.processStreamResponse(e))).catch(e=>{if(e instanceof Error)throw e;throw Error(JSON.stringify(e))})}processStreamResponse(e){var t;return eS(this,arguments,function*(){let n=null==(t=null==e?void 0:e.body)?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!n)throw Error("Response body is empty");try{let t="";for(;;){let{done:i,value:r}=yield eA(n.read());if(i){if(t.trim().length>0)throw Error("Incomplete JSON segment at the end");break}let o=l.decode(r,{stream:!0});try{let e=JSON.parse(o);if("error"in e){let t=JSON.parse(JSON.stringify(e.error)),n=t.status,l=t.code,i=`got status: ${n}. ${JSON.stringify(e)}`;if(l>=400&&l<600)throw new eN({message:i,status:l})}}catch(e){if("ApiError"===e.name)throw e}let a=(t+=o).match(e3);for(;a;){let n=a[1];try{let l=new Response(n,{headers:null==e?void 0:e.headers,status:null==e?void 0:e.status,statusText:null==e?void 0:e.statusText});yield yield eA(new y(l)),a=(t=t.slice(a[0].length)).match(e3)}catch(e){throw Error(`exception parsing stream chunk ${n}. ${e}`)}}}}finally{n.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(e=>{throw Error(`exception ${e} sending request`)})}getDefaultHeaders(){let e={},t="google-genai-sdk/1.10.0 "+this.clientOptions.userAgentExtra;return e["User-Agent"]=t,e[e5]=t,e["Content-Type"]="application/json",e}async getHeadersInternal(e){let t=new Headers;if(e&&e.headers){for(let[n,l]of Object.entries(e.headers))t.append(n,l);e.timeout&&e.timeout>0&&t.append("X-Server-Timeout",String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var n;let l={};null!=t&&(l.mimeType=t.mimeType,l.name=t.name,l.displayName=t.displayName),l.name&&!l.name.startsWith("files/")&&(l.name=`files/${l.name}`);let i=this.clientOptions.uploader,r=await i.stat(e);l.sizeBytes=String(r.size);let o=null!=(n=null==t?void 0:t.mimeType)?n:r.type;if(void 0===o||""===o)throw Error("Can not determine mimeType. Please provide mimeType in the config.");l.mimeType=o;let a=await this.fetchUploadUrl(l,t);return i.upload(e,a,this)}async downloadFile(e){let t=this.clientOptions.downloader;await t.download(e,this)}async fetchUploadUrl(e,t){var n;let l={};l=(null==t?void 0:t.httpOptions)?t.httpOptions:{apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};let i={file:e},r=await this.request({path:h("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!r||!(null==r?void 0:r.headers))throw Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let o=null==(n=null==r?void 0:r.headers)?void 0:n["x-goog-upload-url"];if(void 0===o)throw Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function e4(e){var t;if(void 0===e)throw Error("response is undefined");if(!e.ok){let n=e.status,l=JSON.stringify((null==(t=e.headers.get("content-type"))?void 0:t.includes("application/json"))?await e.json():{error:{message:await e.text(),code:e.status,status:e.statusText}});if(n>=400&&n<600)throw new eN({message:l,status:n});throw Error(l)}}function e6(e){for(let t of e)if(e7(t)||"object"==typeof t&&"inputSchema"in t)return!0;return!1}function e9(e){var t;let n=null!=(t=e[e5])?t:"";e[e5]=(n+" mcp_used/unknown").trimStart()}function e7(e){return null!==e&&"object"==typeof e&&e instanceof te}class te{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new te(e,t)}async initialize(){var e,t,n,l;if(this.mcpTools.length>0)return;let i={},r=[];for(let s of this.mcpClients)try{for(var o,a=!0,u=(t=void 0,eb(function(e,t=100){return eS(this,arguments,function*(){let n,l=0;for(;l<t;){let t=yield eA(e.listTools({cursor:n}));for(let e of t.tools)yield yield eA(e),l++;if(!t.nextCursor)break;n=t.nextCursor}})}(s)));!(e=(o=await u.next()).done);a=!0){l=o.value,a=!1,r.push(l);let e=l.name;if(i[e])throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);i[e]=s}}catch(e){t={error:e}}finally{try{!a&&!e&&(n=u.return)&&await n.call(u)}finally{if(t)throw t.error}}this.mcpTools=r,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),function(e,t={}){let n=[],l=new Set;for(let i of e){let e=i.name;if(l.has(e))throw Error(`Duplicate function name ${e} found in MCP tools. Please ensure function names are unique.`);l.add(e);let r=function(e,t={}){let n={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return t.behavior&&(n.behavior=t.behavior),{functionDeclarations:[n]}}(i,t);r.functionDeclarations&&n.push(...r.functionDeclarations)}return{functionDeclarations:n}}(this.mcpTools,this.config)}async callTool(e){await this.initialize();let t=[];for(let n of e)if(n.name in this.functionNameToMcpClient){let e,l=this.functionNameToMcpClient[n.name];this.config.timeout&&(e={timeout:this.config.timeout});let i=await l.callTool({name:n.name,arguments:n.args},void 0,e);t.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return t}}async function tt(e,t,n){let l=new k;Object.assign(l,function(e){let t={};null!=g(e,["setupComplete"])&&m(t,["setupComplete"],{});let n=g(e,["serverContent"]);null!=n&&m(t,["serverContent"],function(e){let t={},n=g(e,["audioChunks"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);null!=l&&m(t,["mimeType"],l);let i=g(e,["sourceMetadata"]);return null!=i&&m(t,["sourceMetadata"],function(e){let t={},n=g(e,["clientContent"]);null!=n&&m(t,["clientContent"],function(e){let t={},n=g(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["text"]);null!=n&&m(t,["text"],n);let l=g(e,["weight"]);return null!=l&&m(t,["weight"],l),t})(e))),m(t,["weightedPrompts"],e)}return t}(n));let l=g(e,["musicGenerationConfig"]);return null!=l&&m(t,["musicGenerationConfig"],function(e){let t={},n=g(e,["temperature"]);null!=n&&m(t,["temperature"],n);let l=g(e,["topK"]);null!=l&&m(t,["topK"],l);let i=g(e,["seed"]);null!=i&&m(t,["seed"],i);let r=g(e,["guidance"]);null!=r&&m(t,["guidance"],r);let o=g(e,["bpm"]);null!=o&&m(t,["bpm"],o);let a=g(e,["density"]);null!=a&&m(t,["density"],a);let u=g(e,["brightness"]);null!=u&&m(t,["brightness"],u);let s=g(e,["scale"]);null!=s&&m(t,["scale"],s);let c=g(e,["muteBass"]);null!=c&&m(t,["muteBass"],c);let p=g(e,["muteDrums"]);null!=p&&m(t,["muteDrums"],p);let d=g(e,["onlyBassAndDrums"]);return null!=d&&m(t,["onlyBassAndDrums"],d),t}(l)),t}(i)),t})(e))),m(t,["audioChunks"],e)}return t}(n));let l=g(e,["filteredPrompt"]);return null!=l&&m(t,["filteredPrompt"],function(e){let t={},n=g(e,["text"]);null!=n&&m(t,["text"],n);let l=g(e,["filteredReason"]);return null!=l&&m(t,["filteredReason"],l),t}(l)),t}(n.data instanceof Blob?JSON.parse(await n.data.text()):JSON.parse(n.data))),t(l)}class tn{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let l=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),r=function(e){let t=new Headers;for(let[n,l]of Object.entries(e))t.append(n,l);return t}(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),a=`${l}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${o}`,u=()=>{},s=new Promise(e=>{u=e}),c=e.callbacks,p=this.apiClient,d={onopen:function(){u({})},onmessage:e=>{tt(p,c.onmessage,e)},onerror:null!=(t=null==c?void 0:c.onerror)?t:function(e){},onclose:null!=(n=null==c?void 0:c.onclose)?n:function(e){}},f=this.webSocketFactory.create(a,function(e){let t={};return e.forEach((e,n)=>{t[n]=e}),t}(r),d);f.connect(),await s;let h=eL({setup:eU({model:U(this.apiClient,e.model)})});return f.send(JSON.stringify(h)),new tl(f,this.apiClient)}}class tl{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||0===Object.keys(e.weightedPrompts).length)throw Error("Weighted prompts must be set and contain at least one entry.");let t=eq(function(e){let t={},n=g(e,["weightedPrompts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>eD(e))),m(t,["weightedPrompts"],e)}return t}(e));this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let t=eL(function(e){let t={},n=g(e,["musicGenerationConfig"]);return null!=n&&m(t,["musicGenerationConfig"],ek(n)),t}(e));this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){let t=eL({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(lG.PLAY)}pause(){this.sendPlaybackControl(lG.PAUSE)}stop(){this.sendPlaybackControl(lG.STOP)}resetContext(){this.sendPlaybackControl(lG.RESET_CONTEXT)}close(){this.conn.close()}}async function ti(e,t,n){let l=new D,i=JSON.parse(n.data instanceof Blob?await n.data.text():n.data instanceof ArrayBuffer?new TextDecoder().decode(n.data):n.data);e.isVertexAI()?Object.assign(l,function(e){let t={},n=g(e,["setupComplete"]);null!=n&&m(t,["setupComplete"],function(e){let t={},n=g(e,["sessionId"]);return null!=n&&m(t,["sessionId"],n),t}(n));let l=g(e,["serverContent"]);null!=l&&m(t,["serverContent"],function(e){let t={},n=g(e,["modelTurn"]);null!=n&&m(t,["modelTurn"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["data"]);null!=l&&m(t,["data"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["fileUri"]);null!=l&&m(t,["fileUri"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}(n));let l=g(e,["turnComplete"]);null!=l&&m(t,["turnComplete"],l);let i=g(e,["interrupted"]);null!=i&&m(t,["interrupted"],i);let r=g(e,["groundingMetadata"]);null!=r&&m(t,["groundingMetadata"],r);let o=g(e,["generationComplete"]);null!=o&&m(t,["generationComplete"],o);let a=g(e,["inputTranscription"]);null!=a&&m(t,["inputTranscription"],ej(a));let u=g(e,["outputTranscription"]);return null!=u&&m(t,["outputTranscription"],ej(u)),t}(l));let i=g(e,["toolCall"]);null!=i&&m(t,["toolCall"],function(e){let t={},n=g(e,["functionCalls"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["args"]);null!=n&&m(t,["args"],n);let l=g(e,["name"]);return null!=l&&m(t,["name"],l),t})(e))),m(t,["functionCalls"],e)}return t}(i));let r=g(e,["toolCallCancellation"]);null!=r&&m(t,["toolCallCancellation"],function(e){let t={},n=g(e,["ids"]);return null!=n&&m(t,["ids"],n),t}(r));let o=g(e,["usageMetadata"]);null!=o&&m(t,["usageMetadata"],function(e){let t={},n=g(e,["promptTokenCount"]);null!=n&&m(t,["promptTokenCount"],n);let l=g(e,["cachedContentTokenCount"]);null!=l&&m(t,["cachedContentTokenCount"],l);let i=g(e,["candidatesTokenCount"]);null!=i&&m(t,["responseTokenCount"],i);let r=g(e,["toolUsePromptTokenCount"]);null!=r&&m(t,["toolUsePromptTokenCount"],r);let o=g(e,["thoughtsTokenCount"]);null!=o&&m(t,["thoughtsTokenCount"],o);let a=g(e,["totalTokenCount"]);null!=a&&m(t,["totalTokenCount"],a);let u=g(e,["promptTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>eB(e))),m(t,["promptTokensDetails"],e)}let s=g(e,["cacheTokensDetails"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>eB(e))),m(t,["cacheTokensDetails"],e)}let c=g(e,["candidatesTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>eB(e))),m(t,["responseTokensDetails"],e)}let p=g(e,["toolUsePromptTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>eB(e))),m(t,["toolUsePromptTokensDetails"],e)}let d=g(e,["trafficType"]);return null!=d&&m(t,["trafficType"],d),t}(o));let a=g(e,["goAway"]);null!=a&&m(t,["goAway"],function(e){let t={},n=g(e,["timeLeft"]);return null!=n&&m(t,["timeLeft"],n),t}(a));let u=g(e,["sessionResumptionUpdate"]);return null!=u&&m(t,["sessionResumptionUpdate"],function(e){let t={},n=g(e,["newHandle"]);null!=n&&m(t,["newHandle"],n);let l=g(e,["resumable"]);null!=l&&m(t,["resumable"],l);let i=g(e,["lastConsumedClientMessageIndex"]);return null!=i&&m(t,["lastConsumedClientMessageIndex"],i),t}(u)),t}(i)):Object.assign(l,function(e){let t={};null!=g(e,["setupComplete"])&&m(t,["setupComplete"],{});let n=g(e,["serverContent"]);null!=n&&m(t,["serverContent"],function(e){let t={},n=g(e,["modelTurn"]);null!=n&&m(t,["modelTurn"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}(n));let l=g(e,["turnComplete"]);null!=l&&m(t,["turnComplete"],l);let i=g(e,["interrupted"]);null!=i&&m(t,["interrupted"],i);let r=g(e,["groundingMetadata"]);null!=r&&m(t,["groundingMetadata"],r);let o=g(e,["generationComplete"]);null!=o&&m(t,["generationComplete"],o);let a=g(e,["inputTranscription"]);null!=a&&m(t,["inputTranscription"],eG(a));let u=g(e,["outputTranscription"]);null!=u&&m(t,["outputTranscription"],eG(u));let s=g(e,["urlContextMetadata"]);return null!=s&&m(t,["urlContextMetadata"],function(e){let t={},n=g(e,["urlMetadata"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["retrievedUrl"]);null!=n&&m(t,["retrievedUrl"],n);let l=g(e,["urlRetrievalStatus"]);return null!=l&&m(t,["urlRetrievalStatus"],l),t})(e))),m(t,["urlMetadata"],e)}return t}(s)),t}(n));let l=g(e,["toolCall"]);null!=l&&m(t,["toolCall"],function(e){let t={},n=g(e,["functionCalls"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["id"]);null!=n&&m(t,["id"],n);let l=g(e,["args"]);null!=l&&m(t,["args"],l);let i=g(e,["name"]);return null!=i&&m(t,["name"],i),t})(e))),m(t,["functionCalls"],e)}return t}(l));let i=g(e,["toolCallCancellation"]);null!=i&&m(t,["toolCallCancellation"],function(e){let t={},n=g(e,["ids"]);return null!=n&&m(t,["ids"],n),t}(i));let r=g(e,["usageMetadata"]);null!=r&&m(t,["usageMetadata"],function(e){let t={},n=g(e,["promptTokenCount"]);null!=n&&m(t,["promptTokenCount"],n);let l=g(e,["cachedContentTokenCount"]);null!=l&&m(t,["cachedContentTokenCount"],l);let i=g(e,["responseTokenCount"]);null!=i&&m(t,["responseTokenCount"],i);let r=g(e,["toolUsePromptTokenCount"]);null!=r&&m(t,["toolUsePromptTokenCount"],r);let o=g(e,["thoughtsTokenCount"]);null!=o&&m(t,["thoughtsTokenCount"],o);let a=g(e,["totalTokenCount"]);null!=a&&m(t,["totalTokenCount"],a);let u=g(e,["promptTokensDetails"]);if(null!=u){let e=u;Array.isArray(e)&&(e=e.map(e=>eF(e))),m(t,["promptTokensDetails"],e)}let s=g(e,["cacheTokensDetails"]);if(null!=s){let e=s;Array.isArray(e)&&(e=e.map(e=>eF(e))),m(t,["cacheTokensDetails"],e)}let c=g(e,["responseTokensDetails"]);if(null!=c){let e=c;Array.isArray(e)&&(e=e.map(e=>eF(e))),m(t,["responseTokensDetails"],e)}let p=g(e,["toolUsePromptTokensDetails"]);if(null!=p){let e=p;Array.isArray(e)&&(e=e.map(e=>eF(e))),m(t,["toolUsePromptTokensDetails"],e)}return t}(r));let o=g(e,["goAway"]);null!=o&&m(t,["goAway"],function(e){let t={},n=g(e,["timeLeft"]);return null!=n&&m(t,["timeLeft"],n),t}(o));let a=g(e,["sessionResumptionUpdate"]);return null!=a&&m(t,["sessionResumptionUpdate"],function(e){let t={},n=g(e,["newHandle"]);null!=n&&m(t,["newHandle"],n);let l=g(e,["resumable"]);null!=l&&m(t,["resumable"],l);let i=g(e,["lastConsumedClientMessageIndex"]);return null!=i&&m(t,["lastConsumedClientMessageIndex"],i),t}(a)),t}(i)),t(l)}class tr{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new tn(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,l,i,r,o;let a;if(e.config&&e.config.httpOptions)throw Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let u=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),c=this.apiClient.getDefaultHeaders();e.config&&e.config.tools&&e6(e.config.tools)&&e9(c);let p=function(e){let t=new Headers;for(let[n,l]of Object.entries(e))t.append(n,l);return t}(c);if(this.apiClient.isVertexAI())a=`${u}/ws/google.cloud.aiplatform.${s}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(p);else{let e=this.apiClient.getApiKey(),t="BidiGenerateContent",n="key";(null==e?void 0:e.startsWith("auth_tokens/"))&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),"v1alpha"!==s&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),t="BidiGenerateContentConstrained",n="access_token"),a=`${u}/ws/google.ai.generativelanguage.${s}.GenerativeService.${t}?${n}=${e}`}let d=()=>{},f=new Promise(e=>{d=e}),h=e.callbacks,y=this.apiClient,v={onopen:function(){var e;null==(e=null==h?void 0:h.onopen)||e.call(h),d({})},onmessage:e=>{ti(y,h.onmessage,e)},onerror:null!=(t=null==h?void 0:h.onerror)?t:function(e){},onclose:null!=(n=null==h?void 0:h.onclose)?n:function(e){}},_=this.webSocketFactory.create(a,function(e){let t={};return e.forEach((e,n)=>{t[n]=e}),t}(p),v);_.connect(),await f;let C=U(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){let e=this.apiClient.getProject(),t=this.apiClient.getLocation();C=`projects/${e}/locations/${t}/`+C}let E={};this.apiClient.isVertexAI()&&(null==(l=e.config)?void 0:l.responseModalities)===void 0&&(void 0===e.config?e.config={responseModalities:[lh.AUDIO]}:e.config.responseModalities=[lh.AUDIO]),(null==(i=e.config)?void 0:i.generationConfig)&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let T=null!=(o=null==(r=e.config)?void 0:r.tools)?o:[],A=[];for(let e of T)this.isCallableTool(e)?A.push(await e.tool()):A.push(e);A.length>0&&(e.config.tools=A);let S={model:C,config:e.config,callbacks:e.callbacks};return E=this.apiClient.isVertexAI()?function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["setup","model"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["generationConfig"]);void 0!==t&&null!=n&&m(t,["setup","generationConfig"],n);let l=g(e,["responseModalities"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","responseModalities"],l);let i=g(e,["temperature"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","temperature"],i);let r=g(e,["topP"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig","topP"],r);let o=g(e,["topK"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","topK"],o);let a=g(e,["maxOutputTokens"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","maxOutputTokens"],a);let u=g(e,["mediaResolution"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","mediaResolution"],u);let s=g(e,["seed"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","seed"],s);let c=g(e,["speechConfig"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","speechConfig"],function(e){let t={},n=g(e,["voiceConfig"]);if(null!=n&&m(t,["voiceConfig"],function(e){let t={},n=g(e,["prebuiltVoiceConfig"]);return null!=n&&m(t,["prebuiltVoiceConfig"],function(e){let t={},n=g(e,["voiceName"]);return null!=n&&m(t,["voiceName"],n),t}(n)),t}(n)),void 0!==g(e,["multiSpeakerVoiceConfig"]))throw Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");let l=g(e,["languageCode"]);return null!=l&&m(t,["languageCode"],l),t}(Q(c)));let p=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&m(t,["setup","generationConfig","enableAffectiveDialog"],p);let d=g(e,["systemInstruction"]);void 0!==t&&null!=d&&m(t,["setup","systemInstruction"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["data"]);null!=l&&m(t,["data"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={},n=g(e,["displayName"]);null!=n&&m(t,["displayName"],n);let l=g(e,["fileUri"]);null!=l&&m(t,["fileUri"],l);let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}($(d)));let f=g(e,["tools"]);if(void 0!==t&&null!=f){let e=ee(f);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={};if(void 0!==g(e,["behavior"]))throw Error("behavior parameter is not supported in Vertex AI.");let n=g(e,["description"]);null!=n&&m(t,["description"],n);let l=g(e,["name"]);null!=l&&m(t,["name"],l);let i=g(e,["parameters"]);null!=i&&m(t,["parameters"],i);let r=g(e,["parametersJsonSchema"]);null!=r&&m(t,["parametersJsonSchema"],r);let o=g(e,["response"]);null!=o&&m(t,["response"],o);let a=g(e,["responseJsonSchema"]);return null!=a&&m(t,["responseJsonSchema"],a),t})(e))),m(t,["functionDeclarations"],e)}let l=g(e,["retrieval"]);null!=l&&m(t,["retrieval"],l);let i=g(e,["googleSearch"]);null!=i&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(i));let r=g(e,["googleSearchRetrieval"]);null!=r&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(r)),null!=g(e,["enterpriseWebSearch"])&&m(t,["enterpriseWebSearch"],{});let o=g(e,["googleMaps"]);null!=o&&m(t,["googleMaps"],function(e){let t={},n=g(e,["authConfig"]);return null!=n&&m(t,["authConfig"],function(e){let t={},n=g(e,["apiKeyConfig"]);null!=n&&m(t,["apiKeyConfig"],function(e){let t={},n=g(e,["apiKeyString"]);return null!=n&&m(t,["apiKeyString"],n),t}(n));let l=g(e,["authType"]);null!=l&&m(t,["authType"],l);let i=g(e,["googleServiceAccountConfig"]);null!=i&&m(t,["googleServiceAccountConfig"],i);let r=g(e,["httpBasicAuthConfig"]);null!=r&&m(t,["httpBasicAuthConfig"],r);let o=g(e,["oauthConfig"]);null!=o&&m(t,["oauthConfig"],o);let a=g(e,["oidcConfig"]);return null!=a&&m(t,["oidcConfig"],a),t}(n)),t}(o)),null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let a=g(e,["codeExecution"]);null!=a&&m(t,["codeExecution"],a);let u=g(e,["computerUse"]);return null!=u&&m(t,["computerUse"],u),t})(Z(e)))),m(t,["setup","tools"],e)}let h=g(e,["sessionResumption"]);void 0!==t&&null!=h&&m(t,["setup","sessionResumption"],function(e){let t={},n=g(e,["handle"]);null!=n&&m(t,["handle"],n);let l=g(e,["transparent"]);return null!=l&&m(t,["transparent"],l),t}(h));let y=g(e,["inputAudioTranscription"]);void 0!==t&&null!=y&&m(t,["setup","inputAudioTranscription"],{});let v=g(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&m(t,["setup","outputAudioTranscription"],{});let _=g(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&m(t,["setup","realtimeInputConfig"],function(e){let t={},n=g(e,["automaticActivityDetection"]);null!=n&&m(t,["automaticActivityDetection"],function(e){let t={},n=g(e,["disabled"]);null!=n&&m(t,["disabled"],n);let l=g(e,["startOfSpeechSensitivity"]);null!=l&&m(t,["startOfSpeechSensitivity"],l);let i=g(e,["endOfSpeechSensitivity"]);null!=i&&m(t,["endOfSpeechSensitivity"],i);let r=g(e,["prefixPaddingMs"]);null!=r&&m(t,["prefixPaddingMs"],r);let o=g(e,["silenceDurationMs"]);return null!=o&&m(t,["silenceDurationMs"],o),t}(n));let l=g(e,["activityHandling"]);null!=l&&m(t,["activityHandling"],l);let i=g(e,["turnCoverage"]);return null!=i&&m(t,["turnCoverage"],i),t}(_));let C=g(e,["contextWindowCompression"]);void 0!==t&&null!=C&&m(t,["setup","contextWindowCompression"],function(e){let t={},n=g(e,["triggerTokens"]);null!=n&&m(t,["triggerTokens"],n);let l=g(e,["slidingWindow"]);return null!=l&&m(t,["slidingWindow"],function(e){let t={},n=g(e,["targetTokens"]);return null!=n&&m(t,["targetTokens"],n),t}(l)),t}(C));let E=g(e,["proactivity"]);return void 0!==t&&null!=E&&m(t,["setup","proactivity"],function(e){let t={},n=g(e,["proactiveAudio"]);return null!=n&&m(t,["proactiveAudio"],n),t}(E)),{}}(i,n)),n}(this.apiClient,S):function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["setup","model"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["generationConfig"]);void 0!==t&&null!=n&&m(t,["setup","generationConfig"],n);let l=g(e,["responseModalities"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","responseModalities"],l);let i=g(e,["temperature"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","temperature"],i);let r=g(e,["topP"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig","topP"],r);let o=g(e,["topK"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","topK"],o);let a=g(e,["maxOutputTokens"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","maxOutputTokens"],a);let u=g(e,["mediaResolution"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","mediaResolution"],u);let s=g(e,["seed"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","seed"],s);let c=g(e,["speechConfig"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","speechConfig"],function(e){let t={},n=g(e,["voiceConfig"]);null!=n&&m(t,["voiceConfig"],eP(n));let l=g(e,["multiSpeakerVoiceConfig"]);null!=l&&m(t,["multiSpeakerVoiceConfig"],function(e){let t={},n=g(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["speaker"]);null!=n&&m(t,["speaker"],n);let l=g(e,["voiceConfig"]);return null!=l&&m(t,["voiceConfig"],eP(l)),t})(e))),m(t,["speakerVoiceConfigs"],e)}return t}(l));let i=g(e,["languageCode"]);return null!=i&&m(t,["languageCode"],i),t}(Q(c)));let p=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&m(t,["setup","generationConfig","enableAffectiveDialog"],p);let d=g(e,["systemInstruction"]);void 0!==t&&null!=d&&m(t,["setup","systemInstruction"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}($(d)));let f=g(e,["tools"]);if(void 0!==t&&null!=f){let e=ee(f);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["behavior"]);null!=n&&m(t,["behavior"],n);let l=g(e,["description"]);null!=l&&m(t,["description"],l);let i=g(e,["name"]);null!=i&&m(t,["name"],i);let r=g(e,["parameters"]);null!=r&&m(t,["parameters"],r);let o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);let a=g(e,["response"]);null!=a&&m(t,["response"],a);let u=g(e,["responseJsonSchema"]);return null!=u&&m(t,["responseJsonSchema"],u),t})(e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(l));let i=g(e,["googleSearchRetrieval"]);if(null!=i&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(i)),void 0!==g(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==g(e,["googleMaps"]))throw Error("googleMaps parameter is not supported in Gemini API.");null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let r=g(e,["codeExecution"]);null!=r&&m(t,["codeExecution"],r);let o=g(e,["computerUse"]);return null!=o&&m(t,["computerUse"],o),t})(Z(e)))),m(t,["setup","tools"],e)}let h=g(e,["sessionResumption"]);void 0!==t&&null!=h&&m(t,["setup","sessionResumption"],function(e){let t={},n=g(e,["handle"]);if(null!=n&&m(t,["handle"],n),void 0!==g(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(h));let y=g(e,["inputAudioTranscription"]);void 0!==t&&null!=y&&m(t,["setup","inputAudioTranscription"],{});let v=g(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&m(t,["setup","outputAudioTranscription"],{});let _=g(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&m(t,["setup","realtimeInputConfig"],function(e){let t={},n=g(e,["automaticActivityDetection"]);null!=n&&m(t,["automaticActivityDetection"],function(e){let t={},n=g(e,["disabled"]);null!=n&&m(t,["disabled"],n);let l=g(e,["startOfSpeechSensitivity"]);null!=l&&m(t,["startOfSpeechSensitivity"],l);let i=g(e,["endOfSpeechSensitivity"]);null!=i&&m(t,["endOfSpeechSensitivity"],i);let r=g(e,["prefixPaddingMs"]);null!=r&&m(t,["prefixPaddingMs"],r);let o=g(e,["silenceDurationMs"]);return null!=o&&m(t,["silenceDurationMs"],o),t}(n));let l=g(e,["activityHandling"]);null!=l&&m(t,["activityHandling"],l);let i=g(e,["turnCoverage"]);return null!=i&&m(t,["turnCoverage"],i),t}(_));let C=g(e,["contextWindowCompression"]);void 0!==t&&null!=C&&m(t,["setup","contextWindowCompression"],function(e){let t={},n=g(e,["triggerTokens"]);null!=n&&m(t,["triggerTokens"],n);let l=g(e,["slidingWindow"]);return null!=l&&m(t,["slidingWindow"],function(e){let t={},n=g(e,["targetTokens"]);return null!=n&&m(t,["targetTokens"],n),t}(l)),t}(C));let E=g(e,["proactivity"]);return void 0!==t&&null!=E&&m(t,["setup","proactivity"],function(e){let t={},n=g(e,["proactiveAudio"]);return null!=n&&m(t,["proactiveAudio"],n),t}(E)),{}}(i,n)),n}(this.apiClient,S),delete E.config,_.send(JSON.stringify(E)),new ta(_,this.apiClient)}isCallableTool(e){return"callTool"in e&&"function"==typeof e.callTool}}const to={turnComplete:!0};class ta{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(null!==t.turns&&void 0!==t.turns){let n=[];try{n=K(t.turns),n=e.isVertexAI()?n.map(e=>eY(e)):n.map(e=>eV(e))}catch(e){throw Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(null==t.functionResponses||0===(n=Array.isArray(t.functionResponses)?t.functionResponses:[t.functionResponses]).length)throw Error("functionResponses is required.");for(let t of n){if("object"!=typeof t||null===t||!("name"in t)||!("response"in t))throw Error(`Could not parse function response, type '${typeof t}'.`);if(!e.isVertexAI()&&!("id"in t))throw Error("FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.")}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},to),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};t=this.apiClient.isVertexAI()?{realtimeInput:function(e){let t={},n=g(e,["media"]);null!=n&&m(t,["mediaChunks"],L(n));let l=g(e,["audio"]);null!=l&&m(t,["audio"],j(l));let i=g(e,["audioStreamEnd"]);null!=i&&m(t,["audioStreamEnd"],i);let r=g(e,["video"]);null!=r&&m(t,["video"],F(r));let o=g(e,["text"]);return null!=o&&m(t,["text"],o),null!=g(e,["activityStart"])&&m(t,["activityStart"],{}),null!=g(e,["activityEnd"])&&m(t,["activityEnd"],{}),t}(e)}:{realtimeInput:function(e){let t={},n=g(e,["media"]);null!=n&&m(t,["mediaChunks"],L(n));let l=g(e,["audio"]);null!=l&&m(t,["audio"],j(l));let i=g(e,["audioStreamEnd"]);null!=i&&m(t,["audioStreamEnd"],i);let r=g(e,["video"]);null!=r&&m(t,["video"],F(r));let o=g(e,["text"]);return null!=o&&m(t,["text"],o),null!=g(e,["activityStart"])&&m(t,["activityStart"],{}),null!=g(e,["activityEnd"])&&m(t,["activityEnd"],{}),t}(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(null==e.functionResponses)throw Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function tu(e){var t,n,l;if(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.disable)return!0;let i=!1;for(let t of null!=(n=null==e?void 0:e.tools)?n:[])if(ts(t)){i=!0;break}if(!i)return!0;let r=null==(l=null==e?void 0:e.automaticFunctionCalling)?void 0:l.maximumRemoteCalls;return(!(!r||!(r<0)&&Number.isInteger(r))||0==r)&&(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0)}function ts(e){return"callTool"in e&&"function"==typeof e.callTool}function tc(e){var t;return!(null==(t=null==e?void 0:e.automaticFunctionCalling)?void 0:t.ignoreCallHistory)}class tp extends f{constructor(e){super(),this.apiClient=e,this.generateContent=async e=>{var t,n,l,i,r,o,a,u,s,c,p;let d,f,h=await this.processParamsForMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!(null!=(u=null==(a=null==(o=e.config)?void 0:o.tools)?void 0:a.some(e=>e7(e)))&&u)||tu(e.config))return await this.generateContentInternal(h);if(null!=(p=null==(c=null==(s=e.config)?void 0:s.tools)?void 0:c.some(e=>!e7(e)))&&p)throw Error("Automatic function calling with CallableTools and Tools is not yet supported.");let m=K(h.contents),g=null!=(l=null==(n=null==(t=h.config)?void 0:t.automaticFunctionCalling)?void 0:n.maximumRemoteCalls)?l:10,y=0;for(;y<g&&(d=await this.generateContentInternal(h)).functionCalls&&0!==d.functionCalls.length;){let t=d.candidates[0].content,n=[];for(let t of null!=(r=null==(i=e.config)?void 0:i.tools)?r:[])if(ts(t)){let e=await t.callTool(d.functionCalls);n.push(...e)}y++,f={role:"user",parts:n},h.contents=K(h.contents),h.contents.push(t),h.contents.push(f),tc(h.config)&&(m.push(t),m.push(f))}return tc(h.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async e=>{if(this.maybeMoveToResponseJsonSchem(e),!tu(e.config))return await this.processAfcStream(e);{let t=await this.processParamsForMcpUsage(e);return await this.generateContentStreamInternal(t)}},this.generateImages=async e=>await this.generateImagesInternal(e).then(e=>{var t;let n,l=[];if(null==e?void 0:e.generatedImages)for(let i of e.generatedImages)i&&(null==i?void 0:i.safetyAttributes)&&(null==(t=null==i?void 0:i.safetyAttributes)?void 0:t.contentType)==="Positive Prompt"?n=null==i?void 0:i.safetyAttributes:l.push(i);return n?{generatedImages:l,positivePromptSafetyAttributes:n}:{generatedImages:l}}),this.list=async e=>{var t;let n={config:Object.assign(Object.assign({},{queryBase:!0}),null==e?void 0:e.config)};if(this.apiClient.isVertexAI()&&!n.config.queryBase)if(null==(t=n.config)?void 0:t.filter)throw Error("Filtering tuned models list for Vertex AI is not currently supported");else n.config.filter="labels.tune-type:*";return new eg(lF.PAGED_ITEM_MODELS,e=>this.listInternal(e),await this.listInternal(n),n)},this.editImage=async e=>{let t={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(t.referenceImages=e.referenceImages.map(e=>e.toReferenceImageAPI())),await this.editImageInternal(t)},this.upscaleImage=async e=>{let t={numberOfImages:1,mode:"upscale"};e.config&&(t=Object.assign(Object.assign({},t),e.config));let n={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:t};return await this.upscaleImageInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&!e.config.responseJsonSchema&&Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema)}async processParamsForMcpUsage(e){var t,n,l;let i=null==(t=e.config)?void 0:t.tools;if(!i)return e;let r=await Promise.all(i.map(async e=>ts(e)?await e.tool():e)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:r})};if(o.config.tools=r,e.config&&e.config.tools&&e6(e.config.tools)){let t=Object.assign({},null!=(l=null==(n=e.config.httpOptions)?void 0:n.headers)?l:{});0===Object.keys(t).length&&(t=this.apiClient.getDefaultHeaders()),e9(t),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:t})}return o}async initAfcToolsMap(e){var t,n,l;let i=new Map;for(let r of null!=(n=null==(t=e.config)?void 0:t.tools)?n:[])if(ts(r))for(let e of null!=(l=(await r.tool()).functionDeclarations)?l:[]){if(!e.name)throw Error("Function declaration name is required.");if(i.has(e.name))throw Error(`Duplicate tool declaration name: ${e.name}`);i.set(e.name,r)}return i}async processAfcStream(e){var t,n,l;let i=null!=(l=null==(n=null==(t=e.config)?void 0:t.automaticFunctionCalling)?void 0:n.maximumRemoteCalls)?l:10,r=!1,o=0;return function(e,t,n){var l,a;return eS(this,arguments,function*(){for(var u,s,c,p;o<i;){r&&(o++,r=!1);let m=yield eA(e.processParamsForMcpUsage(n)),g=yield eA(e.generateContentStreamInternal(m)),y=[],_=[];try{for(var d,f=!0,h=(s=void 0,eb(g));!(u=(d=yield eA(h.next())).done);f=!0)if(p=d.value,f=!1,yield yield eA(p),p.candidates&&(null==(l=p.candidates[0])?void 0:l.content)){for(let e of(_.push(p.candidates[0].content),null!=(a=p.candidates[0].content.parts)?a:[]))if(o<i&&e.functionCall){if(!e.functionCall.name)throw Error("Function call name was not returned by the model.");if(t.has(e.functionCall.name)){let n=yield eA(t.get(e.functionCall.name).callTool([e.functionCall]));y.push(...n)}else throw Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${t.keys()}, mising tool: ${e.functionCall.name}`)}}}catch(e){s={error:e}}finally{try{!f&&!u&&(c=h.return)&&(yield eA(c.call(h)))}finally{if(s)throw s.error}}if(y.length>0){r=!0;let e=new v;e.candidates=[{content:{role:"user",parts:y}}],yield yield eA(e);let t=[];t.push(..._),t.push({role:"user",parts:y});let l=K(n.contents).concat(t);n.contents=l}else break}})}(this,await this.initAfcToolsMap(e),e)}async generateContentInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=eW(this.apiClient,e);return r=h("{model}:generateContent",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=eZ(e),n=new v;return Object.assign(n,t),n})}{let t=eH(this.apiClient,e);return r=h("{model}:generateContent",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json().then(t=>(t.sdkHttpResponse={headers:e.headers},t))).then(e=>{let t=ez(e),n=new v;return Object.assign(n,t),n})}}async generateContentStreamInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=eW(this.apiClient,e);return r=h("{model}:streamGenerateContent?alt=sse",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.requestStream({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(function(e){return eS(this,arguments,function*(){var t,n,l,i;try{for(var r,o=!0,a=eb(e);!(t=(r=yield eA(a.next())).done);o=!0){i=r.value,o=!1;let e=eZ((yield eA(i.json())));e.sdkHttpResponse={headers:i.headers};let t=new v;Object.assign(t,e),yield yield eA(t)}}catch(e){n={error:e}}finally{try{!o&&!t&&(l=a.return)&&(yield eA(l.call(a)))}finally{if(n)throw n.error}}})})}{let t=eH(this.apiClient,e);return r=h("{model}:streamGenerateContent?alt=sse",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.requestStream({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(function(e){return eS(this,arguments,function*(){var t,n,l,i;try{for(var r,o=!0,a=eb(e);!(t=(r=yield eA(a.next())).done);o=!0){i=r.value,o=!1;let e=ez((yield eA(i.json())));e.sdkHttpResponse={headers:i.headers};let t=new v;Object.assign(t,e),yield yield eA(t)}}catch(e){n={error:e}}finally{try{!o&&!t&&(l=a.return)&&(yield eA(l.call(a)))}finally{if(n)throw n.error}}})})}}async embedContent(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["contents"]);null!=i&&m(n,["instances[]","content"],W(e,i));let r=g(t,["config"]);return null!=r&&m(n,["config"],function(e,t){let n=g(e,["taskType"]);void 0!==t&&null!=n&&m(t,["instances[]","task_type"],n);let l=g(e,["title"]);void 0!==t&&null!=l&&m(t,["instances[]","title"],l);let i=g(e,["outputDimensionality"]);void 0!==t&&null!=i&&m(t,["parameters","outputDimensionality"],i);let r=g(e,["mimeType"]);void 0!==t&&null!=r&&m(t,["instances[]","mimeType"],r);let o=g(e,["autoTruncate"]);return void 0!==t&&null!=o&&m(t,["parameters","autoTruncate"],o),{}}(r,n)),n}(this.apiClient,e);return r=h("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["predictions[]","embeddings"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["values"]);null!=n&&m(t,["values"],n);let l=g(e,["statistics"]);return null!=l&&m(t,["statistics"],function(e){let t={},n=g(e,["truncated"]);null!=n&&m(t,["truncated"],n);let l=g(e,["token_count"]);return null!=l&&m(t,["tokenCount"],l),t}(l)),t})(e))),m(t,["embeddings"],e)}let l=g(e,["metadata"]);return null!=l&&m(t,["metadata"],function(e){let t={},n=g(e,["billableCharacterCount"]);return null!=n&&m(t,["billableCharacterCount"],n),t}(l)),t}(e),n=new _;return Object.assign(n,t),n})}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["contents"]);null!=i&&m(n,["requests[]","content"],W(e,i));let r=g(t,["config"]);null!=r&&m(n,["config"],function(e,t){let n=g(e,["taskType"]);void 0!==t&&null!=n&&m(t,["requests[]","taskType"],n);let l=g(e,["title"]);void 0!==t&&null!=l&&m(t,["requests[]","title"],l);let i=g(e,["outputDimensionality"]);if(void 0!==t&&null!=i&&m(t,["requests[]","outputDimensionality"],i),void 0!==g(e,["mimeType"]))throw Error("mimeType parameter is not supported in Gemini API.");if(void 0!==g(e,["autoTruncate"]))throw Error("autoTruncate parameter is not supported in Gemini API.");return{}}(r,n));let o=g(t,["model"]);return void 0!==o&&m(n,["requests[]","model"],U(e,o)),n}(this.apiClient,e);return r=h("{model}:batchEmbedContents",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["embeddings"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["values"]);return null!=n&&m(t,["values"],n),t})(e))),m(t,["embeddings"],e)}return null!=g(e,["metadata"])&&m(t,["metadata"],{}),t}(e),n=new _;return Object.assign(n,t),n})}}async generateImagesInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);let r=g(t,["config"]);return null!=r&&m(n,["config"],function(e,t){let n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);let l=g(e,["negativePrompt"]);void 0!==t&&null!=l&&m(t,["parameters","negativePrompt"],l);let i=g(e,["numberOfImages"]);void 0!==t&&null!=i&&m(t,["parameters","sampleCount"],i);let r=g(e,["aspectRatio"]);void 0!==t&&null!=r&&m(t,["parameters","aspectRatio"],r);let o=g(e,["guidanceScale"]);void 0!==t&&null!=o&&m(t,["parameters","guidanceScale"],o);let a=g(e,["seed"]);void 0!==t&&null!=a&&m(t,["parameters","seed"],a);let u=g(e,["safetyFilterLevel"]);void 0!==t&&null!=u&&m(t,["parameters","safetySetting"],u);let s=g(e,["personGeneration"]);void 0!==t&&null!=s&&m(t,["parameters","personGeneration"],s);let c=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&m(t,["parameters","includeSafetyAttributes"],c);let p=g(e,["includeRaiReason"]);void 0!==t&&null!=p&&m(t,["parameters","includeRaiReason"],p);let d=g(e,["language"]);void 0!==t&&null!=d&&m(t,["parameters","language"],d);let f=g(e,["outputMimeType"]);void 0!==t&&null!=f&&m(t,["parameters","outputOptions","mimeType"],f);let h=g(e,["outputCompressionQuality"]);void 0!==t&&null!=h&&m(t,["parameters","outputOptions","compressionQuality"],h);let y=g(e,["addWatermark"]);void 0!==t&&null!=y&&m(t,["parameters","addWatermark"],y);let v=g(e,["enhancePrompt"]);return void 0!==t&&null!=v&&m(t,["parameters","enhancePrompt"],v),{}}(r,n)),n}(this.apiClient,e);return r=h("{model}:predict",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e1(e))),m(t,["generatedImages"],e)}let l=g(e,["positivePromptSafetyAttributes"]);return null!=l&&m(t,["positivePromptSafetyAttributes"],e0(l)),t}(e),n=new C;return Object.assign(n,t),n})}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);let r=g(t,["config"]);return null!=r&&m(n,["config"],function(e,t){if(void 0!==g(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["negativePrompt"]))throw Error("negativePrompt parameter is not supported in Gemini API.");let n=g(e,["numberOfImages"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);let l=g(e,["aspectRatio"]);void 0!==t&&null!=l&&m(t,["parameters","aspectRatio"],l);let i=g(e,["guidanceScale"]);if(void 0!==t&&null!=i&&m(t,["parameters","guidanceScale"],i),void 0!==g(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let r=g(e,["safetyFilterLevel"]);void 0!==t&&null!=r&&m(t,["parameters","safetySetting"],r);let o=g(e,["personGeneration"]);void 0!==t&&null!=o&&m(t,["parameters","personGeneration"],o);let a=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=a&&m(t,["parameters","includeSafetyAttributes"],a);let u=g(e,["includeRaiReason"]);void 0!==t&&null!=u&&m(t,["parameters","includeRaiReason"],u);let s=g(e,["language"]);void 0!==t&&null!=s&&m(t,["parameters","language"],s);let c=g(e,["outputMimeType"]);void 0!==t&&null!=c&&m(t,["parameters","outputOptions","mimeType"],c);let p=g(e,["outputCompressionQuality"]);if(void 0!==t&&null!=p&&m(t,["parameters","outputOptions","compressionQuality"],p),void 0!==g(e,["addWatermark"]))throw Error("addWatermark parameter is not supported in Gemini API.");if(void 0!==g(e,["enhancePrompt"]))throw Error("enhancePrompt parameter is not supported in Gemini API.");return{}}(r,n)),n}(this.apiClient,e);return r=h("{model}:predict",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["_self"]);null!=n&&m(t,["image"],function(e){let t={},n=g(e,["bytesBase64Encoded"]);null!=n&&m(t,["imageBytes"],el(n));let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(n));let l=g(e,["raiFilteredReason"]);null!=l&&m(t,["raiFilteredReason"],l);let i=g(e,["_self"]);return null!=i&&m(t,["safetyAttributes"],eX(i)),t})(e))),m(t,["generatedImages"],e)}let l=g(e,["positivePromptSafetyAttributes"]);return null!=l&&m(t,["positivePromptSafetyAttributes"],eX(l)),t}(e),n=new C;return Object.assign(n,t),n})}}async editImageInternal(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI()){let r=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);let r=g(t,["referenceImages"]);if(null!=r){let e=r;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["referenceImage"]);null!=n&&m(t,["referenceImage"],eK(n));let l=g(e,["referenceId"]);null!=l&&m(t,["referenceId"],l);let i=g(e,["referenceType"]);null!=i&&m(t,["referenceType"],i);let r=g(e,["maskImageConfig"]);null!=r&&m(t,["maskImageConfig"],function(e){let t={},n=g(e,["maskMode"]);null!=n&&m(t,["maskMode"],n);let l=g(e,["segmentationClasses"]);null!=l&&m(t,["maskClasses"],l);let i=g(e,["maskDilation"]);return null!=i&&m(t,["dilation"],i),t}(r));let o=g(e,["controlImageConfig"]);null!=o&&m(t,["controlImageConfig"],function(e){let t={},n=g(e,["controlType"]);null!=n&&m(t,["controlType"],n);let l=g(e,["enableControlImageComputation"]);return null!=l&&m(t,["computeControl"],l),t}(o));let a=g(e,["styleImageConfig"]);null!=a&&m(t,["styleImageConfig"],function(e){let t={},n=g(e,["styleDescription"]);return null!=n&&m(t,["styleDescription"],n),t}(a));let u=g(e,["subjectImageConfig"]);return null!=u&&m(t,["subjectImageConfig"],function(e){let t={},n=g(e,["subjectType"]);null!=n&&m(t,["subjectType"],n);let l=g(e,["subjectDescription"]);return null!=l&&m(t,["subjectDescription"],l),t}(u)),t})(e))),m(n,["instances[0]","referenceImages"],e)}let o=g(t,["config"]);return null!=o&&m(n,["config"],function(e,t){let n=g(e,["outputGcsUri"]);void 0!==t&&null!=n&&m(t,["parameters","storageUri"],n);let l=g(e,["negativePrompt"]);void 0!==t&&null!=l&&m(t,["parameters","negativePrompt"],l);let i=g(e,["numberOfImages"]);void 0!==t&&null!=i&&m(t,["parameters","sampleCount"],i);let r=g(e,["aspectRatio"]);void 0!==t&&null!=r&&m(t,["parameters","aspectRatio"],r);let o=g(e,["guidanceScale"]);void 0!==t&&null!=o&&m(t,["parameters","guidanceScale"],o);let a=g(e,["seed"]);void 0!==t&&null!=a&&m(t,["parameters","seed"],a);let u=g(e,["safetyFilterLevel"]);void 0!==t&&null!=u&&m(t,["parameters","safetySetting"],u);let s=g(e,["personGeneration"]);void 0!==t&&null!=s&&m(t,["parameters","personGeneration"],s);let c=g(e,["includeSafetyAttributes"]);void 0!==t&&null!=c&&m(t,["parameters","includeSafetyAttributes"],c);let p=g(e,["includeRaiReason"]);void 0!==t&&null!=p&&m(t,["parameters","includeRaiReason"],p);let d=g(e,["language"]);void 0!==t&&null!=d&&m(t,["parameters","language"],d);let f=g(e,["outputMimeType"]);void 0!==t&&null!=f&&m(t,["parameters","outputOptions","mimeType"],f);let h=g(e,["outputCompressionQuality"]);void 0!==t&&null!=h&&m(t,["parameters","outputOptions","compressionQuality"],h);let y=g(e,["addWatermark"]);void 0!==t&&null!=y&&m(t,["parameters","addWatermark"],y);let v=g(e,["editMode"]);void 0!==t&&null!=v&&m(t,["parameters","editMode"],v);let _=g(e,["baseSteps"]);return void 0!==t&&null!=_&&m(t,["parameters","editConfig","baseSteps"],_),{}}(o,n)),n}(this.apiClient,e);return l=h("{model}:predict",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e1(e))),m(t,["generatedImages"],e)}return t}(e),n=new E;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI()){let r=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["image"]);null!=i&&m(n,["instances[0]","image"],eK(i));let r=g(t,["upscaleFactor"]);null!=r&&m(n,["parameters","upscaleConfig","upscaleFactor"],r);let o=g(t,["config"]);return null!=o&&m(n,["config"],function(e,t){let n=g(e,["includeRaiReason"]);void 0!==t&&null!=n&&m(t,["parameters","includeRaiReason"],n);let l=g(e,["outputMimeType"]);void 0!==t&&null!=l&&m(t,["parameters","outputOptions","mimeType"],l);let i=g(e,["outputCompressionQuality"]);void 0!==t&&null!=i&&m(t,["parameters","outputOptions","compressionQuality"],i);let r=g(e,["enhanceInputImage"]);void 0!==t&&null!=r&&m(t,["parameters","upscaleConfig","enhanceInputImage"],r);let o=g(e,["imagePreservationFactor"]);void 0!==t&&null!=o&&m(t,["parameters","upscaleConfig","imagePreservationFactor"],o);let a=g(e,["numberOfImages"]);void 0!==t&&null!=a&&m(t,["parameters","sampleCount"],a);let u=g(e,["mode"]);return void 0!==t&&null!=u&&m(t,["parameters","mode"],u),{}}(o,n)),n}(this.apiClient,e);return l=h("{model}:predict",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["predictions"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>e1(e))),m(t,["generatedImages"],e)}return t}(e),n=new T;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","name"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e2(e))}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","name"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>eQ(e))}}async listInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["config"]);return null!=l&&m(n,["config"],function(e,t,n){let l=g(t,["pageSize"]);void 0!==n&&null!=l&&m(n,["_query","pageSize"],l);let i=g(t,["pageToken"]);void 0!==n&&null!=i&&m(n,["_query","pageToken"],i);let r=g(t,["filter"]);void 0!==n&&null!=r&&m(n,["_query","filter"],r);let o=g(t,["queryBase"]);return void 0!==n&&null!=o&&m(n,["_url","models_url"],er(e,o)),{}}(e,l,n)),n}(this.apiClient,e);return r=h("{models_url}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["_self"]);if(null!=l){let e=eo(l);Array.isArray(e)&&(e=e.map(e=>e2(e))),m(t,["models"],e)}return t}(e),n=new A;return Object.assign(n,t),n})}{let t=function(e,t){let n={},l=g(t,["config"]);return null!=l&&m(n,["config"],function(e,t,n){let l=g(t,["pageSize"]);void 0!==n&&null!=l&&m(n,["_query","pageSize"],l);let i=g(t,["pageToken"]);void 0!==n&&null!=i&&m(n,["_query","pageToken"],i);let r=g(t,["filter"]);void 0!==n&&null!=r&&m(n,["_query","filter"],r);let o=g(t,["queryBase"]);return void 0!==n&&null!=o&&m(n,["_url","models_url"],er(e,o)),{}}(e,l,n)),n}(this.apiClient,e);return r=h("{models_url}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["_self"]);if(null!=l){let e=eo(l);Array.isArray(e)&&(e=e.map(e=>eQ(e))),m(t,["models"],e)}return t}(e),n=new A;return Object.assign(n,t),n})}}async update(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);let l=g(e,["description"]);void 0!==t&&null!=l&&m(t,["description"],l);let i=g(e,["defaultCheckpointId"]);return void 0!==t&&null!=i&&m(t,["defaultCheckpointId"],i),{}}(i,n)),n}(this.apiClient,e);return r=h("{model}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"PATCH",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>e2(e))}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","name"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["displayName"]);void 0!==t&&null!=n&&m(t,["displayName"],n);let l=g(e,["description"]);void 0!==t&&null!=l&&m(t,["description"],l);let i=g(e,["defaultCheckpointId"]);return void 0!==t&&null!=i&&m(t,["defaultCheckpointId"],i),{}}(i,n)),n}(this.apiClient,e);return r=h("{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"PATCH",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>eQ(e))}}async delete(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","name"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(()=>{let e=new S;return Object.assign(e,{}),e})}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","name"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],i),n}(this.apiClient,e);return r=h("{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"DELETE",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(()=>{let e=new S;return Object.assign(e,{}),e})}}async countTokens(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["contents"]);if(null!=i){let e=K(i);Array.isArray(e)&&(e=e.map(e=>eY(e))),m(n,["contents"],e)}let r=g(t,["config"]);return null!=r&&m(n,["config"],function(e,t){let n=g(e,["systemInstruction"]);void 0!==t&&null!=n&&m(t,["systemInstruction"],eY($(n)));let l=g(e,["tools"]);if(void 0!==t&&null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>e$(e))),m(t,["tools"],e)}let i=g(e,["generationConfig"]);return void 0!==t&&null!=i&&m(t,["generationConfig"],i),{}}(r,n)),n}(this.apiClient,e);return r=h("{model}:countTokens",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["totalTokens"]);return null!=n&&m(t,["totalTokens"],n),t}(e),n=new b;return Object.assign(n,t),n})}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["contents"]);if(null!=i){let e=K(i);Array.isArray(e)&&(e=e.map(e=>eV(e))),m(n,["contents"],e)}let r=g(t,["config"]);return null!=r&&m(n,["config"],function(e){if(void 0!==g(e,["systemInstruction"]))throw Error("systemInstruction parameter is not supported in Gemini API.");if(void 0!==g(e,["tools"]))throw Error("tools parameter is not supported in Gemini API.");if(void 0!==g(e,["generationConfig"]))throw Error("generationConfig parameter is not supported in Gemini API.");return{}}(r)),n}(this.apiClient,e);return r=h("{model}:countTokens",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["totalTokens"]);null!=n&&m(t,["totalTokens"],n);let l=g(e,["cachedContentTokenCount"]);return null!=l&&m(t,["cachedContentTokenCount"],l),t}(e),n=new b;return Object.assign(n,t),n})}}async computeTokens(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI()){let r=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["contents"]);if(null!=i){let e=K(i);Array.isArray(e)&&(e=e.map(e=>eY(e))),m(n,["contents"],e)}let r=g(t,["config"]);return null!=r&&m(n,["config"],r),n}(this.apiClient,e);return l=h("{model}:computeTokens",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["tokensInfo"]);return null!=n&&m(t,["tokensInfo"],n),t}(e),n=new O;return Object.assign(n,t),n})}throw Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);let r=g(t,["image"]);null!=r&&m(n,["instances[0]","image"],eK(r));let o=g(t,["video"]);null!=o&&m(n,["instances[0]","video"],function(e){let t={},n=g(e,["uri"]);null!=n&&m(t,["gcsUri"],n);let l=g(e,["videoBytes"]);null!=l&&m(t,["bytesBase64Encoded"],el(l));let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(o));let a=g(t,["config"]);return null!=a&&m(n,["config"],function(e,t){let n=g(e,["numberOfVideos"]);void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n);let l=g(e,["outputGcsUri"]);void 0!==t&&null!=l&&m(t,["parameters","storageUri"],l);let i=g(e,["fps"]);void 0!==t&&null!=i&&m(t,["parameters","fps"],i);let r=g(e,["durationSeconds"]);void 0!==t&&null!=r&&m(t,["parameters","durationSeconds"],r);let o=g(e,["seed"]);void 0!==t&&null!=o&&m(t,["parameters","seed"],o);let a=g(e,["aspectRatio"]);void 0!==t&&null!=a&&m(t,["parameters","aspectRatio"],a);let u=g(e,["resolution"]);void 0!==t&&null!=u&&m(t,["parameters","resolution"],u);let s=g(e,["personGeneration"]);void 0!==t&&null!=s&&m(t,["parameters","personGeneration"],s);let c=g(e,["pubsubTopic"]);void 0!==t&&null!=c&&m(t,["parameters","pubsubTopic"],c);let p=g(e,["negativePrompt"]);void 0!==t&&null!=p&&m(t,["parameters","negativePrompt"],p);let d=g(e,["enhancePrompt"]);void 0!==t&&null!=d&&m(t,["parameters","enhancePrompt"],d);let f=g(e,["generateAudio"]);void 0!==t&&null!=f&&m(t,["parameters","generateAudio"],f);let h=g(e,["lastFrame"]);void 0!==t&&null!=h&&m(t,["instances[0]","lastFrame"],eK(h));let y=g(e,["compressionQuality"]);return void 0!==t&&null!=y&&m(t,["parameters","compressionQuality"],y),{}}(a,n)),n}(this.apiClient,e);return r=h("{model}:predictLongRunning",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>(function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["metadata"]);null!=l&&m(t,["metadata"],l);let i=g(e,["done"]);null!=i&&m(t,["done"],i);let r=g(e,["error"]);null!=r&&m(t,["error"],r);let o=g(e,["response"]);return null!=o&&m(t,["response"],function(e){let t={},n=g(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["_self"]);return null!=n&&m(t,["video"],function(e){let t={},n=g(e,["gcsUri"]);null!=n&&m(t,["uri"],n);let l=g(e,["bytesBase64Encoded"]);null!=l&&m(t,["videoBytes"],el(l));let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(n)),t})(e))),m(t,["generatedVideos"],e)}let l=g(e,["raiMediaFilteredCount"]);null!=l&&m(t,["raiMediaFilteredCount"],l);let i=g(e,["raiMediaFilteredReasons"]);return null!=i&&m(t,["raiMediaFilteredReasons"],i),t}(o)),t})(e))}{let t=function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["_url","model"],U(e,l));let i=g(t,["prompt"]);null!=i&&m(n,["instances[0]","prompt"],i);let r=g(t,["image"]);if(null!=r&&m(n,["instances[0]","image"],function(e){let t={};if(void 0!==g(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");let n=g(e,["imageBytes"]);null!=n&&m(t,["bytesBase64Encoded"],el(n));let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r)),void 0!==g(t,["video"]))throw Error("video parameter is not supported in Gemini API.");let o=g(t,["config"]);return null!=o&&m(n,["config"],function(e,t){let n=g(e,["numberOfVideos"]);if(void 0!==t&&null!=n&&m(t,["parameters","sampleCount"],n),void 0!==g(e,["outputGcsUri"]))throw Error("outputGcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["fps"]))throw Error("fps parameter is not supported in Gemini API.");let l=g(e,["durationSeconds"]);if(void 0!==t&&null!=l&&m(t,["parameters","durationSeconds"],l),void 0!==g(e,["seed"]))throw Error("seed parameter is not supported in Gemini API.");let i=g(e,["aspectRatio"]);if(void 0!==t&&null!=i&&m(t,["parameters","aspectRatio"],i),void 0!==g(e,["resolution"]))throw Error("resolution parameter is not supported in Gemini API.");let r=g(e,["personGeneration"]);if(void 0!==t&&null!=r&&m(t,["parameters","personGeneration"],r),void 0!==g(e,["pubsubTopic"]))throw Error("pubsubTopic parameter is not supported in Gemini API.");let o=g(e,["negativePrompt"]);void 0!==t&&null!=o&&m(t,["parameters","negativePrompt"],o);let a=g(e,["enhancePrompt"]);if(void 0!==t&&null!=a&&m(t,["parameters","enhancePrompt"],a),void 0!==g(e,["generateAudio"]))throw Error("generateAudio parameter is not supported in Gemini API.");if(void 0!==g(e,["lastFrame"]))throw Error("lastFrame parameter is not supported in Gemini API.");if(void 0!==g(e,["compressionQuality"]))throw Error("compressionQuality parameter is not supported in Gemini API.");return{}}(o,n)),n}(this.apiClient,e);return r=h("{model}:predictLongRunning",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"POST",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>(function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["metadata"]);null!=l&&m(t,["metadata"],l);let i=g(e,["done"]);null!=i&&m(t,["done"],i);let r=g(e,["error"]);null!=r&&m(t,["error"],r);let o=g(e,["response","generateVideoResponse"]);return null!=o&&m(t,["response"],function(e){let t={},n=g(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["_self"]);return null!=n&&m(t,["video"],function(e){let t={},n=g(e,["video","uri"]);null!=n&&m(t,["uri"],n);let l=g(e,["video","encodedVideo"]);null!=l&&m(t,["videoBytes"],el(l));let i=g(e,["encoding"]);return null!=i&&m(t,["mimeType"],i),t}(n)),t})(e))),m(t,["generatedVideos"],e)}let l=g(e,["raiMediaFilteredCount"]);null!=l&&m(t,["raiMediaFilteredCount"],l);let i=g(e,["raiMediaFilteredReasons"]);return null!=i&&m(t,["raiMediaFilteredReasons"],i),t}(o)),t})(e))}}}function td(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["metadata"]);null!=l&&m(t,["metadata"],l);let i=g(e,["done"]);null!=i&&m(t,["done"],i);let r=g(e,["error"]);null!=r&&m(t,["error"],r);let o=g(e,["response"]);return null!=o&&m(t,["response"],function(e){let t={},n=g(e,["videos"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["_self"]);return null!=n&&m(t,["video"],function(e){let t={},n=g(e,["gcsUri"]);null!=n&&m(t,["uri"],n);let l=g(e,["bytesBase64Encoded"]);null!=l&&m(t,["videoBytes"],el(l));let i=g(e,["mimeType"]);return null!=i&&m(t,["mimeType"],i),t}(n)),t})(e))),m(t,["generatedVideos"],e)}let l=g(e,["raiMediaFilteredCount"]);null!=l&&m(t,["raiMediaFilteredCount"],l);let i=g(e,["raiMediaFilteredReasons"]);return null!=i&&m(t,["raiMediaFilteredReasons"],i),t}(o)),t}class tf extends f{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,n=e.config;if(void 0===t.name||""===t.name)throw Error("Operation name is required.");if(!this.apiClient.isVertexAI())return this.getVideosOperationInternal({operationName:t.name,config:n});{let e,l=t.name.split("/operations/")[0];return n&&"httpOptions"in n&&(e=n.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:l,config:{httpOptions:e}})}}async getVideosOperationInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e){let t={},n=g(e,["operationName"]);null!=n&&m(t,["_url","operationName"],n);let l=g(e,["config"]);return null!=l&&m(t,["config"],l),t}(e);return r=h("{operationName}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>td(e))}{let t=function(e){let t={},n=g(e,["operationName"]);null!=n&&m(t,["_url","operationName"],n);let l=g(e,["config"]);return null!=l&&m(t,["config"],l),t}(e);return r=h("{operationName}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>(function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["metadata"]);null!=l&&m(t,["metadata"],l);let i=g(e,["done"]);null!=i&&m(t,["done"],i);let r=g(e,["error"]);null!=r&&m(t,["error"],r);let o=g(e,["response","generateVideoResponse"]);return null!=o&&m(t,["response"],function(e){let t={},n=g(e,["generatedSamples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["_self"]);return null!=n&&m(t,["video"],function(e){let t={},n=g(e,["video","uri"]);null!=n&&m(t,["uri"],n);let l=g(e,["video","encodedVideo"]);null!=l&&m(t,["videoBytes"],el(l));let i=g(e,["encoding"]);return null!=i&&m(t,["mimeType"],i),t}(n)),t})(e))),m(t,["generatedVideos"],e)}let l=g(e,["raiMediaFilteredCount"]);null!=l&&m(t,["raiMediaFilteredCount"],l);let i=g(e,["raiMediaFilteredReasons"]);return null!=i&&m(t,["raiMediaFilteredReasons"],i),t}(o)),t})(e))}}async fetchPredictVideosOperationInternal(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI()){let r=function(e){let t={},n=g(e,["operationName"]);null!=n&&m(t,["operationName"],n);let l=g(e,["resourceName"]);null!=l&&m(t,["_url","resourceName"],l);let i=g(e,["config"]);return null!=i&&m(t,["config"],i),t}(e);return l=h("{resourceName}:fetchPredictOperation",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>td(e))}throw Error("This method is only supported by the Vertex AI.")}}function th(e){let t={},n=g(e,["prebuiltVoiceConfig"]);return null!=n&&m(t,["prebuiltVoiceConfig"],function(e){let t={},n=g(e,["voiceName"]);return null!=n&&m(t,["voiceName"],n),t}(n)),t}class tm extends f{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI())throw Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let r=function(e,t){let n={},l=g(t,["config"]);return null!=l&&m(n,["config"],function(e,t,n){let l=g(t,["expireTime"]);void 0!==n&&null!=l&&m(n,["expireTime"],l);let i=g(t,["newSessionExpireTime"]);void 0!==n&&null!=i&&m(n,["newSessionExpireTime"],i);let r=g(t,["uses"]);void 0!==n&&null!=r&&m(n,["uses"],r);let o=g(t,["liveConnectConstraints"]);void 0!==n&&null!=o&&m(n,["bidiGenerateContentSetup"],function(e,t){let n={},l=g(t,["model"]);null!=l&&m(n,["setup","model"],U(e,l));let i=g(t,["config"]);return null!=i&&m(n,["config"],function(e,t){let n=g(e,["generationConfig"]);void 0!==t&&null!=n&&m(t,["setup","generationConfig"],n);let l=g(e,["responseModalities"]);void 0!==t&&null!=l&&m(t,["setup","generationConfig","responseModalities"],l);let i=g(e,["temperature"]);void 0!==t&&null!=i&&m(t,["setup","generationConfig","temperature"],i);let r=g(e,["topP"]);void 0!==t&&null!=r&&m(t,["setup","generationConfig","topP"],r);let o=g(e,["topK"]);void 0!==t&&null!=o&&m(t,["setup","generationConfig","topK"],o);let a=g(e,["maxOutputTokens"]);void 0!==t&&null!=a&&m(t,["setup","generationConfig","maxOutputTokens"],a);let u=g(e,["mediaResolution"]);void 0!==t&&null!=u&&m(t,["setup","generationConfig","mediaResolution"],u);let s=g(e,["seed"]);void 0!==t&&null!=s&&m(t,["setup","generationConfig","seed"],s);let c=g(e,["speechConfig"]);void 0!==t&&null!=c&&m(t,["setup","generationConfig","speechConfig"],function(e){let t={},n=g(e,["voiceConfig"]);null!=n&&m(t,["voiceConfig"],th(n));let l=g(e,["multiSpeakerVoiceConfig"]);null!=l&&m(t,["multiSpeakerVoiceConfig"],function(e){let t={},n=g(e,["speakerVoiceConfigs"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["speaker"]);null!=n&&m(t,["speaker"],n);let l=g(e,["voiceConfig"]);return null!=l&&m(t,["voiceConfig"],th(l)),t})(e))),m(t,["speakerVoiceConfigs"],e)}return t}(l));let i=g(e,["languageCode"]);return null!=i&&m(t,["languageCode"],i),t}(Q(c)));let p=g(e,["enableAffectiveDialog"]);void 0!==t&&null!=p&&m(t,["setup","generationConfig","enableAffectiveDialog"],p);let d=g(e,["systemInstruction"]);void 0!==t&&null!=d&&m(t,["setup","systemInstruction"],function(e){let t={},n=g(e,["parts"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["videoMetadata"]);null!=n&&m(t,["videoMetadata"],function(e){let t={},n=g(e,["fps"]);null!=n&&m(t,["fps"],n);let l=g(e,["endOffset"]);null!=l&&m(t,["endOffset"],l);let i=g(e,["startOffset"]);return null!=i&&m(t,["startOffset"],i),t}(n));let l=g(e,["thought"]);null!=l&&m(t,["thought"],l);let i=g(e,["inlineData"]);null!=i&&m(t,["inlineData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["data"]);null!=n&&m(t,["data"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(i));let r=g(e,["fileData"]);null!=r&&m(t,["fileData"],function(e){let t={};if(void 0!==g(e,["displayName"]))throw Error("displayName parameter is not supported in Gemini API.");let n=g(e,["fileUri"]);null!=n&&m(t,["fileUri"],n);let l=g(e,["mimeType"]);return null!=l&&m(t,["mimeType"],l),t}(r));let o=g(e,["thoughtSignature"]);null!=o&&m(t,["thoughtSignature"],o);let a=g(e,["codeExecutionResult"]);null!=a&&m(t,["codeExecutionResult"],a);let u=g(e,["executableCode"]);null!=u&&m(t,["executableCode"],u);let s=g(e,["functionCall"]);null!=s&&m(t,["functionCall"],s);let c=g(e,["functionResponse"]);null!=c&&m(t,["functionResponse"],c);let p=g(e,["text"]);return null!=p&&m(t,["text"],p),t})(e))),m(t,["parts"],e)}let l=g(e,["role"]);return null!=l&&m(t,["role"],l),t}($(d)));let f=g(e,["tools"]);if(void 0!==t&&null!=f){let e=ee(f);Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["functionDeclarations"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["behavior"]);null!=n&&m(t,["behavior"],n);let l=g(e,["description"]);null!=l&&m(t,["description"],l);let i=g(e,["name"]);null!=i&&m(t,["name"],i);let r=g(e,["parameters"]);null!=r&&m(t,["parameters"],r);let o=g(e,["parametersJsonSchema"]);null!=o&&m(t,["parametersJsonSchema"],o);let a=g(e,["response"]);null!=a&&m(t,["response"],a);let u=g(e,["responseJsonSchema"]);return null!=u&&m(t,["responseJsonSchema"],u),t})(e))),m(t,["functionDeclarations"],e)}if(void 0!==g(e,["retrieval"]))throw Error("retrieval parameter is not supported in Gemini API.");let l=g(e,["googleSearch"]);null!=l&&m(t,["googleSearch"],function(e){let t={},n=g(e,["timeRangeFilter"]);return null!=n&&m(t,["timeRangeFilter"],function(e){let t={},n=g(e,["startTime"]);null!=n&&m(t,["startTime"],n);let l=g(e,["endTime"]);return null!=l&&m(t,["endTime"],l),t}(n)),t}(l));let i=g(e,["googleSearchRetrieval"]);if(null!=i&&m(t,["googleSearchRetrieval"],function(e){let t={},n=g(e,["dynamicRetrievalConfig"]);return null!=n&&m(t,["dynamicRetrievalConfig"],function(e){let t={},n=g(e,["mode"]);null!=n&&m(t,["mode"],n);let l=g(e,["dynamicThreshold"]);return null!=l&&m(t,["dynamicThreshold"],l),t}(n)),t}(i)),void 0!==g(e,["enterpriseWebSearch"]))throw Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(void 0!==g(e,["googleMaps"]))throw Error("googleMaps parameter is not supported in Gemini API.");null!=g(e,["urlContext"])&&m(t,["urlContext"],{});let r=g(e,["codeExecution"]);null!=r&&m(t,["codeExecution"],r);let o=g(e,["computerUse"]);return null!=o&&m(t,["computerUse"],o),t})(Z(e)))),m(t,["setup","tools"],e)}let h=g(e,["sessionResumption"]);void 0!==t&&null!=h&&m(t,["setup","sessionResumption"],function(e){let t={},n=g(e,["handle"]);if(null!=n&&m(t,["handle"],n),void 0!==g(e,["transparent"]))throw Error("transparent parameter is not supported in Gemini API.");return t}(h));let y=g(e,["inputAudioTranscription"]);void 0!==t&&null!=y&&m(t,["setup","inputAudioTranscription"],{});let v=g(e,["outputAudioTranscription"]);void 0!==t&&null!=v&&m(t,["setup","outputAudioTranscription"],{});let _=g(e,["realtimeInputConfig"]);void 0!==t&&null!=_&&m(t,["setup","realtimeInputConfig"],function(e){let t={},n=g(e,["automaticActivityDetection"]);null!=n&&m(t,["automaticActivityDetection"],function(e){let t={},n=g(e,["disabled"]);null!=n&&m(t,["disabled"],n);let l=g(e,["startOfSpeechSensitivity"]);null!=l&&m(t,["startOfSpeechSensitivity"],l);let i=g(e,["endOfSpeechSensitivity"]);null!=i&&m(t,["endOfSpeechSensitivity"],i);let r=g(e,["prefixPaddingMs"]);null!=r&&m(t,["prefixPaddingMs"],r);let o=g(e,["silenceDurationMs"]);return null!=o&&m(t,["silenceDurationMs"],o),t}(n));let l=g(e,["activityHandling"]);null!=l&&m(t,["activityHandling"],l);let i=g(e,["turnCoverage"]);return null!=i&&m(t,["turnCoverage"],i),t}(_));let C=g(e,["contextWindowCompression"]);void 0!==t&&null!=C&&m(t,["setup","contextWindowCompression"],function(e){let t={},n=g(e,["triggerTokens"]);null!=n&&m(t,["triggerTokens"],n);let l=g(e,["slidingWindow"]);return null!=l&&m(t,["slidingWindow"],function(e){let t={},n=g(e,["targetTokens"]);return null!=n&&m(t,["targetTokens"],n),t}(l)),t}(C));let E=g(e,["proactivity"]);return void 0!==t&&null!=E&&m(t,["setup","proactivity"],function(e){let t={},n=g(e,["proactiveAudio"]);return null!=n&&m(t,["proactiveAudio"],n),t}(E)),{}}(i,n)),n}(e,o));let a=g(t,["lockAdditionalFields"]);return void 0!==n&&null!=a&&m(n,["fieldMask"],a),{}}(e,l,n)),n}(this.apiClient,e);l=h("auth_tokens",r._url),i=r._query,delete r.config,delete r._url,delete r._query;let o=function(e,t){let n=null,l=e.bidiGenerateContentSetup;if("object"==typeof l&&null!==l&&"setup"in l){let t=l.setup;"object"==typeof t&&null!==t?(e.bidiGenerateContentSetup=t,n=t):delete e.bidiGenerateContentSetup}else void 0!==l&&delete e.bidiGenerateContentSetup;let i=e.fieldMask;if(n){let l=function(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let l=e[n];if("object"==typeof l&&null!=l&&Object.keys(l).length>0){let e=Object.keys(l).map(e=>`${n}.${e}`);t.push(...e)}else t.push(n)}return t.join(",")}(n);if(Array.isArray(null==t?void 0:t.lockAdditionalFields)&&(null==t?void 0:t.lockAdditionalFields.length)===0)l?e.fieldMask=l:delete e.fieldMask;else if((null==t?void 0:t.lockAdditionalFields)&&t.lockAdditionalFields.length>0&&null!==i&&Array.isArray(i)&&i.length>0){let t=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],n=[];i.length>0&&(n=i.map(e=>t.includes(e)?`generationConfig.${e}`:e));let r=[];l&&r.push(l),n.length>0&&r.push(...n),r.length>0?e.fieldMask=r.join(","):delete e.fieldMask}else delete e.fieldMask}else null!==i&&Array.isArray(i)&&i.length>0?e.fieldMask=i.join(","):delete e.fieldMask;return e}(r,e.config);return this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>(function(e){let t={},n=g(e,["name"]);return null!=n&&m(t,["name"],n),t})(e))}}}function tg(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["state"]);null!=l&&m(t,["state"],en(l));let i=g(e,["createTime"]);null!=i&&m(t,["createTime"],i);let r=g(e,["tuningTask","startTime"]);null!=r&&m(t,["startTime"],r);let o=g(e,["tuningTask","completeTime"]);null!=o&&m(t,["endTime"],o);let a=g(e,["updateTime"]);null!=a&&m(t,["updateTime"],a);let u=g(e,["description"]);null!=u&&m(t,["description"],u);let s=g(e,["baseModel"]);null!=s&&m(t,["baseModel"],s);let c=g(e,["_self"]);null!=c&&m(t,["tunedModel"],function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["model"],n);let l=g(e,["name"]);return null!=l&&m(t,["endpoint"],l),t}(c));let p=g(e,["distillationSpec"]);null!=p&&m(t,["distillationSpec"],p);let d=g(e,["experiment"]);null!=d&&m(t,["experiment"],d);let f=g(e,["labels"]);null!=f&&m(t,["labels"],f);let h=g(e,["pipelineJob"]);null!=h&&m(t,["pipelineJob"],h);let y=g(e,["satisfiesPzi"]);null!=y&&m(t,["satisfiesPzi"],y);let v=g(e,["satisfiesPzs"]);null!=v&&m(t,["satisfiesPzs"],v);let _=g(e,["serviceAccount"]);null!=_&&m(t,["serviceAccount"],_);let C=g(e,["tunedModelDisplayName"]);return null!=C&&m(t,["tunedModelDisplayName"],C),t}function ty(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["state"]);null!=l&&m(t,["state"],en(l));let i=g(e,["createTime"]);null!=i&&m(t,["createTime"],i);let r=g(e,["startTime"]);null!=r&&m(t,["startTime"],r);let o=g(e,["endTime"]);null!=o&&m(t,["endTime"],o);let a=g(e,["updateTime"]);null!=a&&m(t,["updateTime"],a);let u=g(e,["error"]);null!=u&&m(t,["error"],u);let s=g(e,["description"]);null!=s&&m(t,["description"],s);let c=g(e,["baseModel"]);null!=c&&m(t,["baseModel"],c);let p=g(e,["tunedModel"]);null!=p&&m(t,["tunedModel"],function(e){let t={},n=g(e,["model"]);null!=n&&m(t,["model"],n);let l=g(e,["endpoint"]);null!=l&&m(t,["endpoint"],l);let i=g(e,["checkpoints"]);if(null!=i){let e=i;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["checkpointId"]);null!=n&&m(t,["checkpointId"],n);let l=g(e,["epoch"]);null!=l&&m(t,["epoch"],l);let i=g(e,["step"]);null!=i&&m(t,["step"],i);let r=g(e,["endpoint"]);return null!=r&&m(t,["endpoint"],r),t})(e))),m(t,["checkpoints"],e)}return t}(p));let d=g(e,["supervisedTuningSpec"]);null!=d&&m(t,["supervisedTuningSpec"],d);let f=g(e,["tuningDataStats"]);null!=f&&m(t,["tuningDataStats"],f);let h=g(e,["encryptionSpec"]);null!=h&&m(t,["encryptionSpec"],h);let y=g(e,["partnerModelTuningSpec"]);null!=y&&m(t,["partnerModelTuningSpec"],y);let v=g(e,["distillationSpec"]);null!=v&&m(t,["distillationSpec"],v);let _=g(e,["experiment"]);null!=_&&m(t,["experiment"],_);let C=g(e,["labels"]);null!=C&&m(t,["labels"],C);let E=g(e,["pipelineJob"]);null!=E&&m(t,["pipelineJob"],E);let T=g(e,["satisfiesPzi"]);null!=T&&m(t,["satisfiesPzi"],T);let A=g(e,["satisfiesPzs"]);null!=A&&m(t,["satisfiesPzs"],A);let S=g(e,["serviceAccount"]);null!=S&&m(t,["serviceAccount"],S);let b=g(e,["tunedModelDisplayName"]);return null!=b&&m(t,["tunedModelDisplayName"],b),t}class tv extends f{constructor(e){super(),this.apiClient=e,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new eg(lF.PAGED_ITEM_TUNING_JOBS,e=>this.listInternal(e),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{let t=await this.tuneMldevInternal(e),n="";return void 0!==t.metadata&&void 0!==t.metadata.tunedModel?n=t.metadata.tunedModel:void 0!==t.name&&t.name.includes("/operations/")&&(n=t.name.split("/operations/")[0]),{name:n,state:lg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["_url","name"],n);let l=g(e,["config"]);return null!=l&&m(t,["config"],l),t}(e);return r=h("{name}",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>ty(e))}{let t=function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["_url","name"],n);let l=g(e,["config"]);return null!=l&&m(t,["config"],l),t}(e);return r=h("{name}",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>tg(e))}}async listInternal(e){var t,n,l,i;let r="",o={};if(this.apiClient.isVertexAI()){let l=function(e){let t={},n=g(e,["config"]);return null!=n&&m(t,["config"],function(e,t){let n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);let l=g(e,["pageToken"]);void 0!==t&&null!=l&&m(t,["_query","pageToken"],l);let i=g(e,["filter"]);return void 0!==t&&null!=i&&m(t,["_query","filter"],i),{}}(n,t)),t}(e);return r=h("tuningJobs",l._url),o=l._query,delete l.config,delete l._url,delete l._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"GET",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["tuningJobs"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>ty(e))),m(t,["tuningJobs"],e)}return t}(e),n=new I;return Object.assign(n,t),n})}{let t=function(e){let t={},n=g(e,["config"]);return null!=n&&m(t,["config"],function(e,t){let n=g(e,["pageSize"]);void 0!==t&&null!=n&&m(t,["_query","pageSize"],n);let l=g(e,["pageToken"]);void 0!==t&&null!=l&&m(t,["_query","pageToken"],l);let i=g(e,["filter"]);return void 0!==t&&null!=i&&m(t,["_query","filter"],i),{}}(n,t)),t}(e);return r=h("tunedModels",t._url),o=t._query,delete t.config,delete t._url,delete t._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(t),httpMethod:"GET",httpOptions:null==(l=e.config)?void 0:l.httpOptions,abortSignal:null==(i=e.config)?void 0:i.abortSignal}).then(e=>e.json()).then(e=>{let t=function(e){let t={},n=g(e,["nextPageToken"]);null!=n&&m(t,["nextPageToken"],n);let l=g(e,["tunedModels"]);if(null!=l){let e=l;Array.isArray(e)&&(e=e.map(e=>tg(e))),m(t,["tuningJobs"],e)}return t}(e),n=new I;return Object.assign(n,t),n})}}async tuneInternal(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI()){let r=function(e){let t={},n=g(e,["baseModel"]);null!=n&&m(t,["baseModel"],n);let l=g(e,["trainingDataset"]);null!=l&&m(t,["supervisedTuningSpec","trainingDatasetUri"],function(e,t){let n=g(e,["gcsUri"]);void 0!==t&&null!=n&&m(t,["supervisedTuningSpec","trainingDatasetUri"],n);let l=g(e,["vertexDatasetResource"]);if(void 0!==t&&null!=l&&m(t,["supervisedTuningSpec","trainingDatasetUri"],l),void 0!==g(e,["examples"]))throw Error("examples parameter is not supported in Vertex AI.");return{}}(l,t));let i=g(e,["config"]);return null!=i&&m(t,["config"],function(e,t){let n={},l=g(e,["validationDataset"]);void 0!==t&&null!=l&&m(t,["supervisedTuningSpec"],function(e,t){let n={},l=g(e,["gcsUri"]);null!=l&&m(n,["validationDatasetUri"],l);let i=g(e,["vertexDatasetResource"]);return void 0!==t&&null!=i&&m(t,["supervisedTuningSpec","trainingDatasetUri"],i),n}(l,n));let i=g(e,["tunedModelDisplayName"]);void 0!==t&&null!=i&&m(t,["tunedModelDisplayName"],i);let r=g(e,["description"]);void 0!==t&&null!=r&&m(t,["description"],r);let o=g(e,["epochCount"]);void 0!==t&&null!=o&&m(t,["supervisedTuningSpec","hyperParameters","epochCount"],o);let a=g(e,["learningRateMultiplier"]);void 0!==t&&null!=a&&m(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);let u=g(e,["exportLastCheckpointOnly"]);void 0!==t&&null!=u&&m(t,["supervisedTuningSpec","exportLastCheckpointOnly"],u);let s=g(e,["adapterSize"]);if(void 0!==t&&null!=s&&m(t,["supervisedTuningSpec","hyperParameters","adapterSize"],s),void 0!==g(e,["batchSize"]))throw Error("batchSize parameter is not supported in Vertex AI.");if(void 0!==g(e,["learningRate"]))throw Error("learningRate parameter is not supported in Vertex AI.");return n}(i,t)),t}(e);return l=h("tuningJobs",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>ty(e))}throw Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let l="",i={};if(this.apiClient.isVertexAI())throw Error("This method is only supported by the Gemini Developer API.");{let r=function(e){let t={},n=g(e,["baseModel"]);null!=n&&m(t,["baseModel"],n);let l=g(e,["trainingDataset"]);null!=l&&m(t,["tuningTask","trainingData"],function(e){let t={};if(void 0!==g(e,["gcsUri"]))throw Error("gcsUri parameter is not supported in Gemini API.");if(void 0!==g(e,["vertexDatasetResource"]))throw Error("vertexDatasetResource parameter is not supported in Gemini API.");let n=g(e,["examples"]);if(null!=n){let e=n;Array.isArray(e)&&(e=e.map(e=>(function(e){let t={},n=g(e,["textInput"]);null!=n&&m(t,["textInput"],n);let l=g(e,["output"]);return null!=l&&m(t,["output"],l),t})(e))),m(t,["examples","examples"],e)}return t}(l));let i=g(e,["config"]);return null!=i&&m(t,["config"],function(e,t){let n={};if(void 0!==g(e,["validationDataset"]))throw Error("validationDataset parameter is not supported in Gemini API.");let l=g(e,["tunedModelDisplayName"]);if(void 0!==t&&null!=l&&m(t,["displayName"],l),void 0!==g(e,["description"]))throw Error("description parameter is not supported in Gemini API.");let i=g(e,["epochCount"]);void 0!==t&&null!=i&&m(t,["tuningTask","hyperparameters","epochCount"],i);let r=g(e,["learningRateMultiplier"]);if(null!=r&&m(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),void 0!==g(e,["exportLastCheckpointOnly"]))throw Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(void 0!==g(e,["adapterSize"]))throw Error("adapterSize parameter is not supported in Gemini API.");let o=g(e,["batchSize"]);void 0!==t&&null!=o&&m(t,["tuningTask","hyperparameters","batchSize"],o);let a=g(e,["learningRate"]);return void 0!==t&&null!=a&&m(t,["tuningTask","hyperparameters","learningRate"],a),n}(i,t)),t}(e);return l=h("tunedModels",r._url),i=r._query,delete r.config,delete r._url,delete r._query,this.apiClient.request({path:l,queryParams:i,body:JSON.stringify(r),httpMethod:"POST",httpOptions:null==(t=e.config)?void 0:t.httpOptions,abortSignal:null==(n=e.config)?void 0:n.abortSignal}).then(e=>e.json()).then(e=>(function(e){let t={},n=g(e,["name"]);null!=n&&m(t,["name"],n);let l=g(e,["metadata"]);null!=l&&m(t,["metadata"],l);let i=g(e,["done"]);null!=i&&m(t,["done"],i);let r=g(e,["error"]);return null!=r&&m(t,["error"],r),t})(e))}}}class t_{async download(e,t){throw Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const tC="x-goog-upload-status";async function tE(e,t,n){var l,i,r;let o=0,a=0,u=new y(new Response),s="upload";for(o=e.size;a<o;){let r=Math.min(8388608,o-a),c=e.slice(a,a+r);a+r>=o&&(s+=", finalize");let p=0,d=1e3;for(;p<3&&(null==(l=null==(u=await n.request({path:"",body:c,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":s,"X-Goog-Upload-Offset":String(a),"Content-Length":String(r)}}}))?void 0:u.headers)||!l[tC]);)p++,await function(e){return new Promise(t=>setTimeout(t,e))}(d),d*=2;if(a+=r,(null==(i=null==u?void 0:u.headers)?void 0:i[tC])!=="active")break;if(o<=a)throw Error("All content has been uploaded, but the upload status is not finalized.")}let c=await (null==u?void 0:u.json());if((null==(r=null==u?void 0:u.headers)?void 0:r[tC])!=="final")throw Error("Failed to upload file: Upload status is not finalized.");return c.file}async function tT(e){return{size:e.size,type:e.type}}class tA{async upload(e,t,n){if("string"==typeof e)throw Error("File path is not supported in browser uploader.");return await tE(e,t,n)}async stat(e){if("string"!=typeof e)return await tT(e);throw Error("File path is not supported in browser uploader.")}}class tS{create(e,t,n){return new tb(e,t,n)}}class tb{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.send(e)}close(){if(void 0===this.ws)throw Error("WebSocket is not connected");this.ws.close()}}const tO="x-goog-api-key";class tI{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(null===e.get(tO)){if(this.apiKey.startsWith("auth_tokens/"))throw Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw Error("API key is missing. Please provide a valid API key.");e.append(tO,this.apiKey)}}}var tx={value:()=>{}};function tw(){for(var e,t=0,n=arguments.length,l={};t<n;++t){if(!(e=arguments[t]+"")||e in l||/[\s.]/.test(e))throw Error("illegal type: "+e);l[e]=[]}return new tN(l)}function tN(e){this._=e}function tM(e,t,n){for(var l=0,i=e.length;l<i;++l)if(e[l].name===t){e[l]=tx,e=e.slice(0,l).concat(e.slice(l+1));break}return null!=n&&e.push({name:t,value:n}),e}function tR(){}function tP(e){return null==e?tR:function(){return this.querySelector(e)}}function tD(){return[]}function tk(e){return null==e?tD:function(){return this.querySelectorAll(e)}}function tU(e){return function(){return this.matches(e)}}function tq(e){return function(t){return t.matches(e)}}tN.prototype=tw.prototype={constructor:tN,on:function(e,t){var n,l=this._,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!l.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((n=(e=i[r]).type)&&(n=function(e,t){for(var n,l=0,i=e.length;l<i;++l)if((n=e[l]).name===t)return n.value}(l[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++r<o;)if(n=(e=i[r]).type)l[n]=tM(l[n],e.name,t);else if(null==t)for(n in l)l[n]=tM(l[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tN(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,l,i=Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(l=this._[e],r=0,n=l.length;r<n;++r)l[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var l=this._[e],i=0,r=l.length;i<r;++i)l[i].value.apply(t,n)}};var tL=Array.prototype.find;function tG(){return this.firstElementChild}var tF=Array.prototype.filter;function tj(){return Array.from(this.children)}function tB(e){return Array(e.length)}function tV(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function tJ(e,t,n,l,i,r){for(var o,a=0,u=t.length,s=r.length;a<s;++a)(o=t[a])?(o.__data__=r[a],l[a]=o):n[a]=new tV(e,r[a]);for(;a<u;++a)(o=t[a])&&(i[a]=o)}function tH(e,t,n,l,i,r,o){var a,u,s,c=new Map,p=t.length,d=r.length,f=Array(p);for(a=0;a<p;++a)(u=t[a])&&(f[a]=s=o.call(u,u.__data__,a,t)+"",c.has(s)?i[a]=u:c.set(s,u));for(a=0;a<d;++a)s=o.call(e,r[a],a,r)+"",(u=c.get(s))?(l[a]=u,u.__data__=r[a],c.delete(s)):n[a]=new tV(e,r[a]);for(a=0;a<p;++a)(u=t[a])&&c.get(f[a])===u&&(i[a]=u)}function tY(e){return e.__data__}function t$(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}tV.prototype={constructor:tV,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var tW="http://www.w3.org/1999/xhtml",tK={svg:"http://www.w3.org/2000/svg",xhtml:tW,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tz(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),tK.hasOwnProperty(t)?{space:tK[t],local:e}:e}function tX(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function tQ(e,t){return e.style.getPropertyValue(t)||tX(e).getComputedStyle(e,null).getPropertyValue(t)}function tZ(e){return e.trim().split(/^|\s+/)}function t0(e){return e.classList||new t1(e)}function t1(e){this._node=e,this._names=tZ(e.getAttribute("class")||"")}function t2(e,t){for(var n=t0(e),l=-1,i=t.length;++l<i;)n.add(t[l])}function t5(e,t){for(var n=t0(e),l=-1,i=t.length;++l<i;)n.remove(t[l])}function t3(){this.textContent=""}function t8(){this.innerHTML=""}function t4(){this.nextSibling&&this.parentNode.appendChild(this)}function t6(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function t9(e){var t=tz(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===tW&&t.documentElement.namespaceURI===tW?t.createElement(e):t.createElementNS(n,e)}})(t)}function t7(){return null}function ne(){var e=this.parentNode;e&&e.removeChild(this)}function nt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nl(e){return function(){var t=this.__on;if(t){for(var n,l=0,i=-1,r=t.length;l<r;++l)(n=t[l],e.type&&n.type!==e.type||n.name!==e.name)?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function ni(e,t,n){return function(){var l,i=this.__on,r=function(e){t.call(this,e,this.__data__)};if(i){for(var o=0,a=i.length;o<a;++o)if((l=i[o]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=r,l.options=n),l.value=t;return}}this.addEventListener(e.type,r,n),l={type:e.type,name:e.name,value:t,listener:r,options:n},i?i.push(l):this.__on=[l]}}function nr(e,t,n){var l=tX(e),i=l.CustomEvent;"function"==typeof i?i=new i(t,n):(i=l.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}t1.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var no=[null];function na(e,t){this._groups=e,this._parents=t}function nu(){return new na([[document.documentElement]],no)}na.prototype=nu.prototype={constructor:na,select:function(e){"function"!=typeof e&&(e=tP(e));for(var t=this._groups,n=t.length,l=Array(n),i=0;i<n;++i)for(var r,o,a=t[i],u=a.length,s=l[i]=Array(u),c=0;c<u;++c)(r=a[c])&&(o=e.call(r,r.__data__,c,a))&&("__data__"in r&&(o.__data__=r.__data__),s[c]=o);return new na(l,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=tk(e);for(var n=this._groups,l=n.length,i=[],r=[],o=0;o<l;++o)for(var a,u=n[o],s=u.length,c=0;c<s;++c)(a=u[c])&&(i.push(e.call(a,a.__data__,c,u)),r.push(a));return new na(i,r)},selectChild:function(e){var t;return this.select(null==e?tG:(t="function"==typeof e?e:tq(e),function(){return tL.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?tj:(t="function"==typeof e?e:tq(e),function(){return tF.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=tU(e));for(var t=this._groups,n=t.length,l=Array(n),i=0;i<n;++i)for(var r,o=t[i],a=o.length,u=l[i]=[],s=0;s<a;++s)(r=o[s])&&e.call(r,r.__data__,s,o)&&u.push(r);return new na(l,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,tY);var n=t?tH:tJ,l=this._parents,i=this._groups;"function"!=typeof e&&(v=e,e=function(){return v});for(var r=i.length,o=Array(r),a=Array(r),u=Array(r),s=0;s<r;++s){var c=l[s],p=i[s],d=p.length,f="object"==typeof(y=e.call(c,c&&c.__data__,s,l))&&"length"in y?y:Array.from(y),h=f.length,m=a[s]=Array(h),g=o[s]=Array(h);n(c,p,m,g,u[s]=Array(d),f,t);for(var y,v,_,C,E=0,T=0;E<h;++E)if(_=m[E]){for(E>=T&&(T=E+1);!(C=g[T])&&++T<h;);_._next=C||null}}return(o=new na(o,l))._enter=a,o._exit=u,o},enter:function(){return new na(this._enter||this._groups.map(tB),this._parents)},exit:function(){return new na(this._exit||this._groups.map(tB),this._parents)},join:function(e,t,n){var l=this.enter(),i=this,r=this.exit();return"function"==typeof e?(l=e(l))&&(l=l.selection()):l=l.append(e+""),null!=t&&(i=t(i))&&(i=i.selection()),null==n?r.remove():n(r),l&&i?l.merge(i).order():i},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,l=t._groups,i=n.length,r=l.length,o=Math.min(i,r),a=Array(i),u=0;u<o;++u)for(var s,c=n[u],p=l[u],d=c.length,f=a[u]=Array(d),h=0;h<d;++h)(s=c[h]||p[h])&&(f[h]=s);for(;u<i;++u)a[u]=n[u];return new na(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var l,i=e[t],r=i.length-1,o=i[r];--r>=0;)(l=i[r])&&(o&&4^l.compareDocumentPosition(o)&&o.parentNode.insertBefore(l,o),o=l);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=t$);for(var n=this._groups,l=n.length,i=Array(l),r=0;r<l;++r){for(var o,a=n[r],u=a.length,s=i[r]=Array(u),c=0;c<u;++c)(o=a[c])&&(s[c]=o);s.sort(t)}return new na(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l=e[t],i=0,r=l.length;i<r;++i){var o=l[i];if(o)return o}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,l=t.length;n<l;++n)for(var i,r=t[n],o=0,a=r.length;o<a;++o)(i=r[o])&&e.call(i,i.__data__,o,r);return this},attr:function(e,t){var n=tz(e);if(arguments.length<2){var l=this.node();return n.local?l.getAttributeNS(n.space,n.local):l.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var l=t.apply(this,arguments);null==l?this.style.removeProperty(e):this.style.setProperty(e,l,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):tQ(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=tZ(e+"");if(arguments.length<2){for(var l=t0(this.node()),i=-1,r=n.length;++i<r;)if(!l.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?t2:t5)(this,e)}}:t?function(e){return function(){t2(this,e)}}:function(e){return function(){t5(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?t3:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?t8:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(t4)},lower:function(){return this.each(t6)},append:function(e){var t="function"==typeof e?e:t9(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:t9(e),l=null==t?t7:"function"==typeof t?t:tP(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),l.apply(this,arguments)||null)})},remove:function(){return this.each(ne)},clone:function(e){return this.select(e?nn:nt)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var l,i,r=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),o=r.length;if(arguments.length<2){var a=this.node().__on;if(a){for(var u,s=0,c=a.length;s<c;++s)for(l=0,u=a[s];l<o;++l)if((i=r[l]).type===u.type&&i.name===u.name)return u.value}return}for(l=0,a=t?ni:nl;l<o;++l)this.each(a(r[l],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return nr(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return nr(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var l,i=e[t],r=0,o=i.length;r<o;++r)(l=i[r])&&(yield l)}};var ns=(p("bYoiY"),p("bYoiY"));function nc(e,t,n,l,i){var r=e*e,o=r*e;return((1-3*e+3*r-o)*t+(4-6*r+3*o)*n+(1+3*e+3*r-3*o)*l+o*i)/6}var np=e=>()=>e;function nd(e,t){var n=t-e;return n?function(t){return e+t*n}:np(isNaN(e)?t:e)}var nf=function e(t){var n,l=1==(n=+t)?nd:function(e,t){var l,i,r;return t-e?(l=e,i=t,l=Math.pow(l,r=n),i=Math.pow(i,r)-l,r=1/r,function(e){return Math.pow(l+e*i,r)}):np(isNaN(e)?t:e)};function i(e,t){var n=l((e=(0,ns.rgb)(e)).r,(t=(0,ns.rgb)(t)).r),i=l(e.g,t.g),r=l(e.b,t.b),o=nd(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=i(t),e.b=r(t),e.opacity=o(t),e+""}}return i.gamma=e,i}(1);function nh(e){return function(t){var n,l,i=t.length,r=Array(i),o=Array(i),a=Array(i);for(n=0;n<i;++n)l=(0,ns.rgb)(t[n]),r[n]=l.r||0,o[n]=l.g||0,a[n]=l.b||0;return r=e(r),o=e(o),a=e(a),l.opacity=1,function(e){return l.r=r(e),l.g=o(e),l.b=a(e),l+""}}}function nm(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}nh(function(e){var t=e.length-1;return function(n){var l=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[l],r=e[l+1],o=l>0?e[l-1]:2*i-r,a=l<t-1?e[l+2]:2*r-i;return nc((n-l/t)*t,o,i,r,a)}}),nh(function(e){var t=e.length;return function(n){var l=Math.floor(((n%=1)<0?++n:n)*t),i=e[(l+t-1)%t],r=e[l%t],o=e[(l+1)%t],a=e[(l+2)%t];return nc((n-l/t)*t,i,r,o,a)}});var ng=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ny=RegExp(ng.source,"g");function nv(e,t){var n,l,i,r,o,a=ng.lastIndex=ny.lastIndex=0,u=-1,s=[],c=[];for(e+="",t+="";(i=ng.exec(e))&&(r=ny.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),s[u]?s[u]+=o:s[++u]=o),(i=i[0])===(r=r[0])?s[u]?s[u]+=r:s[++u]=r:(s[++u]=null,c.push({i:u,x:nm(i,r)})),a=ny.lastIndex;return a<t.length&&(o=t.slice(a),s[u]?s[u]+=o:s[++u]=o),s.length<2?c[0]?(n=c[0].x,function(e){return n(e)+""}):(l=t,function(){return l}):(t=c.length,function(e){for(var n,l=0;l<t;++l)s[(n=c[l]).i]=n.x(e);return s.join("")})}var n_,nC,nE,nT,nA,nS,nb,nO,nI,nx,nw,nN,nM,nR,nP,nD,nk,nU,nq,nL,nG,nF,nj,nB,nV,nJ,nH,nY,n$,nW,nK,nz,nX,nQ,nZ,n0,n1,n2,n5,n3,n8,n4,n6,n9,n7,le,lt,ln,ll,li,lr,lo,la,lu,ls,lc,lp,ld,lf,lh,lm,lg,ly,lv,l_,lC,lE,lT,lA,lS,lb,lO,lI,lx,lw,lN,lM,lR,lP,lD,lk,lU,lq,lL,lG,lF,lj,lB,lV=0,lJ=0,lH=0,lY=0,l$=0,lW=0,lK="object"==typeof performance&&performance.now?performance:Date,lz="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lX(){return l$||(lz(lQ),l$=lK.now()+lW)}function lQ(){l$=0}function lZ(){this._call=this._time=this._next=null}function l0(e,t,n){var l=new lZ;return l.restart(e,t,n),l}function l1(){l$=(lY=lK.now())+lW,lV=lJ=0;try{lX(),++lV;for(var e,t=lj;t;)(e=l$-t._time)>=0&&t._call.call(void 0,e),t=t._next;--lV}finally{lV=0,function(){for(var e,t,n=lj,l=1/0;n;)n._call?(l>n._time&&(l=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:lj=t);lB=e,l5(l)}(),l$=0}}function l2(){var e=lK.now(),t=e-lY;t>1e3&&(lW-=t,lY=e)}function l5(e){!lV&&(lJ&&(lJ=clearTimeout(lJ)),e-l$>24?(e<1/0&&(lJ=setTimeout(l1,e-lK.now()-lW)),lH&&(lH=clearInterval(lH))):(lH||(lY=lK.now(),lH=setInterval(l2,1e3)),lV=1,lz(l1)))}function l3(e,t,n){var l=new lZ;return t=null==t?0:+t,l.restart(n=>{l.stop(),e(n+t)},t,n),l}lZ.prototype=l0.prototype={constructor:lZ,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?lX():+n)+(null==t?0:+t),this._next||lB===this||(lB?lB._next=this:lj=this,lB=this),this._call=e,this._time=n,l5()},stop:function(){this._call&&(this._call=null,this._time=1/0,l5())}};var l8=tw("start","end","cancel","interrupt"),l4=[];function l6(e,t,n,l,i,r){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var l,i=e.__transition;function r(u){var s,c,p,d;if(1!==n.state)return a();for(s in i)if((d=i[s]).name===n.name){if(3===d.state)return l3(r);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[s]):+s<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[s])}if(l3(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(s=0,n.state=3,l=Array(p=n.tween.length),c=-1;s<p;++s)(d=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(l[++c]=d);l.length=c+1}}function o(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(a),n.state=5,1),r=-1,o=l.length;++r<o;)l[r].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){for(var l in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=l0(function(e){n.state=1,n.timer.restart(r,n.delay,n.time),n.delay<=e&&r(e-n.delay)},0,n.time)}(e,n,{name:t,index:l,group:i,on:l8,tween:l4,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:0})}function l9(e,t){var n=ie(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function l7(e,t){var n=ie(e,t);if(n.state>3)throw Error("too late; already running");return n}function ie(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}var it=180/Math.PI,il={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ii(e,t,n,l,i,r){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*l)&&(n-=e*u,l-=t*u),(a=Math.sqrt(n*n+l*l))&&(n/=a,l/=a,u/=a),e*l<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*it,skewX:Math.atan(u)*it,scaleX:o,scaleY:a}}function ir(e,t,n,l){function i(e){return e.length?e.pop()+" ":""}return function(r,o){var a,u,s,c,p=[],d=[];return r=e(r),o=e(o),!function(e,l,i,r,o,a){if(e!==i||l!==r){var u=o.push("translate(",null,t,null,n);a.push({i:u-4,x:nm(e,i)},{i:u-2,x:nm(l,r)})}else(i||r)&&o.push("translate("+i+t+r+n)}(r.translateX,r.translateY,o.translateX,o.translateY,p,d),a=r.rotate,u=o.rotate,a!==u?(a-u>180?u+=360:u-a>180&&(a+=360),d.push({i:p.push(i(p)+"rotate(",null,l)-2,x:nm(a,u)})):u&&p.push(i(p)+"rotate("+u+l),s=r.skewX,c=o.skewX,s!==c?d.push({i:p.push(i(p)+"skewX(",null,l)-2,x:nm(s,c)}):c&&p.push(i(p)+"skewX("+c+l),!function(e,t,n,l,r,o){if(e!==n||t!==l){var a=r.push(i(r)+"scale(",null,",",null,")");o.push({i:a-4,x:nm(e,n)},{i:a-2,x:nm(t,l)})}else(1!==n||1!==l)&&r.push(i(r)+"scale("+n+","+l+")")}(r.scaleX,r.scaleY,o.scaleX,o.scaleY,p,d),r=o=null,function(e){for(var t,n=-1,l=d.length;++n<l;)p[(t=d[n]).i]=t.x(e);return p.join("")}}}var io=ir(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?il:ii(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),ia=ir(function(e){return null==e?il:(l||(l=document.createElementNS("http://www.w3.org/2000/svg","g")),l.setAttribute("transform",e),e=l.transform.baseVal.consolidate())?ii((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):il},", ",")",")");function iu(e,t,n){var l=e._id;return e.each(function(){var e=l7(this,l);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return ie(e,l).value[t]}}var ns=p("bYoiY");function is(e,t){var n;return("number"==typeof t?nm:t instanceof(0,ns.default)?nf:(n=(0,ns.default)(t))?(t=n,nf):nv)(e,t)}var ic=nu.prototype.constructor;function ip(e){return function(){this.style.removeProperty(e)}}var id=0;function ih(e,t,n,l){this._groups=e,this._parents=t,this._name=n,this._id=l}var im=nu.prototype;ih.prototype=(function(e){return nu().transition(e)}).prototype={constructor:ih,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=tP(e));for(var l=this._groups,i=l.length,r=Array(i),o=0;o<i;++o)for(var a,u,s=l[o],c=s.length,p=r[o]=Array(c),d=0;d<c;++d)(a=s[d])&&(u=e.call(a,a.__data__,d,s))&&("__data__"in a&&(u.__data__=a.__data__),p[d]=u,l6(p[d],t,n,d,p,ie(a,n)));return new ih(r,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=tk(e));for(var l=this._groups,i=l.length,r=[],o=[],a=0;a<i;++a)for(var u,s=l[a],c=s.length,p=0;p<c;++p)if(u=s[p]){for(var d,f=e.call(u,u.__data__,p,s),h=ie(u,n),m=0,g=f.length;m<g;++m)(d=f[m])&&l6(d,t,n,m,f,h);r.push(f),o.push(u)}return new ih(r,o,t,n)},selectChild:im.selectChild,selectChildren:im.selectChildren,filter:function(e){"function"!=typeof e&&(e=tU(e));for(var t=this._groups,n=t.length,l=Array(n),i=0;i<n;++i)for(var r,o=t[i],a=o.length,u=l[i]=[],s=0;s<a;++s)(r=o[s])&&e.call(r,r.__data__,s,o)&&u.push(r);return new ih(l,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,l=t.length,i=n.length,r=Math.min(l,i),o=Array(l),a=0;a<r;++a)for(var u,s=t[a],c=n[a],p=s.length,d=o[a]=Array(p),f=0;f<p;++f)(u=s[f]||c[f])&&(d[f]=u);for(;a<l;++a)o[a]=t[a];return new ih(o,this._parents,this._name,this._id)},selection:function(){return new ic(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++id,l=this._groups,i=l.length,r=0;r<i;++r)for(var o,a=l[r],u=a.length,s=0;s<u;++s)if(o=a[s]){var c=ie(o,t);l6(o,e,n,s,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ih(l,this._parents,e,n)},call:im.call,nodes:im.nodes,node:im.node,size:im.size,empty:im.empty,each:im.each,on:function(e,t){var n,l,i,r,o,a,u=this._id;return arguments.length<2?ie(this.node(),u).on.on(e):this.each((n=u,l=e,i=t,a=(l+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?l9:l7,function(){var e=a(this,n),t=e.on;t!==r&&(o=(r=t).copy()).on(l,i),e.on=o}))},attr:function(e,t){var n=tz(e),l="transform"===n?ia:is;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var l,i,r;return function(){var o,a,u=n(this);return null==u?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local))===(a=u+"")?null:o===l&&a===i?r:(i=a,r=t(l=o,u))}}:function(e,t,n){var l,i,r;return function(){var o,a,u=n(this);return null==u?void this.removeAttribute(e):(o=this.getAttribute(e))===(a=u+"")?null:o===l&&a===i?r:(i=a,r=t(l=o,u))}})(n,l,iu(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var l,i,r=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===l?i:i=t(l=o,n)}}:function(e,t,n){var l,i,r=n+"";return function(){var o=this.getAttribute(e);return o===r?null:o===l?i:i=t(l=o,n)}})(n,l,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var l=tz(e);return this.tween(n,(l.local?function(e,t){var n,l;function i(){var i=t.apply(this,arguments);return i!==l&&(n=(l=i)&&function(t){this.setAttributeNS(e.space,e.local,i.call(this,t))}),n}return i._value=t,i}:function(e,t){var n,l;function i(){var i=t.apply(this,arguments);return i!==l&&(n=(l=i)&&function(t){this.setAttribute(e,i.call(this,t))}),n}return i._value=t,i})(l,t))},style:function(e,t,n){var l,i,r,o,a,u,s,c,p,d,f,h,m,g,y,v,_,C,E,T,A,S="transform"==(e+="")?io:is;return null==t?this.styleTween(e,(l=e,function(){var e=tQ(this,l),t=(this.style.removeProperty(l),tQ(this,l));return e===t?null:e===i&&t===r?o:o=S(i=e,r=t)})).on("end.style."+e,ip(e)):"function"==typeof t?this.styleTween(e,(a=e,u=iu(this,"style."+e,t),function(){var e=tQ(this,a),t=u(this),n=t+"";return null==t&&(this.style.removeProperty(a),n=t=tQ(this,a)),e===n?null:e===s&&n===c?p:(c=n,p=S(s=e,t))})).each((d=this._id,_="end."+(v="style."+(f=e)),function(){var e=l7(this,d),t=e.on,n=null==e.value[v]?y||(y=ip(f)):void 0;(t!==h||g!==n)&&(m=(h=t).copy()).on(_,g=n),e.on=m})):this.styleTween(e,(C=e,A=t+"",function(){var e=tQ(this,C);return e===A?null:e===E?T:T=S(E=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var l="style."+(e+="");if(arguments.length<2)return(l=this.tween(l))&&l._value;if(null==t)return this.tween(l,null);if("function"!=typeof t)throw Error();return this.tween(l,function(e,t,n){var l,i;function r(){var r=t.apply(this,arguments);return r!==i&&(l=(i=r)&&function(t){this.style.setProperty(e,r.call(this,t),n)}),l}return r._value=t,r}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=iu(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function l(){var l=e.apply(this,arguments);return l!==n&&(t=(n=l)&&function(e){this.textContent=l.call(this,e)}),t}return l._value=e,l}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var l,i=ie(this.node(),n).tween,r=0,o=i.length;r<o;++r)if((l=i[r]).name===e)return l.value;return null}return this.each((null==t?function(e,t){var n,l;return function(){var i=l7(this,e),r=i.tween;if(r!==n){l=n=r;for(var o=0,a=l.length;o<a;++o)if(l[o].name===t){(l=l.slice()).splice(o,1);break}}i.tween=l}}:function(e,t,n){var l,i;if("function"!=typeof n)throw Error();return function(){var r=l7(this,e),o=r.tween;if(o!==l){i=(l=o).slice();for(var a={name:t,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===t){i[u]=a;break}u===s&&i.push(a)}r.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){l9(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){l9(this,e).delay=t}})(t,e)):ie(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){l7(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){l7(this,e).duration=t}})(t,e)):ie(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){l7(this,e).ease=t}}(t,e)):ie(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();l7(this,t).ease=n}))},end:function(){var e,t,n=this,l=n._id,i=n.size();return new Promise(function(r,o){var a={value:o},u={value:function(){0==--i&&r()}};n.each(function(){var n=l7(this,l),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),n.on=t}),0===i&&r()})},[Symbol.iterator]:im[Symbol.iterator]};var ig={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};nu.prototype.interrupt=function(e){return this.each(function(){!function(e,t){var n,l,i,r=e.__transition,o=!0;if(r){for(i in t=null==t?null:t+"",r){if((n=r[i]).name!==t){o=!1;continue}l=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(l?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}o&&delete e.__transition}}(this,e)})},nu.prototype.transition=function(e){var t,n;e instanceof ih?(t=e._id,e=e._name):(t=++id,(n=ig).time=lX(),e=null==e?null:e+"");for(var l=this._groups,i=l.length,r=0;r<i;++r)for(var o,a=l[r],u=a.length,s=0;s<u;++s)(o=a[s])&&l6(o,e,t,s,a,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(o,t));return new ih(l,this._parents,e,t)};const{abs:iy,max:iv,min:i_}=Math;function iC(e){return{type:e}}["w","e"].map(iC),["n","s"].map(iC),["n","w","e","s","nw","ne","sw","se"].map(iC);class iE extends Map{constructor(e,t=iA){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,n]of e)this.set(t,n)}get(e){return super.get(iT(this,e))}has(e){return super.has(iT(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},n){let l=t(n);return e.has(l)?e.get(l):(e.set(l,n),n)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},n){let l=t(n);return e.has(l)&&(n=e.get(l),e.delete(l)),n}(this,e))}}function iT({_intern:e,_key:t},n){let l=t(n);return e.has(l)?e.get(l):n}function iA(e){return null!==e&&"object"==typeof e?e.valueOf():e}function iS(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}const ib=Symbol("implicit"),iO=Math.sqrt(50),iI=Math.sqrt(10),ix=Math.sqrt(2);function iw(e,t,n){let l,i,r,o=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(o)),u=o/Math.pow(10,a),s=u>=iO?10:u>=iI?5:u>=ix?2:1;return(a<0?(l=Math.round(e*(r=Math.pow(10,-a)/s)),i=Math.round(t*r),l/r<e&&++l,i/r>t&&--i,r=-r):(l=Math.round(e/(r=Math.pow(10,a)*s)),i=Math.round(t/r),l*r<e&&++l,i*r>t&&--i),i<l&&.5<=n&&n<2)?iw(e,t,2*n):[l,i,r]}function iN(e,t,n){return iw(e*=1,t*=1,n*=1)[2]}function iM(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function iR(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iP(e){let t,n,l;function i(e,l,r=0,o=e.length){if(r<o){if(0!==t(l,l))return o;do{let t=r+o>>>1;0>n(e[t],l)?r=t+1:o=t}while(r<o)}return r}return 2!==e.length?(t=iM,n=(t,n)=>iM(e(t),n),l=(t,n)=>e(t)-n):(t=e===iM||e===iR?e:iD,n=e,l=e),{left:i,center:function(e,t,n=0,r=e.length){let o=i(e,t,n,r-1);return o>n&&l(e[o-1],t)>-l(e[o],t)?o-1:o},right:function(e,l,i=0,r=e.length){if(i<r){if(0!==t(l,l))return r;do{let t=i+r>>>1;0>=n(e[t],l)?i=t+1:r=t}while(i<r)}return i}}}function iD(){return 0}const ik=iP(iM),iU=ik.right;function iq(e,t){return e*=1,t*=1,function(n){return Math.round(e*(1-n)+t*n)}}function iL(e){return+e}ik.left,iP(function(e){return null===e?NaN:+e}).center;var iG=[0,1];function iF(e){return e}function ij(e,t){var n;return(t-=e*=1)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n})}function iB(e,t,n){var l=e[0],i=e[1],r=t[0],o=t[1];return i<l?(l=ij(i,l),r=n(o,r)):(l=ij(l,i),r=n(r,o)),function(e){return r(l(e))}}function iV(e,t,n){var l=Math.min(e.length,t.length)-1,i=Array(l),r=Array(l),o=-1;for(e[l]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<l;)i[o]=ij(e[o],e[o+1]),r[o]=n(t[o],t[o+1]);return function(t){var n=iU(e,t,1,l)-1;return r[n](i[n](t))}}function iJ(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,l=e.slice(0,n);return[l.length>1?l[0]+l.slice(2):l,+e.slice(n+1)]}function iH(e){return(e=iJ(Math.abs(e)))?e[1]:NaN}var iY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function i$(e){var t;if(!(t=iY.exec(e)))throw Error("invalid format: "+e);return new iW({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function iW(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function iK(e,t){var n=iJ(e,t);if(!n)return e+"";var l=n[0],i=n[1];return i<0?"0."+Array(-i).join("0")+l:l.length>i+1?l.slice(0,i+1)+"."+l.slice(i+1):l+Array(i-l.length+2).join("0")}i$.prototype=iW.prototype,iW.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var iz={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>iK(100*e,t),r:iK,s:function(e,t){var n=iJ(e,t);if(!n)return e+"";var l=n[0],r=n[1],o=r-(i=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,a=l.length;return o===a?l:o>a?l+Array(o-a+1).join("0"):o>0?l.slice(0,o)+"."+l.slice(o):"0."+Array(1-o).join("0")+iJ(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function iX(e){return e}var iQ=Array.prototype.map,iZ=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function i0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function i1(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function i2(e){return e<0?-e*e:e*e}function i5(e){return((e=Math.exp(e))+1/e)/2}function i3(e,t,n){this.k=e,this.x=t,this.y=n}o=(r=function(e){var t,n,l,r=void 0===e.grouping||void 0===e.thousands?iX:(t=iQ.call(e.grouping,Number),n=e.thousands+"",function(e,l){for(var i=e.length,r=[],o=0,a=t[0],u=0;i>0&&a>0&&(u+a+1>l&&(a=Math.max(1,l-u)),r.push(e.substring(i-=a,i+a)),!((u+=a+1)>l));)a=t[o=(o+1)%t.length];return r.reverse().join(n)}),o=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",u=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?iX:(l=iQ.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return l[+e]})}),c=void 0===e.percent?"%":e.percent+"",p=void 0===e.minus?"−":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=i$(e)).fill,n=e.align,l=e.sign,f=e.symbol,h=e.zero,m=e.width,g=e.comma,y=e.precision,v=e.trim,_=e.type;"n"===_?(g=!0,_="g"):iz[_]||(void 0===y&&(y=12),v=!0,_="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var C="$"===f?o:"#"===f&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",E="$"===f?a:/[%p]/.test(_)?c:"",T=iz[_],A=/[defgprs%]/.test(_);function S(e){var o,a,c,f=C,S=E;if("c"===_)S=T(e)+S,e="";else{var b=(e*=1)<0||1/e<0;if(e=isNaN(e)?d:T(Math.abs(e),y),v&&(e=function(e){e:for(var t,n=e.length,l=1,i=-1;l<n;++l)switch(e[l]){case".":i=t=l;break;case"0":0===i&&(i=l),t=l;break;default:if(!+e[l])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),b&&0==+e&&"+"!==l&&(b=!1),f=(b?"("===l?l:p:"-"===l||"("===l?"":l)+f,S=("s"===_?iZ[8+i/3]:"")+S+(b&&"("===l?")":""),A){for(o=-1,a=e.length;++o<a;)if(48>(c=e.charCodeAt(o))||c>57){S=(46===c?u+e.slice(o+1):e.slice(o))+S,e=e.slice(0,o);break}}}g&&!h&&(e=r(e,1/0));var O=f.length+e.length+S.length,I=O<m?Array(m-O+1).join(t):"";switch(g&&h&&(e=r(I+e,I.length?m-S.length:1/0),I=""),n){case"<":e=f+e+S+I;break;case"=":e=f+I+e+S;break;case"^":e=I.slice(0,O=I.length>>1)+f+e+S+I.slice(O);break;default:e=I+f+e+S}return s(e)}return y=void 0===y?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),S.toString=function(){return e+""},S}return{format:f,formatPrefix:function(e,t){var n=f(((e=i$(e)).type="f",e)),l=3*Math.max(-8,Math.min(8,Math.floor(iH(t)/3))),i=Math.pow(10,-l),r=iZ[8+l/3];return function(e){return n(i*e)+r}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,a=r.formatPrefix,!function e(t,n,l){function i(e,i){var r,o,a=e[0],u=e[1],s=e[2],c=i[0],p=i[1],d=i[2],f=c-a,h=p-u,m=f*f+h*h;if(m<1e-12)o=Math.log(d/s)/t,r=function(e){return[a+e*f,u+e*h,s*Math.exp(t*e*o)]};else{var g=Math.sqrt(m),y=(d*d-s*s+l*m)/(2*s*n*g),v=(d*d-s*s-l*m)/(2*d*n*g),_=Math.log(Math.sqrt(y*y+1)-y);o=(Math.log(Math.sqrt(v*v+1)-v)-_)/t,r=function(e){var l,i,r=e*o,c=i5(_),p=s/(n*g)*(c*(((l=Math.exp(2*(l=t*r+_)))-1)/(l+1))-((i=Math.exp(i=_))-1/i)/2);return[a+p*f,u+p*h,s*c/i5(t*r+_)]}}return r.duration=1e3*o*t/Math.SQRT2,r}return i.rho=function(t){var n=Math.max(.001,+t),l=n*n;return e(n,l,l*l)},i}(Math.SQRT2,2,4),i3.prototype={constructor:i3,scale:function(e){return 1===e?this:new i3(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new i3(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new i3(1,0,0);i3.prototype;var i8={},i4={value:function(){}};function i6(){for(var e,t=0,n=arguments.length,l={};t<n;++t){if(!(e=arguments[t]+"")||e in l||/[\s.]/.test(e))throw Error("illegal type: "+e);l[e]=[]}return new i9(l)}function i9(e){this._=e}function i7(e,t,n){for(var l=0,i=e.length;l<i;++l)if(e[l].name===t){e[l]=i4,e=e.slice(0,l).concat(e.slice(l+1));break}return null!=n&&e.push({name:t,value:n}),e}i9.prototype=i6.prototype={constructor:i9,on:function(e,t){var n,l=this._,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!l.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),r=-1,o=i.length;if(arguments.length<2){for(;++r<o;)if((n=(e=i[r]).type)&&(n=function(e,t){for(var n,l=0,i=e.length;l<i;++l)if((n=e[l]).name===t)return n.value}(l[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++r<o;)if(n=(e=i[r]).type)l[n]=i7(l[n],e.name,t);else if(null==t)for(n in l)l[n]=i7(l[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new i9(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,l,i=Array(n),r=0;r<n;++r)i[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(l=this._[e],r=0,n=l.length;r<n;++r)l[r].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var l=this._[e],i=0,r=l.length;i<r;++i)l[i].value.apply(t,n)}};const re=Math.PI/180,rt={archimedean:ru,rectangular:function(e){var t=4*e[0]/e[1],n=0,l=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:l+=4;break;case 2:n-=t;break;default:l-=4}return[n,l]}}};function rn(e){return e.text}function rl(){return"serif"}function ri(){return"normal"}function rr(e){return Math.sqrt(e.value)}function ro(){return(~~(6*random())-3)*30}function ra(){return 1}function ru(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function rs(){return document.createElement("canvas")}function rc(e){return"function"==typeof e?e:function(){return e}}i8=function(){var e=[256,256],t=rn,n=rl,l=rr,i=ri,r=ri,o=ro,a=ra,u=ru,s=[],c=1/0,p=i6("word","end"),d=null,f=Math.random,h={},m=rs;return h.canvas=function(e){return arguments.length?(m=rc(e),h):m},h.start=function(){var g=function(e){let t=e.getContext("2d",{willReadFrequently:!0});e.width=e.height=1;let n=Math.sqrt(t.getImageData(0,0,1,1).data.length>>2);return e.width=2048/n,e.height=2048/n,t.fillStyle=t.strokeStyle="red",{context:t,ratio:n}}(m()),y=function(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}((e[0]>>5)*e[1]),v=null,_=s.length,C=-1,E=[],T=s.map(function(e,u){return e.text=t.call(this,e,u),e.font=n.call(this,e,u),e.style=i.call(this,e,u),e.weight=r.call(this,e,u),e.rotate=o.call(this,e,u),e.size=~~l.call(this,e,u),e.padding=a.call(this,e,u),e}).sort(function(e,t){return t.size-e.size});return d&&clearInterval(d),d=setInterval(A,0),A(),h;function A(){for(var t=Date.now();Date.now()-t<c&&++C<_&&d;){var n=T[C];n.x=e[0]*(f()+.5)>>1,n.y=e[1]*(f()+.5)>>1,function(e,t,n,l){if(!t.sprite){var i=e.context,r=e.ratio;i.clearRect(0,0,2048/r,2048/r);var o=0,a=0,u=0,s=n.length;for(--l;++l<s;){t=n[l],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/r)+"px "+t.font;let e=i.measureText(t.text),s=-Math.floor(e.width/2),g=(e.width+1)*r,y=t.size<<1;if(t.rotate){var c=Math.sin(t.rotate*re),p=Math.cos(t.rotate*re),d=g*p,f=g*c,h=y*p,m=y*c;g=Math.max(Math.abs(d+m),Math.abs(d-m))+31>>5<<5,y=~~Math.max(Math.abs(f+h),Math.abs(f-h))}else g=g+31>>5<<5;if(y>u&&(u=y),o+g>=2048&&(o=0,a+=u,u=0),a+y>=2048)break;i.translate((o+(g>>1))/r,(a+(y>>1))/r),t.rotate&&i.rotate(t.rotate*re),i.fillText(t.text,s,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,s,0)),i.restore(),t.width=g,t.height=y,t.xoff=o,t.yoff=a,t.x1=g>>1,t.y1=y>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=g}for(var g=i.getImageData(0,0,2048/r,2048/r).data,y=[];--l>=0;)if((t=n[l]).hasText){for(var v=t.width,_=v>>5,C=t.y1-t.y0,E=0;E<C*_;E++)y[E]=0;if(null==(o=t.xoff))return;a=t.yoff;for(var T=0,A=-1,S=0;S<C;S++){for(var E=0;E<v;E++){var b=_*S+(E>>5),O=g[(a+S)*2048+(o+E)<<2]?1<<31-E%32:0;y[b]|=O,T|=O}T?A=S:(t.y0++,C--,S--,a++)}t.y1=t.y0+A,t.sprite=y.slice(0,(t.y1-t.y0)*_)}}}(g,n,T,C),n.hasText&&function(t,n,l){e[0],e[1];for(var i,r,o,a=n.x,s=n.y,c=Math.sqrt(e[0]*e[0]+e[1]*e[1]),p=u(e),d=.5>f()?1:-1,h=-d;(i=p(h+=d))&&!(Math.min(Math.abs(r=~~i[0]),Math.abs(o=~~i[1]))>=c);)if(n.x=a+r,n.y=s+o,!(n.x+n.x0<0)&&!(n.y+n.y0<0)&&!(n.x+n.x1>e[0])&&!(n.y+n.y1>e[1])){if((!l||(m=n,g=l,m.x+m.x1>g[0].x&&m.x+m.x0<g[1].x&&m.y+m.y1>g[0].y&&m.y+m.y0<g[1].y))&&!function(e,t,n){n>>=5;for(var l,i=e.sprite,r=e.width>>5,o=e.x-(r<<4),a=127&o,u=32-a,s=e.y1-e.y0,c=(e.y+e.y0)*n+(o>>5),p=0;p<s;p++){l=0;for(var d=0;d<=r;d++)if((l<<u|(d<r?(l=i[p*r+d])>>>a:0))&t[c+d])return!0;c+=n}return!1}(n,t,e[0])){for(var m,g,y,v=n.sprite,_=n.width>>5,C=e[0]>>5,E=n.x-(_<<4),T=127&E,A=32-T,S=n.y1-n.y0,b=(n.y+n.y0)*C+(E>>5),O=0;O<S;O++){y=0;for(var I=0;I<=_;I++)t[b+I]|=y<<A|(I<_?(y=v[O*_+I])>>>T:0);b+=C}return!0}}return!1}(y,n,v)&&(E.push(n),p.call("word",h,n),v?function(e,t){var n=e[0],l=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>l.x&&(l.x=t.x+t.x1),t.y+t.y1>l.y&&(l.y=t.y+t.y1)}(v,n):v=[{x:n.x+n.x0,y:n.y+n.y0},{x:n.x+n.x1,y:n.y+n.y1}],n.x-=e[0]>>1,n.y-=e[1]>>1)}C>=_&&(h.stop(),p.call("end",h,E,v))}},h.stop=function(){for(let e of(d&&(clearInterval(d),d=null),s))delete e.sprite;return h},h.timeInterval=function(e){return arguments.length?(c=null==e?1/0:e,h):c},h.words=function(e){return arguments.length?(s=e,h):s},h.size=function(t){return arguments.length?(e=[+t[0],+t[1]],h):e},h.font=function(e){return arguments.length?(n=rc(e),h):n},h.fontStyle=function(e){return arguments.length?(i=rc(e),h):i},h.fontWeight=function(e){return arguments.length?(r=rc(e),h):r},h.rotate=function(e){return arguments.length?(o=rc(e),h):o},h.text=function(e){return arguments.length?(t=rc(e),h):t},h.spiral=function(e){return arguments.length?(u=rt[e]||e,h):u},h.fontSize=function(e){return arguments.length?(l=rc(e),h):l},h.padding=function(e){return arguments.length?(a=rc(e),h):a},h.random=function(e){return arguments.length?(f=e,h):f},h.on=function(){var e=p.on.apply(p,arguments);return e===p?h:e},h};var rp=function(e){for(var t=e.length/6|0,n=Array(t),l=0;l<t;)n[l]="#"+e.slice(6*l,6*++l);return n}("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");const rd=new class{constructor(n){var l;if(null==n.apiKey)throw Error("An API Key must be set when running in a browser");if(n.project||n.location)throw Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=null!=(l=n.vertexai)&&l,this.apiKey=n.apiKey;let i=function(n,l,i){var r;return(null==(r=n.httpOptions)?void 0:r.baseUrl)?n.httpOptions.baseUrl:n.vertexai?null!=t?t:l:null!=e?e:i}(n,void 0,void 0);i&&(n.httpOptions?n.httpOptions.baseUrl=i:n.httpOptions={baseUrl:i}),this.apiVersion=n.apiVersion;let r=new tI(this.apiKey);this.apiClient=new e8({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:n.httpOptions,userAgentExtra:"gl-node/web",uploader:new tA,downloader:new t_}),this.models=new tp(this.apiClient),this.live=new tr(this.apiClient,r,new tS),this.batches=new ey(this.apiClient),this.chats=new ex(this.models,this.apiClient),this.caches=new eT(this.apiClient),this.files=new eR(this.apiClient),this.operations=new tf(this.apiClient),this.authTokens=new tm(this.apiClient),this.tunings=new tv(this.apiClient)}}({apiKey:void 0});let rf=null;!function(){let e=document.createElement("div");e.className="container";let t=document.createElement("h1");t.textContent="Reddit Post Sentiment Analyzer";let n=document.createElement("p");n.innerHTML="Enter one or more Reddit post URLs (one per line) to analyze comment sentiment and identify key trends.";let l=document.createElement("div");l.className="input-group";let i=document.createElement("textarea");i.placeholder="https://www.reddit.com/r/...\nhttps://www.reddit.com/r/...",i.setAttribute("aria-label","Reddit Post URLs"),i.rows=4;let r=document.createElement("button");r.textContent="Analyze Posts",r.setAttribute("aria-live","polite"),l.append(i,r);let u=document.createElement("div");u.className="loader hidden";let s=document.createElement("div");s.className="error hidden",s.setAttribute("role","alert");let c=document.createElement("div");c.className="filter-bar hidden";let p=document.createElement("div");p.className="results-container hidden";let d=document.createElement("div");d.className="results-header hidden";let f=document.createElement("button");async function h(){let e=i.value.split("\n").map(e=>e.trim()).filter(Boolean);if(0===e.length)return void g("Please enter at least one valid Reddit URL.");if(e.some(e=>!e.includes("reddit.com")))return void g("Please ensure all entries are valid Reddit URLs.");m(!0),rf=null;try{let t={type:le.OBJECT,properties:{results:{type:le.ARRAY,description:"An array of sentiment analysis results, one for each URL.",items:{type:le.OBJECT,properties:{url:{type:le.STRING,description:"The Reddit post URL."},sentimentBreakdown:{type:le.OBJECT,properties:{positive:{type:le.OBJECT,properties:{count:{type:le.INTEGER,description:"Total number of positive comments."},percentage:{type:le.INTEGER,description:"Percentage of positive comments (0-100)."},keywords:{type:le.ARRAY,items:{type:le.STRING},description:"Frequent keywords in positive comments."},comments:{type:le.ARRAY,items:{type:le.STRING},description:"Examples of positive comments."}},required:["count","percentage","keywords","comments"]},neutral:{type:le.OBJECT,properties:{count:{type:le.INTEGER,description:"Total number of neutral comments."},percentage:{type:le.INTEGER,description:"Percentage of neutral comments (0-100)."},keywords:{type:le.ARRAY,items:{type:le.STRING},description:"Frequent keywords in neutral comments."},comments:{type:le.ARRAY,items:{type:le.STRING},description:"Examples of neutral comments."}},required:["count","percentage","keywords","comments"]},negative:{type:le.OBJECT,properties:{count:{type:le.INTEGER,description:"Total number of negative comments."},percentage:{type:le.INTEGER,description:"Percentage of negative comments (0-100)."},keywords:{type:le.ARRAY,items:{type:le.STRING},description:"Frequent keywords in negative comments."},comments:{type:le.ARRAY,items:{type:le.STRING},description:"Examples of negative comments."}},required:["count","percentage","keywords","comments"]}},required:["positive","neutral","negative"]}},required:["url","sentimentBreakdown"]}}},required:["results"]},n=await rd.models.generateContent({model:"gemini-2.5-flash",contents:`Please perform a sentiment analysis on the comments of these Reddit posts:
${e.join("\n")}`,config:{systemInstruction:'You are a world-class Sentiment Analyst Agent. Your task is to analyze the comments on the given Reddit posts. For EACH post URL provided, you must perform a separate analysis. Categorize comments into "Positive", "Neutral", and "Negative". For each category within each post, provide the total count of comments, the percentage of the total, a list of the most frequent keywords, and a few example comments. Return the result as an array of objects, one for each URL.',responseMimeType:"application/json",responseSchema:t}}),l=JSON.parse(n.text).results;rf={summary:function(e){let t={positive:{count:0,keywords:[],comments:[],percentage:0},neutral:{count:0,keywords:[],comments:[],percentage:0},negative:{count:0,keywords:[],comments:[],percentage:0}},n=0;if(e.forEach(e=>{let l=e.sentimentBreakdown;for(let e of["positive","neutral","negative"])l[e]&&(t[e].count+=l[e].count,t[e].keywords.push(...l[e].keywords),t[e].comments.push(...l[e].comments),n+=l[e].count)}),n>0)for(let e of["positive","neutral","negative"])t[e].percentage=Math.round(t[e].count/n*100);return{url:"All Posts",sentimentBreakdown:t}}(l),individual:l},function(e){c.innerHTML="";let{summary:t,individual:n}=e,l=document.createElement("button");l.textContent="All Posts (Summary)",l.className="filter-button active",l.addEventListener("click",e=>{document.querySelectorAll(".filter-button").forEach(e=>e.classList.remove("active")),e.currentTarget.classList.add("active"),y(t)}),c.append(l),n.length>1&&n.forEach((e,t)=>{let n=document.createElement("button");e.url.match(/reddit\.com(\/r\/[^/]+\/comments\/[^/]+)/),n.textContent=`Post ${t+1}`,n.title=e.url,n.className="filter-button",n.addEventListener("click",t=>{document.querySelectorAll(".filter-button").forEach(e=>e.classList.remove("active")),t.currentTarget.classList.add("active"),y(e)}),c.append(n)}),c.classList.remove("hidden"),y(t)}(rf)}catch(e){console.error(e),g("Could not analyze the post(s). The model may be unable to access the URL(s) or the content is restricted. Please try again.")}finally{m(!1)}}function m(e){p.innerHTML="",c.innerHTML="",s.classList.add("hidden"),p.classList.add("hidden"),d.classList.add("hidden"),c.classList.add("hidden"),e?(u.classList.remove("hidden"),r.disabled=!0,r.textContent="Analyzing..."):(u.classList.add("hidden"),r.disabled=!1,r.textContent="Analyze Posts")}function g(e){s.textContent=e,s.classList.remove("hidden")}function y(e){p.innerHTML="";let t=document.createElement("div");t.className="sentiment-breakdown",["positive","neutral","negative"].forEach(n=>{let l=e.sentimentBreakdown[n];if(!l)return;let i=document.createElement("div");i.className=`sentiment-card ${n}`;let r=document.createElement("h2");r.textContent=n.charAt(0).toUpperCase()+n.slice(1);let u=document.createElement("div");u.className="percentage",u.textContent=`${l.percentage}%`;let s=document.createElement("p");s.className="comment-count",s.textContent=`${l.count} Comment${1===l.count?"":"s"}`;let c=document.createElement("h3");c.textContent="Trending Keywords";let p=document.createElement("div");p.className="word-cloud-container";let d=document.createElement("h3");d.textContent="Sample Comments";let f=document.createElement("ul");f.className="comments-list",(l.comments||[]).slice(0,3).forEach(e=>{let t=document.createElement("li");t.className="comment",t.textContent=e,f.append(t)}),i.append(r,u,s,c,p,d,f),t.append(i),l.keywords&&l.keywords.length>0?setTimeout(()=>(function(e,t){var n;let l=Object.entries(t.reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{})).map(([e,t])=>({text:e,size:t}));l.sort((e,t)=>t.size-e.size);let i=(function(){return(function e(){var t,n,l,i,r=(n=(t=function(){var e,t,n,l,i,r,o=iG,a=iG,u=function e(t,n){var l,i,r=typeof n;return null==n||"boolean"===r?np(n):("number"===r?nm:"string"===r?(i=(0,ns.default)(n))?(n=i,nf):nv:n instanceof(0,ns.default)?nf:n instanceof Date?function(e,t){var n=new Date;return e*=1,t*=1,function(l){return n.setTime(e*(1-l)+t*l),n}}:!ArrayBuffer.isView(l=n)||l instanceof DataView?Array.isArray(n)?function(t,n){var l,i=n?n.length:0,r=t?Math.min(i,t.length):0,o=Array(r),a=Array(i);for(l=0;l<r;++l)o[l]=e(t[l],n[l]);for(;l<i;++l)a[l]=n[l];return function(e){for(l=0;l<r;++l)a[l]=o[l](e);return a}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var l,i={},r={};for(l in(null===t||"object"!=typeof t)&&(t={}),(null===n||"object"!=typeof n)&&(n={}),n)l in t?i[l]=e(t[l],n[l]):r[l]=n[l];return function(e){for(l in i)r[l]=i[l](e);return r}}:nm:function(e,t){t||(t=[]);var n,l=e?Math.min(t.length,e.length):0,i=t.slice();return function(r){for(n=0;n<l;++n)i[n]=e[n]*(1-r)+t[n]*r;return i}})(t,n)},s=iF;function c(){var e,t,n,u=Math.min(o.length,a.length);return s!==iF&&(e=o[0],t=o[u-1],e>t&&(n=e,e=t,t=n),s=function(n){return Math.max(e,Math.min(t,n))}),l=u>2?iV:iB,i=r=null,p}function p(t){return null==t||isNaN(t*=1)?n:(i||(i=l(o.map(e),a,u)))(e(s(t)))}return p.invert=function(n){return s(t((r||(r=l(a,o.map(e),nm)))(n)))},p.domain=function(e){return arguments.length?(o=Array.from(e,iL),c()):o.slice()},p.range=function(e){return arguments.length?(a=Array.from(e),c()):a.slice()},p.rangeRound=function(e){return a=Array.from(e),u=iq,c()},p.clamp=function(e){return arguments.length?(s=!!e||iF,c()):s!==iF},p.interpolate=function(e){return arguments.length?(u=e,c()):u},p.unknown=function(e){return arguments.length?(n=e,p):n},function(n,l){return e=n,t=l,c()}}())(iF,iF),l=1,n.exponent=function(e){return arguments.length?1==(l=+e)?t(iF,iF):.5===l?t(i1,i2):t(i0(l),i0(1/l)):l},i=n.domain,n.ticks=function(e){var t=i();return function(e,t,n){if(t*=1,e*=1,!((n*=1)>0))return[];if(e===t)return[e];let l=t<e,[i,r,o]=l?iw(t,e,n):iw(e,t,n);if(!(r>=i))return[];let a=r-i+1,u=Array(a);if(l)if(o<0)for(let e=0;e<a;++e)u[e]=-((r-e)/o);else for(let e=0;e<a;++e)u[e]=(r-e)*o;else if(o<0)for(let e=0;e<a;++e)u[e]=-((i+e)/o);else for(let e=0;e<a;++e)u[e]=(i+e)*o;return u}(t[0],t[t.length-1],null==e?10:e)},n.tickFormat=function(e,t){var n=i();return function(e,t,n,l){var i,r,u=function(e,t,n){t*=1,e*=1,n*=1;let l=t<e,i=l?iN(t,e,n):iN(e,t,n);return(l?-1:1)*(i<0?-(1/i):i)}(e,t,n);switch((l=i$(null==l?",f":l)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=l.precision||isNaN(r=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(iH(s)/3)))-iH(Math.abs(u))))||(l.precision=r),a(l,s);case"":case"e":case"g":case"p":case"r":null!=l.precision||isNaN(r=Math.max(0,iH(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(i=Math.abs(i=u)))-iH(i))+1)||(l.precision=r-("e"===l.type));break;case"f":case"%":null!=l.precision||isNaN(r=Math.max(0,-iH(Math.abs(u))))||(l.precision=r-("%"===l.type)*2)}return o(l)}(n[0],n[n.length-1],null==e?10:e,t)},n.nice=function(e){null==e&&(e=10);var t,l,r=i(),o=0,a=r.length-1,u=r[o],s=r[a],c=10;for(s<u&&(l=u,u=s,s=l,l=o,o=a,a=l);c-- >0;){if((l=iN(u,s,e))===t)return r[o]=u,r[a]=s,i(r);if(l>0)u=Math.floor(u/l)*l,s=Math.ceil(s/l)*l;else if(l<0)u=Math.ceil(u*l)/l,s=Math.floor(s*l)/l;else break;t=l}return n},n);return r.copy=function(){return e().domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown()).exponent(r.exponent())},iS.apply(r,arguments),r}).apply(null,arguments).exponent(.5)})().domain([function(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let l=-1;for(let i of e)null!=(i=t(i,++l,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}(l,e=>e.size),function(e,t){let n;if(void 0===t)for(let t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let l=-1;for(let i of e)null!=(i=t(i,++l,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}(l,e=>e.size)]).range([10,35]),r=((n=i8)&&n.__esModule?n.default:n)().size([e.clientWidth,200]).words(l.map(e=>({text:e.text,size:i(e.size)}))).padding(5).rotate(()=>(~~(6*Math.random())-3)*15).font("Impact").fontSize(e=>e.size).on("end",function(t){let n=("string"==typeof e?new na([[document.querySelector(e)]],[document.documentElement]):new na([[e]],no)).append("svg").attr("width",r.size()[0]).attr("height",r.size()[1]).append("g").attr("transform","translate("+r.size()[0]/2+","+r.size()[1]/2+")"),l=function e(){var t=new iE,n=[],l=[],i=ib;function r(e){let r=t.get(e);if(void 0===r){if(i!==ib)return i;t.set(e,r=n.push(e)-1)}return l[r%l.length]}return r.domain=function(e){if(!arguments.length)return n.slice();for(let l of(n=[],t=new iE,e))t.has(l)||t.set(l,n.push(l)-1);return r},r.range=function(e){return arguments.length?(l=Array.from(e),r):l.slice()},r.unknown=function(e){return arguments.length?(i=e,r):i},r.copy=function(){return e(n,l).unknown(i)},iS.apply(r,arguments),r}(rp);n.selectAll("text").data(t).enter().append("text").style("font-size",e=>e.size+"px").style("font-family","Impact").style("fill",(e,t)=>l(t)).attr("text-anchor","middle").attr("transform",e=>`translate(${e.x}, ${e.y})rotate(${e.rotate})`).text(e=>e.text)});r.start()})(p,l.keywords),0):(p.textContent="No keywords found.",p.style.textAlign="center",p.style.opacity="0.7")}),p.append(t),p.classList.remove("hidden"),d.classList.remove("hidden")}f.className="download-button",f.textContent="Download Results (CSV)",f.setAttribute("aria-label","Download analysis results as a CSV file"),d.append(f),document.body.append(e),e.append(t,n,l,u,s,c,d,p),r.addEventListener("click",h),f.addEventListener("click",()=>{rf&&function(e){let t=e=>`"${e.join("; ").replace(/"/g,'""')}"`,n=new Blob(["URL,Sentiment,Percentage,Comment Count,Keywords,Sample Comments\n"+e.flatMap(e=>["positive","neutral","negative"].map(n=>{let l=e.sentimentBreakdown[n];return l?[`"${e.url}"`,`"${n.charAt(0).toUpperCase()+n.slice(1)}"`,l.percentage,l.count,t(l.keywords),t(l.comments)].join(","):""})).filter(Boolean).join("\n")],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(n),i=document.createElement("a");i.setAttribute("href",l),i.setAttribute("download","reddit_sentiment_analysis.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}(rf.individual)})}();
//# sourceMappingURL=sentiment-analyzer-agent.8bd0e6b7.js.map
